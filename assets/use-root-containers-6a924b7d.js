import{r as n,R as m}from"./index-37ba2b57.js";import{s as R,n as v,c as E,p as C}from"./use-owner-127f86a6.js";import{s as b,o as d,e as M,D as g,y,T as N,f as T,b as w,l as h,X as $}from"./open-closed-452e92a4.js";import{r as S}from"./index-4da2af8c.js";var F=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(F||{});function X(){let e=n.useRef(0);return R("keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function z(e,t,l,r){let a=b(l);n.useEffect(()=>{e=e??window;function s(u){a.current(u)}return e.addEventListener(t,s,r),()=>e.removeEventListener(t,s,r)},[e,t,r])}function H(e){let t=d(e),l=n.useRef(!1);n.useEffect(()=>(l.current=!1,()=>{l.current=!0,M(()=>{l.current&&t()})}),[t])}let x=n.createContext(!1);function L(){return n.useContext(x)}function J(e){return m.createElement(x.Provider,{value:e.force},e.children)}function k(e){let t=L(),l=n.useContext(P),r=v(e),[a,s]=n.useState(()=>{if(!t&&l!==null||T.isServer)return null;let u=r==null?void 0:r.getElementById("headlessui-portal-root");if(u)return u;if(r===null)return null;let o=r.createElement("div");return o.setAttribute("id","headlessui-portal-root"),r.body.appendChild(o)});return n.useEffect(()=>{a!==null&&(r!=null&&r.body.contains(a)||r==null||r.body.appendChild(a))},[a,r]),n.useEffect(()=>{t||l!==null&&s(l.current)},[l,s,t]),a}let D=n.Fragment;function j(e,t){let l=e,r=n.useRef(null),a=y(N(f=>{r.current=f}),t),s=v(r),u=k(r),[o]=n.useState(()=>{var f;return T.isServer?null:(f=s==null?void 0:s.createElement("div"))!=null?f:null}),c=n.useContext(p),i=w();return h(()=>{!u||!o||u.contains(o)||(o.setAttribute("data-headlessui-portal",""),u.appendChild(o))},[u,o]),h(()=>{if(o&&c)return c.register(o)},[c,o]),H(()=>{var f;!u||!o||(o instanceof Node&&u.contains(o)&&u.removeChild(o),u.childNodes.length<=0&&((f=u.parentElement)==null||f.removeChild(u)))}),i?!u||!o?null:S.createPortal($({ourProps:{ref:a},theirProps:l,defaultTag:D,name:"Portal"}),o):null}let A=n.Fragment,P=n.createContext(null);function B(e,t){let{target:l,...r}=e,a={ref:y(t)};return m.createElement(P.Provider,{value:l},$({ourProps:a,theirProps:r,defaultTag:A,name:"Popover.Group"}))}let p=n.createContext(null);function Q(){let e=n.useContext(p),t=n.useRef([]),l=d(s=>(t.current.push(s),e&&e.register(s),()=>r(s))),r=d(s=>{let u=t.current.indexOf(s);u!==-1&&t.current.splice(u,1),e&&e.unregister(s)}),a=n.useMemo(()=>({register:l,unregister:r,portals:t}),[l,r,t]);return[t,n.useMemo(()=>function({children:s}){return m.createElement(p.Provider,{value:a},s)},[a])]}let G=g(j),I=g(B),V=Object.assign(G,{Group:I});function W({defaultContainers:e=[],portals:t,mainTreeNodeRef:l}={}){var r;let a=n.useRef((r=l==null?void 0:l.current)!=null?r:null),s=v(a),u=d(()=>{var o;let c=[];for(let i of e)i!==null&&(i instanceof HTMLElement?c.push(i):"current"in i&&i.current instanceof HTMLElement&&c.push(i.current));if(t!=null&&t.current)for(let i of t.current)c.push(i);for(let i of(o=s==null?void 0:s.querySelectorAll("html > *, body > *"))!=null?o:[])i!==document.body&&i!==document.head&&i instanceof HTMLElement&&i.id!=="headlessui-portal-root"&&(i.contains(a.current)||c.some(f=>i.contains(f))||c.push(i));return c});return{resolveContainers:u,contains:d(o=>u().some(c=>c.contains(o))),mainTreeNodeRef:a,MainTreeNode:n.useMemo(()=>function(){return l!=null?null:m.createElement(E,{features:C.Hidden,ref:a})},[a,l])}}function Y(){let e=n.useRef(null);return{mainTreeNodeRef:e,MainTreeNode:n.useMemo(()=>function(){return m.createElement(E,{features:C.Hidden,ref:e})},[e])}}export{z as E,J as P,Q as a,H as c,W as j,X as n,V as p,F as s,Y as y};
//# sourceMappingURL=use-root-containers-6a924b7d.js.map
