import{j as Q}from"./jsx-runtime-z8MfsBtr.js";import{r as h,e as R}from"./index-yDOeu_rT.js";import{c as ge,g as st}from"./_commonjsHelpers-BosuxZz1.js";import{r as lt}from"./index-C9rmetsa.js";import{r as at}from"./index-Chjiymov.js";import{f as qe,s as Ue,E as ut,V as ct,W as dt,R as ft,K as pt,M as mt,Y as gt,p as ht,n as Ke,m as Pe,Z as Oe,a0 as bt,$ as Ve,g as We,h as vt,i as xt,q as St,v as yt,z as Et,d as It,b as Ot,y as wt,A as Tt,B as Re,e as Ct,C as Mt,L as z,o as V,r as _e,j as Pt,a1 as Rt,Q as Ae,_ as _t,U as At}from"./portal-ddlxP4mo.js";import{r as te}from"./index-32yCLrEH.js";import{o as P,p as He,m as kt,O as ke,K as ce,a as se,n as ne,L as de,c as $t,i as be,y as ve,_ as we,u as Dt,x as Ft,R as jt,s as zt,e as $e}from"./use-server-handoff-complete-Vd7s5Y0y.js";import{F as Lt}from"./MagnifyingGlassIcon-B8ROMLFy.js";function Bt(e,i,t){let[n,o]=h.useState(t),l=e!==void 0,a=h.useRef(l),s=h.useRef(!1),c=h.useRef(!1);return l&&!a.current&&!s.current?(s.current=!0,a.current=l,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!l&&a.current&&!c.current&&(c.current=!0,a.current=l,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[l?e:n,P(p=>(l||o(p),i==null?void 0:i(p)))]}function Nt(e){let[i]=h.useState(e);return i}function Ge(e={},i=null,t=[]){for(let[n,o]of Object.entries(e))Qe(t,Je(i,n),o);return t}function Je(e,i){return e?e+"["+i+"]":i}function Qe(e,i,t){if(Array.isArray(t))for(let[n,o]of t.entries())Qe(e,Je(i,n.toString()),o);else t instanceof Date?e.push([i,t.toISOString()]):typeof t=="boolean"?e.push([i,t?"1":"0"]):typeof t=="string"?e.push([i,t]):typeof t=="number"?e.push([i,`${t}`]):t==null?e.push([i,""]):Ge(t,i,e)}let qt=h.createContext(null);function Ut({children:e}){let i=h.useContext(qt);if(!i)return R.createElement(R.Fragment,null,e);let{target:t}=i;return t?te.createPortal(R.createElement(R.Fragment,null,e),t):null}function Kt({data:e,form:i,disabled:t,onReset:n,overrides:o}){let[l,a]=h.useState(null),s=He();return h.useEffect(()=>{if(n&&l)return s.addEventListener(l,"reset",n)},[l,i,n]),R.createElement(Ut,null,R.createElement(Vt,{setForm:a,formId:i}),Ge(e).map(([c,p])=>R.createElement(qe,{features:Ue.Hidden,...kt({key:c,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:i,disabled:t,name:c,value:p,...o})})))}function Vt({setForm:e,formId:i}){return h.useEffect(()=>{if(i){let t=document.getElementById(i);t&&e(t)}},[e,i]),i?null:R.createElement(qe,{features:Ue.Hidden,as:"input",type:"hidden",hidden:!0,readOnly:!0,ref:t=>{if(!t)return;let n=t.closest("form");n&&e(n)}})}function ie(e,i,t){let n=t.initialDeps??[],o;return()=>{var l,a,s,c;let p;t.key&&((l=t.debug)!=null&&l.call(t))&&(p=Date.now());const b=e();if(!(b.length!==n.length||b.some((f,C)=>n[C]!==f)))return o;n=b;let M;if(t.key&&((a=t.debug)!=null&&a.call(t))&&(M=Date.now()),o=i(...b),t.key&&((s=t.debug)!=null&&s.call(t))){const f=Math.round((Date.now()-p)*100)/100,C=Math.round((Date.now()-M)*100)/100,g=C/16,d=(S,r)=>{for(S=String(S);S.length<r;)S=" "+S;return S};console.info(`%c⏱ ${d(C,5)} /${d(f,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*g,120))}deg 100% 31%);`,t==null?void 0:t.key)}return(c=t==null?void 0:t.onChange)==null||c.call(t,o),o}}function xe(e,i){if(e===void 0)throw new Error("Unexpected undefined");return e}const Wt=(e,i)=>Math.abs(e-i)<1,Ht=(e,i,t)=>{let n;return function(...o){e.clearTimeout(n),n=e.setTimeout(()=>i.apply(this,o),t)}},Gt=e=>e,Jt=e=>{const i=Math.max(e.startIndex-e.overscan,0),t=Math.min(e.endIndex+e.overscan,e.count-1),n=[];for(let o=i;o<=t;o++)n.push(o);return n},Qt=(e,i)=>{const t=e.scrollElement;if(!t)return;const n=e.targetWindow;if(!n)return;const o=a=>{const{width:s,height:c}=a;i({width:Math.round(s),height:Math.round(c)})};if(o(t.getBoundingClientRect()),!n.ResizeObserver)return()=>{};const l=new n.ResizeObserver(a=>{const s=a[0];if(s!=null&&s.borderBoxSize){const c=s.borderBoxSize[0];if(c){o({width:c.inlineSize,height:c.blockSize});return}}o(t.getBoundingClientRect())});return l.observe(t,{box:"border-box"}),()=>{l.unobserve(t)}},De={passive:!0},Xt=typeof window>"u"?!0:"onscrollend"in window,Yt=(e,i)=>{const t=e.scrollElement;if(!t)return;const n=e.targetWindow;if(!n)return;let o=0;const l=e.options.useScrollendEvent&&Xt?()=>{}:Ht(n,()=>{i(o,!1)},e.options.isScrollingResetDelay),a=p=>()=>{const{horizontal:b,isRtl:I}=e.options;o=b?t.scrollLeft*(I&&-1||1):t.scrollTop,l(),i(o,p)},s=a(!0),c=a(!1);return c(),t.addEventListener("scroll",s,De),t.addEventListener("scrollend",c,De),()=>{t.removeEventListener("scroll",s),t.removeEventListener("scrollend",c)}},Zt=(e,i,t)=>{if(i!=null&&i.borderBoxSize){const n=i.borderBoxSize[0];if(n)return Math.round(n[t.options.horizontal?"inlineSize":"blockSize"])}return Math.round(e.getBoundingClientRect()[t.options.horizontal?"width":"height"])},en=(e,{adjustments:i=0,behavior:t},n)=>{var o,l;const a=e+i;(l=(o=n.scrollElement)==null?void 0:o.scrollTo)==null||l.call(o,{[n.options.horizontal?"left":"top"]:a,behavior:t})};class tn{constructor(i){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let t=null;const n=()=>t||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:t=new this.targetWindow.ResizeObserver(o=>{o.forEach(l=>{this._measureElement(l.target,l)})}));return{disconnect:()=>{var o;(o=n())==null||o.disconnect(),t=null},observe:o=>{var l;return(l=n())==null?void 0:l.observe(o,{box:"border-box"})},unobserve:o=>{var l;return(l=n())==null?void 0:l.unobserve(o)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach(([n,o])=>{typeof o>"u"&&delete t[n]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Gt,rangeExtractor:Jt,onChange:()=>{},measureElement:Zt,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!0,...t}},this.notify=t=>{var n,o;(o=(n=this.options).onChange)==null||o.call(n,this,t)},this.maybeNotify=ie(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),t=>{this.notify(t)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var t;const n=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==n){if(this.cleanup(),!n){this.maybeNotify();return}this.scrollElement=n,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((t=this.scrollElement)==null?void 0:t.window)??null,this.elementsCache.forEach(o=>{this.observer.observe(o)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,o=>{this.scrollRect=o,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(o,l)=>{this.scrollAdjustments=0,this.scrollDirection=l?this.getScrollOffset()<o?"forward":"backward":null,this.scrollOffset=o,this.isScrolling=l,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(t,n)=>{const o=new Map,l=new Map;for(let a=n-1;a>=0;a--){const s=t[a];if(o.has(s.lane))continue;const c=l.get(s.lane);if(c==null||s.end>c.end?l.set(s.lane,s):s.end<c.end&&o.set(s.lane,!0),o.size===this.options.lanes)break}return l.size===this.options.lanes?Array.from(l.values()).sort((a,s)=>a.end===s.end?a.index-s.index:a.end-s.end)[0]:void 0},this.getMeasurementOptions=ie(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(t,n,o,l,a)=>(this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:n,scrollMargin:o,getItemKey:l,enabled:a}),{key:!1}),this.getMeasurements=ie(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:t,paddingStart:n,scrollMargin:o,getItemKey:l,enabled:a},s)=>{if(!a)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(b=>{this.itemSizeCache.set(b.key,b.size)}));const c=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const p=this.measurementsCache.slice(0,c);for(let b=c;b<t;b++){const I=l(b),M=this.options.lanes===1?p[b-1]:this.getFurthestMeasurement(p,b),f=M?M.end+this.options.gap:n+o,C=s.get(I),g=typeof C=="number"?C:this.options.estimateSize(b),d=f+g,S=M?M.lane:b%this.options.lanes;p[b]={index:b,start:f,size:g,end:d,key:I,lane:S}}return this.measurementsCache=p,p},{key:!1,debug:()=>this.options.debug}),this.calculateRange=ie(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset()],(t,n,o)=>this.range=t.length>0&&n>0?nn({measurements:t,outerSize:n,scrollOffset:o}):null,{key:!1,debug:()=>this.options.debug}),this.getIndexes=ie(()=>{let t=null,n=null;const o=this.calculateRange();return o&&(t=o.startIndex,n=o.endIndex),[this.options.rangeExtractor,this.options.overscan,this.options.count,t,n]},(t,n,o,l,a)=>l===null||a===null?[]:t({startIndex:l,endIndex:a,overscan:n,count:o}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=t=>{const n=this.options.indexAttribute,o=t.getAttribute(n);return o?parseInt(o,10):(console.warn(`Missing attribute name '${n}={index}' on measured element.`),-1)},this._measureElement=(t,n)=>{const o=this.indexFromElement(t),l=this.measurementsCache[o];if(!l)return;const a=l.key,s=this.elementsCache.get(a);s!==t&&(s&&this.observer.unobserve(s),this.observer.observe(t),this.elementsCache.set(a,t)),t.isConnected&&this.resizeItem(o,this.options.measureElement(t,n,this))},this.resizeItem=(t,n)=>{const o=this.measurementsCache[t];if(!o)return;const l=this.itemSizeCache.get(o.key)??o.size,a=n-l;a!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(o,a,this):o.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=a,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(o.index),this.itemSizeCache=new Map(this.itemSizeCache.set(o.key,n)),this.notify(!1))},this.measureElement=t=>{if(!t){this.elementsCache.forEach((n,o)=>{n.isConnected||(this.observer.unobserve(n),this.elementsCache.delete(o))});return}this._measureElement(t,void 0)},this.getVirtualItems=ie(()=>[this.getIndexes(),this.getMeasurements()],(t,n)=>{const o=[];for(let l=0,a=t.length;l<a;l++){const s=t[l],c=n[s];o.push(c)}return o},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const n=this.getMeasurements();if(n.length!==0)return xe(n[Xe(0,n.length-1,o=>xe(n[o]).start,t)])},this.getOffsetForAlignment=(t,n)=>{const o=this.getSize(),l=this.getScrollOffset();n==="auto"&&t>=l+o&&(n="end"),n==="end"&&(t-=o);const a=this.options.horizontal?"scrollWidth":"scrollHeight",c=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[a]:this.scrollElement[a]:0)-o;return Math.max(Math.min(c,t),0)},this.getOffsetForIndex=(t,n="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const o=this.measurementsCache[t];if(!o)return;const l=this.getSize(),a=this.getScrollOffset();if(n==="auto")if(o.end>=a+l-this.options.scrollPaddingEnd)n="end";else if(o.start<=a+this.options.scrollPaddingStart)n="start";else return[a,n];const s=o.start-this.options.scrollPaddingStart+(o.size-l)/2;switch(n){case"center":return[this.getOffsetForAlignment(s,n),n];case"end":return[this.getOffsetForAlignment(o.end+this.options.scrollPaddingEnd,n),n];default:return[this.getOffsetForAlignment(o.start-this.options.scrollPaddingStart,n),n]}},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(t,{align:n="start",behavior:o}={})=>{this.cancelScrollToIndex(),o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,n),{adjustments:void 0,behavior:o})},this.scrollToIndex=(t,{align:n="auto",behavior:o}={})=>{t=Math.max(0,Math.min(t,this.options.count-1)),this.cancelScrollToIndex(),o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const l=this.getOffsetForIndex(t,n);if(!l)return;const[a,s]=l;this._scrollToOffset(a,{adjustments:void 0,behavior:o}),o!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(t))){const[p]=xe(this.getOffsetForIndex(t,s));Wt(p,this.getScrollOffset())||this.scrollToIndex(t,{align:s,behavior:o})}else this.scrollToIndex(t,{align:s,behavior:o})}))},this.scrollBy=(t,{behavior:n}={})=>{this.cancelScrollToIndex(),n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+t,{adjustments:void 0,behavior:n})},this.getTotalSize=()=>{var t;const n=this.getMeasurements();let o;return n.length===0?o=this.options.paddingStart:o=this.options.lanes===1?((t=n[n.length-1])==null?void 0:t.end)??0:Math.max(...n.slice(-this.options.lanes).map(l=>l.end)),Math.max(o-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(t,{adjustments:n,behavior:o})=>{this.options.scrollToFn(t,{behavior:o,adjustments:n},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(i)}}const Xe=(e,i,t,n)=>{for(;e<=i;){const o=(e+i)/2|0,l=t(o);if(l<n)e=o+1;else if(l>n)i=o-1;else return o}return e>0?e-1:0};function nn({measurements:e,outerSize:i,scrollOffset:t}){const n=e.length-1,l=Xe(0,n,s=>e[s].start,t);let a=l;for(;a<n&&e[a].end<t+i;)a++;return{startIndex:l,endIndex:a}}const Fe=typeof document<"u"?h.useLayoutEffect:h.useEffect;function on(e){const i=h.useReducer(()=>({}),{})[1],t={...e,onChange:(o,l)=>{var a;l?te.flushSync(i):i(),(a=e.onChange)==null||a.call(e,o,l)}},[n]=h.useState(()=>new tn(t));return n.setOptions(t),Fe(()=>n._didMount(),[]),Fe(()=>n._willUpdate()),n}function rn(e){return on({observeElementRect:Qt,observeElementOffset:Yt,scrollToFn:en,...e})}function sn(e,i){return e!==null&&i!==null&&typeof e=="object"&&typeof i=="object"&&"id"in e&&"id"in i?e.id===i.id:e===i}function ln(e=sn){return h.useCallback((i,t)=>{if(typeof e=="string"){let n=e;return(i==null?void 0:i[n])===(t==null?void 0:t[n])}return e(i,t)},[e])}function Ye(e){let i=h.useRef({value:"",selectionStart:null,selectionEnd:null});return ut(e,"blur",t=>{let n=t.target;n instanceof HTMLInputElement&&(i.current={value:n.value,selectionStart:n.selectionStart,selectionEnd:n.selectionEnd})}),P(()=>{if(document.activeElement!==e&&e instanceof HTMLInputElement&&e.isConnected){if(e.focus({preventScroll:!0}),e.value!==i.current.value)e.setSelectionRange(e.value.length,e.value.length);else{let{selectionStart:t,selectionEnd:n}=i.current;t!==null&&n!==null&&e.setSelectionRange(t,n)}i.current={value:"",selectionStart:null,selectionEnd:null}}})}function an({children:e,freeze:i}){let t=Ee(i,e);return R.createElement(R.Fragment,null,t)}function Ee(e,i){let[t,n]=h.useState(i);return!e&&t!==i&&n(i),e?t:i}var Te=(e=>(e[e.Left=0]="Left",e[e.Right=2]="Right",e))(Te||{}),un=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(un||{}),cn=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(cn||{}),dn=(e=>(e[e.Pointer=0]="Pointer",e[e.Focus=1]="Focus",e[e.Other=2]="Other",e))(dn||{}),fn=(e=>(e[e.OpenCombobox=0]="OpenCombobox",e[e.CloseCombobox=1]="CloseCombobox",e[e.GoToOption=2]="GoToOption",e[e.SetTyping=3]="SetTyping",e[e.RegisterOption=4]="RegisterOption",e[e.UnregisterOption=5]="UnregisterOption",e[e.SetActivationTrigger=6]="SetActivationTrigger",e[e.UpdateVirtualConfiguration=7]="UpdateVirtualConfiguration",e[e.SetInputElement=8]="SetInputElement",e[e.SetButtonElement=9]="SetButtonElement",e[e.SetOptionsElement=10]="SetOptionsElement",e))(fn||{});function Se(e,i=t=>t){let t=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,n=i(e.options.slice()),o=n.length>0&&n[0].dataRef.current.order!==null?n.sort((a,s)=>a.dataRef.current.order-s.dataRef.current.order):_t(n,a=>a.dataRef.current.domRef.current),l=t?o.indexOf(t):null;return l===-1&&(l=null),{options:o,activeOptionIndex:l}}let pn={1(e){var i;return(i=e.dataRef.current)!=null&&i.disabled||e.comboboxState===1?e:{...e,activeOptionIndex:null,comboboxState:1,isTyping:!1,activationTrigger:2,__demoMode:!1}},0(e){var i,t;if((i=e.dataRef.current)!=null&&i.disabled||e.comboboxState===0)return e;if((t=e.dataRef.current)!=null&&t.value){let n=e.dataRef.current.calculateIndex(e.dataRef.current.value);if(n!==-1)return{...e,activeOptionIndex:n,comboboxState:0,__demoMode:!1}}return{...e,comboboxState:0,__demoMode:!1}},3(e,i){return e.isTyping===i.isTyping?e:{...e,isTyping:i.isTyping}},2(e,i){var t,n,o,l;if((t=e.dataRef.current)!=null&&t.disabled||e.optionsElement&&!((n=e.dataRef.current)!=null&&n.optionsPropsRef.current.static)&&e.comboboxState===1)return e;if(e.virtual){let{options:p,disabled:b}=e.virtual,I=i.focus===z.Specific?i.idx:Ae(i,{resolveItems:()=>p,resolveActiveIndex:()=>{var f,C;return(C=(f=e.activeOptionIndex)!=null?f:p.findIndex(g=>!b(g)))!=null?C:null},resolveDisabled:b,resolveId(){throw new Error("Function not implemented.")}}),M=(o=i.trigger)!=null?o:2;return e.activeOptionIndex===I&&e.activationTrigger===M?e:{...e,activeOptionIndex:I,activationTrigger:M,isTyping:!1,__demoMode:!1}}let a=Se(e);if(a.activeOptionIndex===null){let p=a.options.findIndex(b=>!b.dataRef.current.disabled);p!==-1&&(a.activeOptionIndex=p)}let s=i.focus===z.Specific?i.idx:Ae(i,{resolveItems:()=>a.options,resolveActiveIndex:()=>a.activeOptionIndex,resolveId:p=>p.id,resolveDisabled:p=>p.dataRef.current.disabled}),c=(l=i.trigger)!=null?l:2;return e.activeOptionIndex===s&&e.activationTrigger===c?e:{...e,...a,isTyping:!1,activeOptionIndex:s,activationTrigger:c,__demoMode:!1}},4:(e,i)=>{var t,n,o;if((t=e.dataRef.current)!=null&&t.virtual)return{...e,options:[...e.options,i.payload]};let l=i.payload,a=Se(e,c=>(c.push(l),c));e.activeOptionIndex===null&&(n=e.dataRef.current)!=null&&n.isSelected(i.payload.dataRef.current.value)&&(a.activeOptionIndex=a.options.indexOf(l));let s={...e,...a,activationTrigger:2};return(o=e.dataRef.current)!=null&&o.__demoMode&&e.dataRef.current.value===void 0&&(s.activeOptionIndex=0),s},5:(e,i)=>{var t;if((t=e.dataRef.current)!=null&&t.virtual)return{...e,options:e.options.filter(o=>o.id!==i.id)};let n=Se(e,o=>{let l=o.findIndex(a=>a.id===i.id);return l!==-1&&o.splice(l,1),o});return{...e,...n,activationTrigger:2}},6:(e,i)=>e.activationTrigger===i.trigger?e:{...e,activationTrigger:i.trigger},7:(e,i)=>{var t,n;if(e.virtual===null)return{...e,virtual:{options:i.options,disabled:(t=i.disabled)!=null?t:()=>!1}};if(e.virtual.options===i.options&&e.virtual.disabled===i.disabled)return e;let o=e.activeOptionIndex;if(e.activeOptionIndex!==null){let l=i.options.indexOf(e.virtual.options[e.activeOptionIndex]);l!==-1?o=l:o=null}return{...e,activeOptionIndex:o,virtual:{options:i.options,disabled:(n=i.disabled)!=null?n:()=>!1}}},8:(e,i)=>e.inputElement===i.element?e:{...e,inputElement:i.element},9:(e,i)=>e.buttonElement===i.element?e:{...e,buttonElement:i.element},10:(e,i)=>e.optionsElement===i.element?e:{...e,optionsElement:i.element}},Ce=h.createContext(null);Ce.displayName="ComboboxActionsContext";function fe(e){let i=h.useContext(Ce);if(i===null){let t=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,fe),t}return i}let Ze=h.createContext(null);function mn(e){let i=le("VirtualProvider"),{options:t}=i.virtual,[n,o]=h.useMemo(()=>{let p=i.optionsElement;if(!p)return[0,0];let b=window.getComputedStyle(p);return[parseFloat(b.paddingBlockStart||b.paddingTop),parseFloat(b.paddingBlockEnd||b.paddingBottom)]},[i.optionsElement]),l=rn({enabled:t.length!==0,scrollPaddingStart:n,scrollPaddingEnd:o,count:t.length,estimateSize(){return 40},getScrollElement(){return i.optionsElement},overscan:12}),[a,s]=h.useState(0);ne(()=>{s(p=>p+1)},[t]);let c=l.getVirtualItems();return c.length===0?null:R.createElement(Ze.Provider,{value:l},R.createElement("div",{style:{position:"relative",width:"100%",height:`${l.getTotalSize()}px`},ref:p=>{p&&i.activationTrigger!==0&&i.activeOptionIndex!==null&&t.length>i.activeOptionIndex&&l.scrollToIndex(i.activeOptionIndex)}},c.map(p=>{var b;return R.createElement(h.Fragment,{key:p.key},R.cloneElement((b=e.children)==null?void 0:b.call(e,{...e.slot,option:t[p.index]}),{key:`${a}-${p.key}`,"data-index":p.index,"aria-setsize":t.length,"aria-posinset":p.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${p.start}px)`,overflowAnchor:"none"}}))})))}let ue=h.createContext(null);ue.displayName="ComboboxDataContext";function le(e){let i=h.useContext(ue);if(i===null){let t=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,le),t}return i}function gn(e,i){return se(i.type,pn,e,i)}let hn=h.Fragment;function bn(e,i){var t,n;let o=dt(),{value:l,defaultValue:a,onChange:s,form:c,name:p,by:b,disabled:I=o||!1,onClose:M,__demoMode:f=!1,multiple:C=!1,immediate:g=!1,virtual:d=null,nullable:S,...r}=e,u=Nt(a),[v=C?[]:void 0,m]=Bt(l,s,u),[x,E]=h.useReducer(gn,{dataRef:h.createRef(),comboboxState:f?0:1,isTyping:!1,options:[],virtual:d?{options:d.options,disabled:(t=d.disabled)!=null?t:()=>!1}:null,activeOptionIndex:null,activationTrigger:2,inputElement:null,buttonElement:null,optionsElement:null,__demoMode:f}),A=h.useRef(!1),U=h.useRef({static:!1,hold:!1}),L=ln(b),N=P(T=>d?b===null?d.options.indexOf(T):d.options.findIndex($=>L($,T)):x.options.findIndex($=>L($.dataRef.current.value,T))),D=h.useCallback(T=>se(O.mode,{1:()=>v.some($=>L($,T)),0:()=>L(v,T)}),[v]),B=P(T=>x.activeOptionIndex===N(T)),O=h.useMemo(()=>({...x,immediate:g,optionsPropsRef:U,value:v,defaultValue:u,disabled:I,mode:C?1:0,virtual:d?x.virtual:null,get activeOptionIndex(){if(A.current&&x.activeOptionIndex===null&&(d?d.options.length>0:x.options.length>0)){if(d){let $=d.options.findIndex(X=>{var me,Me;return!((Me=(me=d.disabled)==null?void 0:me.call(d,X))!=null&&Me)});if($!==-1)return $}let T=x.options.findIndex($=>!$.dataRef.current.disabled);if(T!==-1)return T}return x.activeOptionIndex},calculateIndex:N,compare:L,isSelected:D,isActive:B}),[v,u,I,C,f,x,d]);ne(()=>{var T;d&&E({type:7,options:d.options,disabled:(T=d.disabled)!=null?T:null})},[d,d==null?void 0:d.options,d==null?void 0:d.disabled]),ne(()=>{x.dataRef.current=O},[O]);let k=O.comboboxState===0;ft(k,[O.buttonElement,O.inputElement,O.optionsElement],()=>_.closeCombobox());let q=h.useMemo(()=>{var T,$,X;return{open:O.comboboxState===0,disabled:I,activeIndex:O.activeOptionIndex,activeOption:O.activeOptionIndex===null?null:O.virtual?O.virtual.options[(T=O.activeOptionIndex)!=null?T:0]:(X=($=O.options[O.activeOptionIndex])==null?void 0:$.dataRef.current.value)!=null?X:null,value:v}},[O,I,v]),G=P(()=>{if(O.activeOptionIndex!==null){if(_.setIsTyping(!1),O.virtual)y(O.virtual.options[O.activeOptionIndex]);else{let{dataRef:T}=O.options[O.activeOptionIndex];y(T.current.value)}_.goToOption(z.Specific,O.activeOptionIndex)}}),J=P(()=>{E({type:0}),A.current=!0}),Z=P(()=>{E({type:1}),A.current=!1,M==null||M()}),oe=P(T=>{E({type:3,isTyping:T})}),ee=P((T,$,X)=>(A.current=!1,T===z.Specific?E({type:2,focus:z.Specific,idx:$,trigger:X}):E({type:2,focus:T,trigger:X}))),F=P((T,$)=>(E({type:4,payload:{id:T,dataRef:$}}),()=>{O.isActive($.current.value)&&(A.current=!0),E({type:5,id:T})})),y=P(T=>se(O.mode,{0(){return m==null?void 0:m(T)},1(){let $=O.value.slice(),X=$.findIndex(me=>L(me,T));return X===-1?$.push(T):$.splice(X,1),m==null?void 0:m($)}})),W=P(T=>{E({type:6,trigger:T})}),j=P(T=>{E({type:8,element:T})}),K=P(T=>{E({type:9,element:T})}),w=P(T=>{E({type:10,element:T})}),_=h.useMemo(()=>({onChange:y,registerOption:F,goToOption:ee,setIsTyping:oe,closeCombobox:Z,openCombobox:J,setActivationTrigger:W,selectActiveOption:G,setInputElement:j,setButtonElement:K,setOptionsElement:w}),[]),[H,pe]=pt(),ot=i===null?{}:{ref:i},it=h.useCallback(()=>{if(u!==void 0)return m==null?void 0:m(u)},[m,u]),rt=de();return R.createElement(pe,{value:H,props:{htmlFor:(n=O.inputElement)==null?void 0:n.id},slot:{open:O.comboboxState===0,disabled:I}},R.createElement(mt,null,R.createElement(Ce.Provider,{value:_},R.createElement(ue.Provider,{value:O},R.createElement($t,{value:se(O.comboboxState,{0:be.Open,1:be.Closed})},p!=null&&R.createElement(Kt,{disabled:I,data:v!=null?{[p]:v}:{},form:c,onReset:it}),rt({ourProps:ot,theirProps:r,slot:q,defaultTag:hn,name:"Combobox"}))))))}let vn="input";function xn(e,i){var t,n,o,l,a;let s=le("Combobox.Input"),c=fe("Combobox.Input"),p=h.useId(),b=gt(),{id:I=b||`headlessui-combobox-input-${p}`,onChange:M,displayValue:f,disabled:C=s.disabled||!1,autoFocus:g=!1,type:d="text",...S}=e,r=h.useRef(null),u=ve(r,i,ht(),c.setInputElement),v=Ke(s.inputElement),m=He(),x=P(()=>{c.onChange(null),s.optionsElement&&(s.optionsElement.scrollTop=0),c.goToOption(z.Nothing)}),E=h.useMemo(()=>{var y;return typeof f=="function"&&s.value!==void 0?(y=f(s.value))!=null?y:"":typeof s.value=="string"?s.value:""},[s.value,f]);Pe(([y,W],[j,K])=>{if(s.isTyping)return;let w=r.current;w&&((K===0&&W===1||y!==j)&&(w.value=y),requestAnimationFrame(()=>{if(s.isTyping||!w||(v==null?void 0:v.activeElement)!==w)return;let{selectionStart:_,selectionEnd:H}=w;Math.abs((H??0)-(_??0))===0&&_===0&&w.setSelectionRange(w.value.length,w.value.length)}))},[E,s.comboboxState,v,s.isTyping]),Pe(([y],[W])=>{if(y===0&&W===1){if(s.isTyping)return;let j=r.current;if(!j)return;let K=j.value,{selectionStart:w,selectionEnd:_,selectionDirection:H}=j;j.value="",j.value=K,H!==null?j.setSelectionRange(w,_,H):j.setSelectionRange(w,_)}},[s.comboboxState]);let A=h.useRef(!1),U=P(()=>{A.current=!0}),L=P(()=>{m.nextFrame(()=>{A.current=!1})}),N=P(y=>{switch(c.setIsTyping(!0),y.key){case V.Enter:if(s.comboboxState!==0||A.current)return;if(y.preventDefault(),y.stopPropagation(),s.activeOptionIndex===null){c.closeCombobox();return}c.selectActiveOption(),s.mode===0&&c.closeCombobox();break;case V.ArrowDown:return y.preventDefault(),y.stopPropagation(),se(s.comboboxState,{0:()=>c.goToOption(z.Next),1:()=>c.openCombobox()});case V.ArrowUp:return y.preventDefault(),y.stopPropagation(),se(s.comboboxState,{0:()=>c.goToOption(z.Previous),1:()=>{te.flushSync(()=>c.openCombobox()),s.value||c.goToOption(z.Last)}});case V.Home:if(y.shiftKey)break;return y.preventDefault(),y.stopPropagation(),c.goToOption(z.First);case V.PageUp:return y.preventDefault(),y.stopPropagation(),c.goToOption(z.First);case V.End:if(y.shiftKey)break;return y.preventDefault(),y.stopPropagation(),c.goToOption(z.Last);case V.PageDown:return y.preventDefault(),y.stopPropagation(),c.goToOption(z.Last);case V.Escape:return s.comboboxState!==0?void 0:(y.preventDefault(),s.optionsElement&&!s.optionsPropsRef.current.static&&y.stopPropagation(),s.mode===0&&s.value===null&&x(),c.closeCombobox());case V.Tab:if(s.comboboxState!==0)return;s.mode===0&&s.activationTrigger!==1&&c.selectActiveOption(),c.closeCombobox();break}}),D=P(y=>{M==null||M(y),s.mode===0&&y.target.value===""&&x(),c.openCombobox()}),B=P(y=>{var W,j,K;let w=(W=y.relatedTarget)!=null?W:_e.find(_=>_!==y.currentTarget);if(!((j=s.optionsElement)!=null&&j.contains(w))&&!((K=s.buttonElement)!=null&&K.contains(w))&&s.comboboxState===0)return y.preventDefault(),s.mode===0&&s.value===null&&x(),c.closeCombobox()}),O=P(y=>{var W,j,K;let w=(W=y.relatedTarget)!=null?W:_e.find(_=>_!==y.currentTarget);(j=s.buttonElement)!=null&&j.contains(w)||(K=s.optionsElement)!=null&&K.contains(w)||s.disabled||s.immediate&&s.comboboxState!==0&&m.microTask(()=>{te.flushSync(()=>c.openCombobox()),c.setActivationTrigger(1)})}),k=Oe(),q=bt(),{isFocused:G,focusProps:J}=Ve({autoFocus:g}),{isHovered:Z,hoverProps:oe}=We({isDisabled:C}),ee=h.useMemo(()=>({open:s.comboboxState===0,disabled:C,hover:Z,focus:G,autofocus:g}),[s,Z,G,g,C]),F=we({ref:u,id:I,role:"combobox",type:d,"aria-controls":(t=s.optionsElement)==null?void 0:t.id,"aria-expanded":s.comboboxState===0,"aria-activedescendant":s.activeOptionIndex===null?void 0:s.virtual?(n=s.options.find(y=>!y.dataRef.current.disabled&&s.compare(y.dataRef.current.value,s.virtual.options[s.activeOptionIndex])))==null?void 0:n.id:(o=s.options[s.activeOptionIndex])==null?void 0:o.id,"aria-labelledby":k,"aria-describedby":q,"aria-autocomplete":"list",defaultValue:(a=(l=e.defaultValue)!=null?l:s.defaultValue!==void 0?f==null?void 0:f(s.defaultValue):null)!=null?a:s.defaultValue,disabled:C||void 0,autoFocus:g,onCompositionStart:U,onCompositionEnd:L,onKeyDown:N,onChange:D,onFocus:O,onBlur:B},J,oe);return de()({ourProps:F,theirProps:S,slot:ee,defaultTag:vn,name:"Combobox.Input"})}let Sn="button";function yn(e,i){var t;let n=le("Combobox.Button"),o=fe("Combobox.Button"),l=ve(i,o.setButtonElement),a=h.useId(),{id:s=`headlessui-combobox-button-${a}`,disabled:c=n.disabled||!1,autoFocus:p=!1,...b}=e,I=Ye(n.inputElement),M=P(E=>{switch(E.key){case V.Space:case V.Enter:E.preventDefault(),E.stopPropagation(),n.comboboxState===1&&te.flushSync(()=>o.openCombobox()),I();return;case V.ArrowDown:E.preventDefault(),E.stopPropagation(),n.comboboxState===1&&(te.flushSync(()=>o.openCombobox()),n.value||o.goToOption(z.First)),I();return;case V.ArrowUp:E.preventDefault(),E.stopPropagation(),n.comboboxState===1&&(te.flushSync(()=>o.openCombobox()),n.value||o.goToOption(z.Last)),I();return;case V.Escape:if(n.comboboxState!==0)return;E.preventDefault(),n.optionsElement&&!n.optionsPropsRef.current.static&&E.stopPropagation(),te.flushSync(()=>o.closeCombobox()),I();return;default:return}}),f=P(E=>{E.preventDefault(),!Pt(E.currentTarget)&&(E.button===Te.Left&&(n.comboboxState===0?o.closeCombobox():o.openCombobox()),I())}),C=Oe([s]),{isFocusVisible:g,focusProps:d}=Ve({autoFocus:p}),{isHovered:S,hoverProps:r}=We({isDisabled:c}),{pressed:u,pressProps:v}=vt({disabled:c}),m=h.useMemo(()=>({open:n.comboboxState===0,active:u||n.comboboxState===0,disabled:c,value:n.value,hover:S,focus:g}),[n,S,g,u,c]),x=we({ref:l,id:s,type:xt(e,n.buttonElement),tabIndex:-1,"aria-haspopup":"listbox","aria-controls":(t=n.optionsElement)==null?void 0:t.id,"aria-expanded":n.comboboxState===0,"aria-labelledby":C,disabled:c||void 0,autoFocus:p,onMouseDown:f,onKeyDown:M},d,r,v);return de()({ourProps:x,theirProps:b,slot:m,defaultTag:Sn,name:"Combobox.Button"})}let En="div",In=ke.RenderStrategy|ke.Static;function On(e,i){var t,n,o;let l=h.useId(),{id:a=`headlessui-combobox-options-${l}`,hold:s=!1,anchor:c,portal:p=!1,modal:b=!0,transition:I=!1,...M}=e,f=le("Combobox.Options"),C=fe("Combobox.Options"),g=St(c);g&&(p=!0);let[d,S]=yt(g),[r,u]=h.useState(null),v=Et(),m=ve(i,g?d:null,C.setOptionsElement,u),x=Ke(f.optionsElement),E=Dt(),[A,U]=Ft(I,r,E!==null?(E&be.Open)===be.Open:f.comboboxState===0);It(A,f.inputElement,C.closeCombobox);let L=f.__demoMode?!1:b&&f.comboboxState===0;Ot(L,x);let N=f.__demoMode?!1:b&&f.comboboxState===0;wt(N,{allowed:h.useCallback(()=>[f.inputElement,f.buttonElement,f.optionsElement],[f.inputElement,f.buttonElement,f.optionsElement])}),ne(()=>{var F;f.optionsPropsRef.current.static=(F=e.static)!=null?F:!1},[f.optionsPropsRef,e.static]),ne(()=>{f.optionsPropsRef.current.hold=s},[f.optionsPropsRef,s]),Tt(f.comboboxState===0,{container:f.optionsElement,accept(F){return F.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:F.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(F){F.setAttribute("role","none")}});let D=Oe([(t=f.buttonElement)==null?void 0:t.id]),B=h.useMemo(()=>({open:f.comboboxState===0,option:void 0}),[f.comboboxState]),O=P(()=>{C.setActivationTrigger(0)}),k=P(F=>{F.preventDefault(),C.setActivationTrigger(0)}),q=we(g?v():{},{"aria-labelledby":D,role:"listbox","aria-multiselectable":f.mode===1?!0:void 0,id:a,ref:m,style:{...M.style,...S,"--input-width":Re(f.inputElement,!0).width,"--button-width":Re(f.buttonElement,!0).width},onWheel:f.activationTrigger===0?void 0:O,onMouseDown:k,...jt(U)}),G=A&&f.comboboxState===1,J=Ee(G,(n=f.virtual)==null?void 0:n.options),Z=Ee(G,f.value),oe=P(F=>f.compare(Z,F));if(f.virtual){if(J===void 0)throw new Error("Missing `options` in virtual mode");Object.assign(M,{children:R.createElement(ue.Provider,{value:J!==f.virtual.options?{...f,virtual:{...f.virtual,options:J}}:f},R.createElement(mn,{slot:B},M.children))})}let ee=de();return R.createElement(Ct,{enabled:p?e.static||A:!1},R.createElement(ue.Provider,{value:f.mode===1?f:{...f,isSelected:oe}},ee({ourProps:q,theirProps:{...M,children:R.createElement(an,{freeze:G},typeof M.children=="function"?(o=M.children)==null?void 0:o.call(M,B):M.children)},slot:B,defaultTag:En,features:In,visible:A,name:"Combobox.Options"})))}let wn="div";function Tn(e,i){var t,n,o,l;let a=le("Combobox.Option"),s=fe("Combobox.Option"),c=h.useId(),{id:p=`headlessui-combobox-option-${c}`,value:b,disabled:I=(o=(n=(t=a.virtual)==null?void 0:t.disabled)==null?void 0:n.call(t,b))!=null?o:!1,order:M=null,...f}=e,C=Ye(a.inputElement),g=a.virtual?a.activeOptionIndex===a.calculateIndex(b):a.activeOptionIndex===null?!1:((l=a.options[a.activeOptionIndex])==null?void 0:l.id)===p,d=a.isSelected(b),S=h.useRef(null),r=zt({disabled:I,value:b,domRef:S,order:M}),u=h.useContext(Ze),v=ve(i,S,u?u.measureElement:null),m=P(()=>{s.setIsTyping(!1),s.onChange(b)});ne(()=>s.registerOption(p,r),[r,p]);let x=h.useRef(!(a.virtual||a.__demoMode));ne(()=>{if(!a.virtual&&!a.__demoMode)return $e().requestAnimationFrame(()=>{x.current=!0})},[a.virtual,a.__demoMode]),ne(()=>{if(x.current&&a.comboboxState===0&&g&&a.activationTrigger!==0)return $e().requestAnimationFrame(()=>{var k,q;(q=(k=S.current)==null?void 0:k.scrollIntoView)==null||q.call(k,{block:"nearest"})})},[S,g,a.comboboxState,a.activationTrigger,a.activeOptionIndex]);let E=P(k=>{k.preventDefault(),k.button===Te.Left&&(I||(m(),Rt()||requestAnimationFrame(()=>C()),a.mode===0&&s.closeCombobox()))}),A=P(()=>{if(I)return s.goToOption(z.Nothing);let k=a.calculateIndex(b);s.goToOption(z.Specific,k)}),U=Mt(),L=P(k=>U.update(k)),N=P(k=>{if(!U.wasMoved(k)||I||g)return;let q=a.calculateIndex(b);s.goToOption(z.Specific,q,0)}),D=P(k=>{U.wasMoved(k)&&(I||g&&(a.optionsPropsRef.current.hold||s.goToOption(z.Nothing)))}),B=h.useMemo(()=>({active:g,focus:g,selected:d,disabled:I}),[g,d,I]),O={id:p,ref:v,role:"option",tabIndex:I===!0?void 0:-1,"aria-disabled":I===!0?!0:void 0,"aria-selected":d,disabled:void 0,onMouseDown:E,onFocus:A,onPointerEnter:L,onMouseEnter:L,onPointerMove:N,onMouseMove:N,onPointerLeave:D,onMouseLeave:D};return de()({ourProps:O,theirProps:f,slot:B,defaultTag:wn,name:"Combobox.Option"})}let Cn=ce(bn),Mn=ce(yn),et=ce(xn),Pn=ct,tt=ce(On),nt=ce(Tn),Rn=Object.assign(Cn,{Input:et,Button:Mn,Label:Pn,Options:tt,Option:nt});var Y={},he={},ye,je;function _n(){if(je)return ye;je=1;var e="Expected a function",i=NaN,t="[object Symbol]",n=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt,c=typeof ge=="object"&&ge&&ge.Object===Object&&ge,p=typeof self=="object"&&self&&self.Object===Object&&self,b=c||p||Function("return this")(),I=Object.prototype,M=I.toString,f=Math.max,C=Math.min,g=function(){return b.Date.now()};function d(m,x,E){var A,U,L,N,D,B,O=0,k=!1,q=!1,G=!0;if(typeof m!="function")throw new TypeError(e);x=v(x)||0,S(E)&&(k=!!E.leading,q="maxWait"in E,L=q?f(v(E.maxWait)||0,x):L,G="trailing"in E?!!E.trailing:G);function J(w){var _=A,H=U;return A=U=void 0,O=w,N=m.apply(H,_),N}function Z(w){return O=w,D=setTimeout(F,x),k?J(w):N}function oe(w){var _=w-B,H=w-O,pe=x-_;return q?C(pe,L-H):pe}function ee(w){var _=w-B,H=w-O;return B===void 0||_>=x||_<0||q&&H>=L}function F(){var w=g();if(ee(w))return y(w);D=setTimeout(F,oe(w))}function y(w){return D=void 0,G&&A?J(w):(A=U=void 0,N)}function W(){D!==void 0&&clearTimeout(D),O=0,A=B=U=D=void 0}function j(){return D===void 0?N:y(g())}function K(){var w=g(),_=ee(w);if(A=arguments,U=this,B=w,_){if(D===void 0)return Z(B);if(q)return D=setTimeout(F,x),J(B)}return D===void 0&&(D=setTimeout(F,x)),N}return K.cancel=W,K.flush=j,K}function S(m){var x=typeof m;return!!m&&(x=="object"||x=="function")}function r(m){return!!m&&typeof m=="object"}function u(m){return typeof m=="symbol"||r(m)&&M.call(m)==t}function v(m){if(typeof m=="number")return m;if(u(m))return i;if(S(m)){var x=typeof m.valueOf=="function"?m.valueOf():m;m=S(x)?x+"":x}if(typeof m!="string")return m===0?m:+m;m=m.replace(n,"");var E=l.test(m);return E||a.test(m)?s(m.slice(2),E?2:8):o.test(m)?i:+m}return ye=d,ye}var ae={},ze;function An(){return ze||(ze=1,Object.defineProperty(ae,"__esModule",{value:!0}),ae.compose=function(){for(var i=arguments.length,t=Array(i),n=0;n<i;n++)t[n]=arguments[n];return function(){for(var o=arguments.length,l=Array(o),a=0;a<o;a++)l[a]=arguments[a];t.forEach(function(s){return s&&s.apply(void 0,l)})}},ae.pick=function(i){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return n.reduce(function(l,a){return i&&i.hasOwnProperty(a)&&(l[a]=i[a]),l},{})}),ae}var Le;function kn(){if(Le)return he;Le=1,Object.defineProperty(he,"__esModule",{value:!0});var e=Object.assign||function(g){for(var d=1;d<arguments.length;d++){var S=arguments[d];for(var r in S)Object.prototype.hasOwnProperty.call(S,r)&&(g[r]=S[r])}return g},i=function(){function g(d,S){for(var r=0;r<S.length;r++){var u=S[r];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(d,u.key,u)}}return function(d,S,r){return S&&g(d.prototype,S),r&&g(d,r),d}}(),t=lt(),n=p(t),o=at(),l=p(o),a=_n(),s=p(a),c=An();function p(g){return g&&g.__esModule?g:{default:g}}function b(g,d){if(!(g instanceof d))throw new TypeError("Cannot call a class as a function")}function I(g,d){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:g}function M(g,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);g.prototype=Object.create(d&&d.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(g,d):g.__proto__=d)}var f=function(d){return{mainText:d.main_text,secondaryText:d.secondary_text}},C=function(g){M(d,g);function d(S){b(this,d);var r=I(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,S));return r.init=function(){if(!window.google)throw new Error("[react-places-autocomplete]: Google Maps JavaScript API library must be loaded. See: https://github.com/kenny-hibino/react-places-autocomplete#load-google-library");if(!window.google.maps.places)throw new Error("[react-places-autocomplete]: Google Maps Places library must be loaded. Please add `libraries=places` to the src URL. See: https://github.com/kenny-hibino/react-places-autocomplete#load-google-library");r.autocompleteService=new window.google.maps.places.AutocompleteService,r.autocompleteOK=window.google.maps.places.PlacesServiceStatus.OK,r.setState(function(u){return u.ready?null:{ready:!0}})},r.autocompleteCallback=function(u,v){if(r.setState({loading:!1}),v!==r.autocompleteOK){r.props.onError(v,r.clearSuggestions);return}var m=r.props.highlightFirstSuggestion;r.setState({suggestions:u.map(function(x,E){return{id:x.id,description:x.description,placeId:x.place_id,active:!!(m&&E===0),index:E,formattedSuggestion:f(x.structured_formatting),matchedSubstrings:x.matched_substrings,terms:x.terms,types:x.types}})})},r.fetchPredictions=function(){var u=r.props.value;u.length&&(r.setState({loading:!0}),r.autocompleteService.getPlacePredictions(e({},r.props.searchOptions,{input:u}),r.autocompleteCallback))},r.clearSuggestions=function(){r.setState({suggestions:[]})},r.clearActive=function(){r.setState({suggestions:r.state.suggestions.map(function(u){return e({},u,{active:!1})})})},r.handleSelect=function(u,v,m){r.clearSuggestions(),r.props.onSelect?r.props.onSelect(u,v,m):r.props.onChange(u)},r.getActiveSuggestion=function(){return r.state.suggestions.find(function(u){return u.active})},r.selectActiveAtIndex=function(u){var v=r.state.suggestions.find(function(m){return m.index===u}).description;r.setActiveAtIndex(u),r.props.onChange(v)},r.selectUserInputValue=function(){r.clearActive(),r.props.onChange(r.state.userInputValue)},r.handleEnterKey=function(){var u=r.getActiveSuggestion();u===void 0?r.handleSelect(r.props.value,null,null):r.handleSelect(u.description,u.placeId,u)},r.handleDownKey=function(){if(r.state.suggestions.length!==0){var u=r.getActiveSuggestion();u===void 0?r.selectActiveAtIndex(0):u.index===r.state.suggestions.length-1?r.selectUserInputValue():r.selectActiveAtIndex(u.index+1)}},r.handleUpKey=function(){if(r.state.suggestions.length!==0){var u=r.getActiveSuggestion();u===void 0?r.selectActiveAtIndex(r.state.suggestions.length-1):u.index===0?r.selectUserInputValue():r.selectActiveAtIndex(u.index-1)}},r.handleInputKeyDown=function(u){switch(u.key){case"Enter":u.preventDefault(),r.handleEnterKey();break;case"ArrowDown":u.preventDefault(),r.handleDownKey();break;case"ArrowUp":u.preventDefault(),r.handleUpKey();break;case"Escape":r.clearSuggestions();break}},r.setActiveAtIndex=function(u){r.setState({suggestions:r.state.suggestions.map(function(v,m){return m===u?e({},v,{active:!0}):e({},v,{active:!1})})})},r.handleInputChange=function(u){var v=u.target.value;if(r.props.onChange(v),r.setState({userInputValue:v}),!v){r.clearSuggestions();return}r.props.shouldFetchSuggestions&&r.debouncedFetchPredictions()},r.handleInputOnBlur=function(){r.mousedownOnSuggestion||r.clearSuggestions()},r.getActiveSuggestionId=function(){var u=r.getActiveSuggestion();return u?"PlacesAutocomplete__suggestion-"+u.placeId:void 0},r.getIsExpanded=function(){return r.state.suggestions.length>0},r.getInputProps=function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(u.hasOwnProperty("value"))throw new Error("[react-places-autocomplete]: getInputProps does not accept `value`. Use `value` prop instead");if(u.hasOwnProperty("onChange"))throw new Error("[react-places-autocomplete]: getInputProps does not accept `onChange`. Use `onChange` prop instead");var v={type:"text",autoComplete:"off",role:"combobox","aria-autocomplete":"list","aria-expanded":r.getIsExpanded(),"aria-activedescendant":r.getActiveSuggestionId(),disabled:!r.state.ready};return e({},v,u,{onKeyDown:(0,c.compose)(r.handleInputKeyDown,u.onKeyDown),onBlur:(0,c.compose)(r.handleInputOnBlur,u.onBlur),value:r.props.value,onChange:function(x){r.handleInputChange(x)}})},r.getSuggestionItemProps=function(u){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},m=r.handleSuggestionMouseEnter.bind(r,u.index),x=r.handleSuggestionClick.bind(r,u);return e({},v,{key:u.id,id:r.getActiveSuggestionId(),role:"option",onMouseEnter:(0,c.compose)(m,v.onMouseEnter),onMouseLeave:(0,c.compose)(r.handleSuggestionMouseLeave,v.onMouseLeave),onMouseDown:(0,c.compose)(r.handleSuggestionMouseDown,v.onMouseDown),onMouseUp:(0,c.compose)(r.handleSuggestionMouseUp,v.onMouseUp),onTouchStart:(0,c.compose)(r.handleSuggestionTouchStart,v.onTouchStart),onTouchEnd:(0,c.compose)(r.handleSuggestionMouseUp,v.onTouchEnd),onClick:(0,c.compose)(x,v.onClick)})},r.handleSuggestionMouseEnter=function(u){r.setActiveAtIndex(u)},r.handleSuggestionMouseLeave=function(){r.mousedownOnSuggestion=!1,r.clearActive()},r.handleSuggestionMouseDown=function(u){u.preventDefault(),r.mousedownOnSuggestion=!0},r.handleSuggestionTouchStart=function(){r.mousedownOnSuggestion=!0},r.handleSuggestionMouseUp=function(){r.mousedownOnSuggestion=!1},r.handleSuggestionClick=function(u,v){v&&v.preventDefault&&v.preventDefault();var m=u.description,x=u.placeId;r.handleSelect(m,x,u),setTimeout(function(){r.mousedownOnSuggestion=!1})},r.state={loading:!1,suggestions:[],userInputValue:S.value,ready:!S.googleCallbackName},r.debouncedFetchPredictions=(0,s.default)(r.fetchPredictions,S.debounce),r}return i(d,[{key:"componentDidMount",value:function(){var r=this.props.googleCallbackName;if(r){var u=window.google&&window.google.maps&&window.google.maps.places;u?this.init():window[r]=this.init}else this.init()}},{key:"componentWillUnmount",value:function(){var r=this.props.googleCallbackName;r&&window[r]&&delete window[r]}},{key:"render",value:function(){return this.props.children({getInputProps:this.getInputProps,getSuggestionItemProps:this.getSuggestionItemProps,loading:this.state.loading,suggestions:this.state.suggestions})}}]),d}(n.default.Component);return C.propTypes={onChange:l.default.func.isRequired,value:l.default.string.isRequired,children:l.default.func.isRequired,onError:l.default.func,onSelect:l.default.func,searchOptions:l.default.shape({bounds:l.default.object,componentRestrictions:l.default.object,location:l.default.object,offset:l.default.oneOfType([l.default.number,l.default.string]),radius:l.default.oneOfType([l.default.number,l.default.string]),types:l.default.array}),debounce:l.default.number,highlightFirstSuggestion:l.default.bool,shouldFetchSuggestions:l.default.bool,googleCallbackName:l.default.string},C.defaultProps={onError:function(d,S){return console.error(`[react-places-autocomplete]: error happened when fetching data from Google Maps API.
Please check the docs here (https://developers.google.com/maps/documentation/javascript/places#place_details_responses)
Status: `,d)},searchOptions:{},debounce:200,highlightFirstSuggestion:!1,shouldFetchSuggestions:!0},he.default=C,he}var re={},Be;function $n(){return Be||(Be=1,Object.defineProperty(re,"__esModule",{value:!0}),re.geocodeByAddress=function(i){var t=new window.google.maps.Geocoder,n=window.google.maps.GeocoderStatus.OK;return new Promise(function(o,l){t.geocode({address:i},function(a,s){s!==n&&l(s),o(a)})})},re.getLatLng=function(i){return new Promise(function(t,n){try{var o={lat:i.geometry.location.lat(),lng:i.geometry.location.lng()};t(o)}catch(l){n(l)}})},re.geocodeByPlaceId=function(i){var t=new window.google.maps.Geocoder,n=window.google.maps.GeocoderStatus.OK;return new Promise(function(o,l){t.geocode({placeId:i},function(a,s){s!==n&&l(s),o(a)})})}),re}var Ne;function Dn(){if(Ne)return Y;Ne=1,Object.defineProperty(Y,"__esModule",{value:!0}),Y.getLatLng=Y.geocodeByPlaceId=Y.geocodeByAddress=void 0;var e=kn(),i=n(e),t=$n();function n(o){return o&&o.__esModule?o:{default:o}}return Y.geocodeByAddress=t.geocodeByAddress,Y.geocodeByPlaceId=t.geocodeByPlaceId,Y.getLatLng=t.getLatLng,Y.default=i.default,Y}var Ie=Dn();const Fn=st(Ie),jn=({posCallback:e,centerCallback:i,singleMarker:t,singleMarkerCallback:n,eventAddress:o,eventLatitude:l,eventLongitude:a})=>{const[s,c]=h.useState(o||""),[p,b]=h.useState({lat:45.3850225,lng:-75.6946679}),[I,M]=h.useState([]),[f,C]=h.useState({lat:l||45.3850225,lng:a||-75.6946679}),g=async d=>{const S=await Ie.geocodeByAddress(d),r=await Ie.getLatLng(S[0]),u=S[0].place_id;c(d),b({lat:r.lat,lng:r.lng}),M([...I,{name:d,id:u,position:r}]),C(r)};return h.useEffect(()=>{e&&e(I)},[I,e]),h.useEffect(()=>{i&&i(p)},[p,i]),h.useEffect(()=>{t&&n&&n({coordinates:f,address:s})},[f,s,n,t]),Q.jsx("div",{className:"cu-locationpicker not-prose",children:Q.jsx(Fn,{value:s,onChange:c,onSelect:g,children:({getInputProps:d,suggestions:S,getSuggestionItemProps:r})=>Q.jsxs(Rn,{value:s,onChange:g,children:[Q.jsxs("div",{className:"relative",children:[Q.jsx(Lt,{className:"pointer-events-none absolute left-3.5 top-3.5 h-5 w-5 text-cu-black-400","aria-hidden":"true"}),Q.jsx(et,{className:"w-full h-12 pl-10 pr-4 bg-white border rounded-lg border-cu-black-200 text-cu-black-800 placeholder-cu-black-400 focus:border-cu-black-400 focus:outline-none focus:ring-0 sm:text-sm",...d({placeholder:"Type address"})}),s&&Q.jsx(At,{className:"absolute right-3.5 top-3.5 h-5 w-5 text-cu-black-400","aria-hidden":"true",onClick:()=>{c("")}})]}),Q.jsx(tt,{className:"mt-3 max-h-80 divide-y divide-cu-black-100 overflow-y-auto bg-white px-1.5 text-sm text-cu-black-800",children:S.map(u=>Q.jsx(nt,{value:u,children:({active:v})=>Q.jsx("ul",{children:Q.jsx("li",{...r(u),className:`p-4 text-cu-black-600 hover:cursor-pointer ${v?"bg-cu-black-50 text-cu-black-900":"bg-white"}`,children:u.description})})},u.index))})]})})})};jn.__docgenInfo={description:"",methods:[],displayName:"LocationPicker",props:{posCallback:{required:!1,tsType:{name:"signature",type:"function",raw:"(pos: { name: string; id: string; position: object }[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ name: string; id: string; position: object }",signature:{properties:[{key:"name",value:{name:"string",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"position",value:{name:"object",required:!0}}]}}],raw:"{ name: string; id: string; position: object }[]"},name:"pos"}],return:{name:"void"}}},description:""},centerCallback:{required:!1,tsType:{name:"signature",type:"function",raw:"(center: { lat: number; lng: number }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ lat: number; lng: number }",signature:{properties:[{key:"lat",value:{name:"number",required:!0}},{key:"lng",value:{name:"number",required:!0}}]}},name:"center"}],return:{name:"void"}}},description:""},singleMarker:{required:!1,tsType:{name:"boolean"},description:""},singleMarkerCallback:{required:!1,tsType:{name:"signature",type:"function",raw:"(marker: { coordinates: { lat: number; lng: number }; address: string }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ coordinates: { lat: number; lng: number }; address: string }",signature:{properties:[{key:"coordinates",value:{name:"signature",type:"object",raw:"{ lat: number; lng: number }",signature:{properties:[{key:"lat",value:{name:"number",required:!0}},{key:"lng",value:{name:"number",required:!0}}]},required:!0}},{key:"address",value:{name:"string",required:!0}}]}},name:"marker"}],return:{name:"void"}}},description:""},eventLatitude:{required:!1,tsType:{name:"number"},description:""},eventLongitude:{required:!1,tsType:{name:"number"},description:""},eventAddress:{required:!1,tsType:{name:"string"},description:""}}};export{jn as L};
