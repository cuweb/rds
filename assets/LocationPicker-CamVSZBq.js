import{j as V}from"./jsx-runtime-Nms4Y4qS.js";import{r as d,R as C}from"./index-BwDkhjyp.js";import{p as ut}from"./index-Dk74W0Oi.js";import{c as ge}from"./_commonjsHelpers-BosuxZz1.js";import{T as Ve,s as qe,E as ct,W as dt,X as pt,R as ft,D as mt,M as gt,Y as ht,p as vt,n as Ke,m as $e,Z as we,a0 as bt,$ as We,g as He,h as xt,i as St,q as yt,v as Et,z as It,d as Ot,f as wt,y as Tt,A as Ct,B as De,t as Mt,C as Pt,L as $,o as z,r as Fe,j as Rt,a1 as _t,Q as je,_ as At,V as kt}from"./portal-Dw89jnLn.js";import{r as Q}from"./index-Drt3gf4w.js";import{o as E,p as Ge,m as $t,M as ze,W as ce,a as re,n as J,c as Dt,i as he,H as de,y as ve,D as Te,I as Ft,u as jt,x as zt,R as Lt,s as Bt,e as Le}from"./use-server-handoff-complete-DH8D_X5a.js";import{F as Nt}from"./MagnifyingGlassIcon-CTArdofi.js";function Ut(t,i,n){let[e,o]=d.useState(n),s=t!==void 0,l=d.useRef(s),r=d.useRef(!1),a=d.useRef(!1);return s&&!l.current&&!r.current?(r.current=!0,l.current=s,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!s&&l.current&&!a.current&&(a.current=!0,l.current=s,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[s?t:e,E(u=>(s||o(u),i==null?void 0:i(u)))]}function Vt(t){let[i]=d.useState(t);return i}function Xe(t={},i=null,n=[]){for(let[e,o]of Object.entries(t))Qe(n,Ye(i,e),o);return n}function Ye(t,i){return t?t+"["+i+"]":i}function Qe(t,i,n){if(Array.isArray(n))for(let[e,o]of n.entries())Qe(t,Ye(i,e.toString()),o);else n instanceof Date?t.push([i,n.toISOString()]):typeof n=="boolean"?t.push([i,n?"1":"0"]):typeof n=="string"?t.push([i,n]):typeof n=="number"?t.push([i,`${n}`]):n==null?t.push([i,""]):Xe(n,i,t)}let qt=d.createContext(null);function Kt({children:t}){let i=d.useContext(qt);if(!i)return C.createElement(C.Fragment,null,t);let{target:n}=i;return n?Q.createPortal(C.createElement(C.Fragment,null,t),n):null}function Wt({data:t,form:i,disabled:n,onReset:e,overrides:o}){let[s,l]=d.useState(null),r=Ge();return d.useEffect(()=>{if(e&&s)return r.addEventListener(s,"reset",e)},[s,i,e]),C.createElement(Kt,null,C.createElement(Ht,{setForm:l,formId:i}),Xe(t).map(([a,u])=>C.createElement(Ve,{features:qe.Hidden,...$t({key:a,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:i,disabled:n,name:a,value:u,...o})})))}function Ht({setForm:t,formId:i}){return d.useEffect(()=>{if(i){let n=document.getElementById(i);n&&t(n)}},[t,i]),i?null:C.createElement(Ve,{features:qe.Hidden,as:"input",type:"hidden",hidden:!0,readOnly:!0,ref:n=>{if(!n)return;let e=n.closest("form");e&&t(e)}})}function oe(t,i,n){let e=n.initialDeps??[],o;return()=>{var s,l,r,a;let u;n.key&&((s=n.debug)!=null&&s.call(n))&&(u=Date.now());const p=t();if(!(p.length!==e.length||p.some((c,I)=>e[I]!==c)))return o;e=p;let b;if(n.key&&((l=n.debug)!=null&&l.call(n))&&(b=Date.now()),o=i(...p),n.key&&((r=n.debug)!=null&&r.call(n))){const c=Math.round((Date.now()-u)*100)/100,I=Math.round((Date.now()-b)*100)/100,y=I/16,m=(O,T)=>{for(O=String(O);O.length<T;)O=" "+O;return O};console.info(`%c⏱ ${m(I,5)} /${m(c,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*y,120))}deg 100% 31%);`,n==null?void 0:n.key)}return(a=n==null?void 0:n.onChange)==null||a.call(n,o),o}}function Se(t,i){if(t===void 0)throw new Error("Unexpected undefined");return t}const Gt=(t,i)=>Math.abs(t-i)<1,Xt=(t,i,n)=>{let e;return function(...o){t.clearTimeout(e),e=t.setTimeout(()=>i.apply(this,o),n)}},Yt=t=>t,Qt=t=>{const i=Math.max(t.startIndex-t.overscan,0),n=Math.min(t.endIndex+t.overscan,t.count-1),e=[];for(let o=i;o<=n;o++)e.push(o);return e},Jt=(t,i)=>{const n=t.scrollElement;if(!n)return;const e=t.targetWindow;if(!e)return;const o=l=>{const{width:r,height:a}=l;i({width:Math.round(r),height:Math.round(a)})};if(o(n.getBoundingClientRect()),!e.ResizeObserver)return()=>{};const s=new e.ResizeObserver(l=>{const r=l[0];if(r!=null&&r.borderBoxSize){const a=r.borderBoxSize[0];if(a){o({width:a.inlineSize,height:a.blockSize});return}}o(n.getBoundingClientRect())});return s.observe(n,{box:"border-box"}),()=>{s.unobserve(n)}},Be={passive:!0},Zt=typeof window>"u"?!0:"onscrollend"in window,en=(t,i)=>{const n=t.scrollElement;if(!n)return;const e=t.targetWindow;if(!e)return;let o=0;const s=Zt?()=>{}:Xt(e,()=>{i(o,!1)},t.options.isScrollingResetDelay),l=u=>()=>{const{horizontal:p,isRtl:h}=t.options;o=p?n.scrollLeft*(h&&-1||1):n.scrollTop,s(),i(o,u)},r=l(!0),a=l(!1);return a(),n.addEventListener("scroll",r,Be),n.addEventListener("scrollend",a,Be),()=>{n.removeEventListener("scroll",r),n.removeEventListener("scrollend",a)}},tn=(t,i,n)=>{if(i!=null&&i.borderBoxSize){const e=i.borderBoxSize[0];if(e)return Math.round(e[n.options.horizontal?"inlineSize":"blockSize"])}return Math.round(t.getBoundingClientRect()[n.options.horizontal?"width":"height"])},nn=(t,{adjustments:i=0,behavior:n},e)=>{var o,s;const l=t+i;(s=(o=e.scrollElement)==null?void 0:o.scrollTo)==null||s.call(o,{[e.options.horizontal?"left":"top"]:l,behavior:n})};class on{constructor(i){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const e=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(o=>{o.forEach(s=>{this._measureElement(s.target,s)})}));return{disconnect:()=>{var o;(o=e())==null||o.disconnect(),n=null},observe:o=>{var s;return(s=e())==null?void 0:s.observe(o,{box:"border-box"})},unobserve:o=>{var s;return(s=e())==null?void 0:s.unobserve(o)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([e,o])=>{typeof o>"u"&&delete n[e]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Yt,rangeExtractor:Qt,onChange:()=>{},measureElement:tn,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,...n}},this.notify=n=>{var e,o;(o=(e=this.options).onChange)==null||o.call(e,this,n)},this.maybeNotify=oe(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const e=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==e){if(this.cleanup(),!e){this.maybeNotify();return}this.scrollElement=e,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(o=>{this.observer.observe(o)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,o=>{this.scrollRect=o,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(o,s)=>{this.scrollAdjustments=0,this.scrollDirection=s?this.getScrollOffset()<o?"forward":"backward":null,this.scrollOffset=o,this.isScrolling=s,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,e)=>{const o=new Map,s=new Map;for(let l=e-1;l>=0;l--){const r=n[l];if(o.has(r.lane))continue;const a=s.get(r.lane);if(a==null||r.end>a.end?s.set(r.lane,r):r.end<a.end&&o.set(r.lane,!0),o.size===this.options.lanes)break}return s.size===this.options.lanes?Array.from(s.values()).sort((l,r)=>l.end===r.end?l.index-r.index:l.end-r.end)[0]:void 0},this.getMeasurementOptions=oe(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(n,e,o,s,l)=>(this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:e,scrollMargin:o,getItemKey:s,enabled:l}),{key:!1}),this.getMeasurements=oe(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:e,scrollMargin:o,getItemKey:s,enabled:l},r)=>{if(!l)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(p=>{this.itemSizeCache.set(p.key,p.size)}));const a=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const u=this.measurementsCache.slice(0,a);for(let p=a;p<n;p++){const h=s(p),b=this.options.lanes===1?u[p-1]:this.getFurthestMeasurement(u,p),c=b?b.end+this.options.gap:e+o,I=r.get(h),y=typeof I=="number"?I:this.options.estimateSize(p),m=c+y,O=b?b.lane:p%this.options.lanes;u[p]={index:p,start:c,size:y,end:m,key:h,lane:O}}return this.measurementsCache=u,u},{key:!1,debug:()=>this.options.debug}),this.calculateRange=oe(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset()],(n,e,o)=>this.range=n.length>0&&e>0?rn({measurements:n,outerSize:e,scrollOffset:o}):null,{key:!1,debug:()=>this.options.debug}),this.getIndexes=oe(()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count],(n,e,o,s)=>e===null?[]:n({startIndex:e.startIndex,endIndex:e.endIndex,overscan:o,count:s}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const e=this.options.indexAttribute,o=n.getAttribute(e);return o?parseInt(o,10):(console.warn(`Missing attribute name '${e}={index}' on measured element.`),-1)},this._measureElement=(n,e)=>{const o=this.indexFromElement(n),s=this.measurementsCache[o];if(!s)return;const l=s.key,r=this.elementsCache.get(l);r!==n&&(r&&this.observer.unobserve(r),this.observer.observe(n),this.elementsCache.set(l,n)),n.isConnected&&this.resizeItem(o,this.options.measureElement(n,e,this))},this.resizeItem=(n,e)=>{const o=this.measurementsCache[n];if(!o)return;const s=this.itemSizeCache.get(o.key)??o.size,l=e-s;l!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(o,l,this):o.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=l,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(o.index),this.itemSizeCache=new Map(this.itemSizeCache.set(o.key,e)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((e,o)=>{e.isConnected||(this.observer.unobserve(e),this.elementsCache.delete(o))});return}this._measureElement(n,void 0)},this.getVirtualItems=oe(()=>[this.getIndexes(),this.getMeasurements()],(n,e)=>{const o=[];for(let s=0,l=n.length;s<l;s++){const r=n[s],a=e[r];o.push(a)}return o},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const e=this.getMeasurements();if(e.length!==0)return Se(e[Je(0,e.length-1,o=>Se(e[o]).start,n)])},this.getOffsetForAlignment=(n,e)=>{const o=this.getSize(),s=this.getScrollOffset();e==="auto"&&(n<=s?e="start":n>=s+o?e="end":e="start"),e==="start"?n=n:e==="end"?n=n-o:e==="center"&&(n=n-o/2);const l=this.options.horizontal?"scrollWidth":"scrollHeight",a=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[l]:this.scrollElement[l]:0)-o;return Math.max(Math.min(a,n),0)},this.getOffsetForIndex=(n,e="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const o=this.measurementsCache[n];if(!o)return;const s=this.getSize(),l=this.getScrollOffset();if(e==="auto")if(o.end>=l+s-this.options.scrollPaddingEnd)e="end";else if(o.start<=l+this.options.scrollPaddingStart)e="start";else return[l,e];const r=e==="end"?o.end+this.options.scrollPaddingEnd:o.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(r,e),e]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(n,{align:e="start",behavior:o}={})=>{this.cancelScrollToIndex(),o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,e),{adjustments:void 0,behavior:o})},this.scrollToIndex=(n,{align:e="auto",behavior:o}={})=>{n=Math.max(0,Math.min(n,this.options.count-1)),this.cancelScrollToIndex(),o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const s=this.getOffsetForIndex(n,e);if(!s)return;const[l,r]=s;this._scrollToOffset(l,{adjustments:void 0,behavior:o}),o!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(n))){const[u]=Se(this.getOffsetForIndex(n,r));Gt(u,this.getScrollOffset())||this.scrollToIndex(n,{align:r,behavior:o})}else this.scrollToIndex(n,{align:r,behavior:o})}))},this.scrollBy=(n,{behavior:e}={})=>{this.cancelScrollToIndex(),e==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:e})},this.getTotalSize=()=>{var n;const e=this.getMeasurements();let o;return e.length===0?o=this.options.paddingStart:o=this.options.lanes===1?((n=e[e.length-1])==null?void 0:n.end)??0:Math.max(...e.slice(-this.options.lanes).map(s=>s.end)),Math.max(o-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:e,behavior:o})=>{this.options.scrollToFn(n,{behavior:o,adjustments:e},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(i)}}const Je=(t,i,n,e)=>{for(;t<=i;){const o=(t+i)/2|0,s=n(o);if(s<e)t=o+1;else if(s>e)i=o-1;else return o}return t>0?t-1:0};function rn({measurements:t,outerSize:i,scrollOffset:n}){const e=t.length-1,s=Je(0,e,r=>t[r].start,n);let l=s;for(;l<e&&t[l].end<n+i;)l++;return{startIndex:s,endIndex:l}}const sn=typeof document<"u"?d.useLayoutEffect:d.useEffect;function ln(t){const i=d.useReducer(()=>({}),{})[1],n={...t,onChange:(o,s)=>{var l;s?Q.flushSync(i):i(),(l=t.onChange)==null||l.call(t,o,s)}},[e]=d.useState(()=>new on(n));return e.setOptions(n),d.useEffect(()=>e._didMount(),[]),sn(()=>e._willUpdate()),e}function an(t){return ln({observeElementRect:Jt,observeElementOffset:en,scrollToFn:nn,...t})}function un(t,i){return t!==null&&i!==null&&typeof t=="object"&&typeof i=="object"&&"id"in t&&"id"in i?t.id===i.id:t===i}function cn(t=un){return d.useCallback((i,n)=>{if(typeof t=="string"){let e=t;return(i==null?void 0:i[e])===(n==null?void 0:n[e])}return t(i,n)},[t])}function Ze(t){let i=d.useRef({value:"",selectionStart:null,selectionEnd:null});return ct(t,"blur",n=>{let e=n.target;e instanceof HTMLInputElement&&(i.current={value:e.value,selectionStart:e.selectionStart,selectionEnd:e.selectionEnd})}),E(()=>{if(document.activeElement!==t&&t instanceof HTMLInputElement&&t.isConnected){if(t.focus({preventScroll:!0}),t.value!==i.current.value)t.setSelectionRange(t.value.length,t.value.length);else{let{selectionStart:n,selectionEnd:e}=i.current;n!==null&&e!==null&&t.setSelectionRange(n,e)}i.current={value:"",selectionStart:null,selectionEnd:null}}})}function dn({children:t,freeze:i}){let n=Ie(i,t);return C.createElement(C.Fragment,null,n)}function Ie(t,i){let[n,e]=d.useState(i);return!t&&n!==i&&e(i),t?n:i}var Ce=(t=>(t[t.Left=0]="Left",t[t.Right=2]="Right",t))(Ce||{}),pn=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(pn||{}),fn=(t=>(t[t.Single=0]="Single",t[t.Multi=1]="Multi",t))(fn||{}),mn=(t=>(t[t.Pointer=0]="Pointer",t[t.Focus=1]="Focus",t[t.Other=2]="Other",t))(mn||{}),gn=(t=>(t[t.OpenCombobox=0]="OpenCombobox",t[t.CloseCombobox=1]="CloseCombobox",t[t.GoToOption=2]="GoToOption",t[t.SetTyping=3]="SetTyping",t[t.RegisterOption=4]="RegisterOption",t[t.UnregisterOption=5]="UnregisterOption",t[t.SetActivationTrigger=6]="SetActivationTrigger",t[t.UpdateVirtualConfiguration=7]="UpdateVirtualConfiguration",t[t.SetInputElement=8]="SetInputElement",t[t.SetButtonElement=9]="SetButtonElement",t[t.SetOptionsElement=10]="SetOptionsElement",t))(gn||{});function ye(t,i=n=>n){let n=t.activeOptionIndex!==null?t.options[t.activeOptionIndex]:null,e=i(t.options.slice()),o=e.length>0&&e[0].dataRef.current.order!==null?e.sort((l,r)=>l.dataRef.current.order-r.dataRef.current.order):At(e,l=>l.dataRef.current.domRef.current),s=n?o.indexOf(n):null;return s===-1&&(s=null),{options:o,activeOptionIndex:s}}let hn={1(t){var i;return(i=t.dataRef.current)!=null&&i.disabled||t.comboboxState===1?t:{...t,activeOptionIndex:null,comboboxState:1,isTyping:!1,activationTrigger:2,__demoMode:!1}},0(t){var i,n;if((i=t.dataRef.current)!=null&&i.disabled||t.comboboxState===0)return t;if((n=t.dataRef.current)!=null&&n.value){let e=t.dataRef.current.calculateIndex(t.dataRef.current.value);if(e!==-1)return{...t,activeOptionIndex:e,comboboxState:0,__demoMode:!1}}return{...t,comboboxState:0,__demoMode:!1}},3(t,i){return t.isTyping===i.isTyping?t:{...t,isTyping:i.isTyping}},2(t,i){var n,e,o,s;if((n=t.dataRef.current)!=null&&n.disabled||t.optionsElement&&!((e=t.dataRef.current)!=null&&e.optionsPropsRef.current.static)&&t.comboboxState===1)return t;if(t.virtual){let{options:u,disabled:p}=t.virtual,h=i.focus===$.Specific?i.idx:je(i,{resolveItems:()=>u,resolveActiveIndex:()=>{var c,I;return(I=(c=t.activeOptionIndex)!=null?c:u.findIndex(y=>!p(y)))!=null?I:null},resolveDisabled:p,resolveId(){throw new Error("Function not implemented.")}}),b=(o=i.trigger)!=null?o:2;return t.activeOptionIndex===h&&t.activationTrigger===b?t:{...t,activeOptionIndex:h,activationTrigger:b,isTyping:!1,__demoMode:!1}}let l=ye(t);if(l.activeOptionIndex===null){let u=l.options.findIndex(p=>!p.dataRef.current.disabled);u!==-1&&(l.activeOptionIndex=u)}let r=i.focus===$.Specific?i.idx:je(i,{resolveItems:()=>l.options,resolveActiveIndex:()=>l.activeOptionIndex,resolveId:u=>u.id,resolveDisabled:u=>u.dataRef.current.disabled}),a=(s=i.trigger)!=null?s:2;return t.activeOptionIndex===r&&t.activationTrigger===a?t:{...t,...l,isTyping:!1,activeOptionIndex:r,activationTrigger:a,__demoMode:!1}},4:(t,i)=>{var n,e,o;if((n=t.dataRef.current)!=null&&n.virtual)return{...t,options:[...t.options,i.payload]};let s=i.payload,l=ye(t,a=>(a.push(s),a));t.activeOptionIndex===null&&(e=t.dataRef.current)!=null&&e.isSelected(i.payload.dataRef.current.value)&&(l.activeOptionIndex=l.options.indexOf(s));let r={...t,...l,activationTrigger:2};return(o=t.dataRef.current)!=null&&o.__demoMode&&t.dataRef.current.value===void 0&&(r.activeOptionIndex=0),r},5:(t,i)=>{var n;if((n=t.dataRef.current)!=null&&n.virtual)return{...t,options:t.options.filter(o=>o.id!==i.id)};let e=ye(t,o=>{let s=o.findIndex(l=>l.id===i.id);return s!==-1&&o.splice(s,1),o});return{...t,...e,activationTrigger:2}},6:(t,i)=>t.activationTrigger===i.trigger?t:{...t,activationTrigger:i.trigger},7:(t,i)=>{var n,e;if(t.virtual===null)return{...t,virtual:{options:i.options,disabled:(n=i.disabled)!=null?n:()=>!1}};if(t.virtual.options===i.options&&t.virtual.disabled===i.disabled)return t;let o=t.activeOptionIndex;if(t.activeOptionIndex!==null){let s=i.options.indexOf(t.virtual.options[t.activeOptionIndex]);s!==-1?o=s:o=null}return{...t,activeOptionIndex:o,virtual:{options:i.options,disabled:(e=i.disabled)!=null?e:()=>!1}}},8:(t,i)=>t.inputElement===i.element?t:{...t,inputElement:i.element},9:(t,i)=>t.buttonElement===i.element?t:{...t,buttonElement:i.element},10:(t,i)=>t.optionsElement===i.element?t:{...t,optionsElement:i.element}},Me=d.createContext(null);Me.displayName="ComboboxActionsContext";function pe(t){let i=d.useContext(Me);if(i===null){let n=new Error(`<${t} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,pe),n}return i}let et=d.createContext(null);function vn(t){let i=se("VirtualProvider"),{options:n}=i.virtual,[e,o]=d.useMemo(()=>{let u=i.optionsElement;if(!u)return[0,0];let p=window.getComputedStyle(u);return[parseFloat(p.paddingBlockStart||p.paddingTop),parseFloat(p.paddingBlockEnd||p.paddingBottom)]},[i.optionsElement]),s=an({enabled:n.length!==0,scrollPaddingStart:e,scrollPaddingEnd:o,count:n.length,estimateSize(){return 40},getScrollElement(){return i.optionsElement},overscan:12}),[l,r]=d.useState(0);J(()=>{r(u=>u+1)},[n]);let a=s.getVirtualItems();return a.length===0?null:C.createElement(et.Provider,{value:s},C.createElement("div",{style:{position:"relative",width:"100%",height:`${s.getTotalSize()}px`},ref:u=>{u&&i.activationTrigger!==0&&i.activeOptionIndex!==null&&n.length>i.activeOptionIndex&&s.scrollToIndex(i.activeOptionIndex)}},a.map(u=>{var p;return C.createElement(d.Fragment,{key:u.key},C.cloneElement((p=t.children)==null?void 0:p.call(t,{...t.slot,option:n[u.index]}),{key:`${l}-${u.key}`,"data-index":u.index,"aria-setsize":n.length,"aria-posinset":u.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${u.start}px)`,overflowAnchor:"none"}}))})))}let ue=d.createContext(null);ue.displayName="ComboboxDataContext";function se(t){let i=d.useContext(ue);if(i===null){let n=new Error(`<${t} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,se),n}return i}function bn(t,i){return re(i.type,hn,t,i)}let xn=d.Fragment;function Sn(t,i){var n,e;let o=pt(),{value:s,defaultValue:l,onChange:r,form:a,name:u,by:p,disabled:h=o||!1,onClose:b,__demoMode:c=!1,multiple:I=!1,immediate:y=!1,virtual:m=null,nullable:O,...T}=t,M=Vt(l),[P=I?[]:void 0,_]=Ut(s,r,M),[v,w]=d.useReducer(bn,{dataRef:d.createRef(),comboboxState:c?0:1,isTyping:!1,options:[],virtual:m?{options:m.options,disabled:(n=m.disabled)!=null?n:()=>!1}:null,activeOptionIndex:null,activationTrigger:2,inputElement:null,buttonElement:null,optionsElement:null,__demoMode:c}),S=d.useRef(!1),B=d.useRef({static:!1,hold:!1}),L=cn(p),W=E(x=>m?p===null?m.options.indexOf(x):m.options.findIndex(R=>L(R,x)):v.options.findIndex(R=>L(R.dataRef.current.value,x))),X=d.useCallback(x=>re(f.mode,{1:()=>P.some(R=>L(R,x)),0:()=>L(P,x)}),[P]),H=E(x=>v.activeOptionIndex===W(x)),f=d.useMemo(()=>({...v,immediate:y,optionsPropsRef:B,value:P,defaultValue:M,disabled:h,mode:I?1:0,virtual:m?v.virtual:null,get activeOptionIndex(){if(S.current&&v.activeOptionIndex===null&&(m?m.options.length>0:v.options.length>0)){if(m){let R=m.options.findIndex(K=>{var me,ke;return!((ke=(me=m.disabled)==null?void 0:me.call(m,K))!=null&&ke)});if(R!==-1)return R}let x=v.options.findIndex(R=>!R.dataRef.current.disabled);if(x!==-1)return x}return v.activeOptionIndex},calculateIndex:W,compare:L,isSelected:X,isActive:H}),[P,M,h,I,c,v,m]);J(()=>{var x;m&&w({type:7,options:m.options,disabled:(x=m.disabled)!=null?x:null})},[m,m==null?void 0:m.options,m==null?void 0:m.disabled]),J(()=>{v.dataRef.current=f},[f]);let q=f.comboboxState===0;ft(q,[f.buttonElement,f.inputElement,f.optionsElement],()=>j.closeCombobox());let le=d.useMemo(()=>{var x,R,K;return{open:f.comboboxState===0,disabled:h,activeIndex:f.activeOptionIndex,activeOption:f.activeOptionIndex===null?null:f.virtual?f.virtual.options[(x=f.activeOptionIndex)!=null?x:0]:(K=(R=f.options[f.activeOptionIndex])==null?void 0:R.dataRef.current.value)!=null?K:null,value:P}},[f,h,P]),Y=E(()=>{if(f.activeOptionIndex!==null){if(j.setIsTyping(!1),f.virtual)g(f.virtual.options[f.activeOptionIndex]);else{let{dataRef:x}=f.options[f.activeOptionIndex];g(x.current.value)}j.goToOption($.Specific,f.activeOptionIndex)}}),ee=E(()=>{w({type:0}),S.current=!0}),ne=E(()=>{w({type:1}),S.current=!1,b==null||b()}),ae=E(x=>{w({type:3,isTyping:x})}),F=E((x,R,K)=>(S.current=!1,x===$.Specific?w({type:2,focus:$.Specific,idx:R,trigger:K}):w({type:2,focus:x,trigger:K}))),xe=E((x,R)=>(w({type:4,payload:{id:x,dataRef:R}}),()=>{f.isActive(R.current.value)&&(S.current=!0),w({type:5,id:x})})),g=E(x=>re(f.mode,{0(){return _==null?void 0:_(x)},1(){let R=f.value.slice(),K=R.findIndex(me=>L(me,x));return K===-1?R.push(x):R.splice(K,1),_==null?void 0:_(R)}})),N=E(x=>{w({type:6,trigger:x})}),D=E(x=>{w({type:8,element:x})}),U=E(x=>{w({type:9,element:x})}),k=E(x=>{w({type:10,element:x})}),j=d.useMemo(()=>({onChange:g,registerOption:xe,goToOption:F,setIsTyping:ae,closeCombobox:ne,openCombobox:ee,setActivationTrigger:N,selectActiveOption:Y,setInputElement:D,setButtonElement:U,setOptionsElement:k}),[]),[te,st]=mt(),lt=i===null?{}:{ref:i},at=d.useCallback(()=>{if(M!==void 0)return _==null?void 0:_(M)},[_,M]);return C.createElement(st,{value:te,props:{htmlFor:(e=f.inputElement)==null?void 0:e.id},slot:{open:f.comboboxState===0,disabled:h}},C.createElement(gt,null,C.createElement(Me.Provider,{value:j},C.createElement(ue.Provider,{value:f},C.createElement(Dt,{value:re(f.comboboxState,{0:he.Open,1:he.Closed})},u!=null&&C.createElement(Wt,{disabled:h,data:P!=null?{[u]:P}:{},form:a,onReset:at}),de({ourProps:lt,theirProps:T,slot:le,defaultTag:xn,name:"Combobox"}))))))}let yn="input";function En(t,i){var n,e,o,s,l;let r=se("Combobox.Input"),a=pe("Combobox.Input"),u=d.useId(),p=ht(),{id:h=p||`headlessui-combobox-input-${u}`,onChange:b,displayValue:c,disabled:I=r.disabled||!1,autoFocus:y=!1,type:m="text",...O}=t,T=d.useRef(null),M=ve(T,i,vt(),a.setInputElement),P=Ke(r.inputElement),_=Ge(),v=E(()=>{a.onChange(null),r.optionsElement&&(r.optionsElement.scrollTop=0),a.goToOption($.Nothing)}),w=d.useMemo(()=>{var g;return typeof c=="function"&&r.value!==void 0?(g=c(r.value))!=null?g:"":typeof r.value=="string"?r.value:""},[r.value,c]);$e(([g,N],[D,U])=>{if(r.isTyping)return;let k=T.current;k&&((U===0&&N===1||g!==D)&&(k.value=g),requestAnimationFrame(()=>{if(r.isTyping||!k||(P==null?void 0:P.activeElement)!==k)return;let{selectionStart:j,selectionEnd:te}=k;Math.abs((te??0)-(j??0))===0&&j===0&&k.setSelectionRange(k.value.length,k.value.length)}))},[w,r.comboboxState,P,r.isTyping]),$e(([g],[N])=>{if(g===0&&N===1){if(r.isTyping)return;let D=T.current;if(!D)return;let U=D.value,{selectionStart:k,selectionEnd:j,selectionDirection:te}=D;D.value="",D.value=U,te!==null?D.setSelectionRange(k,j,te):D.setSelectionRange(k,j)}},[r.comboboxState]);let S=d.useRef(!1),B=E(()=>{S.current=!0}),L=E(()=>{_.nextFrame(()=>{S.current=!1})}),W=E(g=>{switch(a.setIsTyping(!0),g.key){case z.Enter:if(r.comboboxState!==0||S.current)return;if(g.preventDefault(),g.stopPropagation(),r.activeOptionIndex===null){a.closeCombobox();return}a.selectActiveOption(),r.mode===0&&a.closeCombobox();break;case z.ArrowDown:return g.preventDefault(),g.stopPropagation(),re(r.comboboxState,{0:()=>a.goToOption($.Next),1:()=>a.openCombobox()});case z.ArrowUp:return g.preventDefault(),g.stopPropagation(),re(r.comboboxState,{0:()=>a.goToOption($.Previous),1:()=>{Q.flushSync(()=>a.openCombobox()),r.value||a.goToOption($.Last)}});case z.Home:if(g.shiftKey)break;return g.preventDefault(),g.stopPropagation(),a.goToOption($.First);case z.PageUp:return g.preventDefault(),g.stopPropagation(),a.goToOption($.First);case z.End:if(g.shiftKey)break;return g.preventDefault(),g.stopPropagation(),a.goToOption($.Last);case z.PageDown:return g.preventDefault(),g.stopPropagation(),a.goToOption($.Last);case z.Escape:return r.comboboxState!==0?void 0:(g.preventDefault(),r.optionsElement&&!r.optionsPropsRef.current.static&&g.stopPropagation(),r.mode===0&&r.value===null&&v(),a.closeCombobox());case z.Tab:if(r.comboboxState!==0)return;r.mode===0&&r.activationTrigger!==1&&a.selectActiveOption(),a.closeCombobox();break}}),X=E(g=>{b==null||b(g),r.mode===0&&g.target.value===""&&v(),a.openCombobox()}),H=E(g=>{var N,D,U;let k=(N=g.relatedTarget)!=null?N:Fe.find(j=>j!==g.currentTarget);if(!((D=r.optionsElement)!=null&&D.contains(k))&&!((U=r.buttonElement)!=null&&U.contains(k))&&r.comboboxState===0)return g.preventDefault(),r.mode===0&&r.value===null&&v(),a.closeCombobox()}),f=E(g=>{var N,D,U;let k=(N=g.relatedTarget)!=null?N:Fe.find(j=>j!==g.currentTarget);(D=r.buttonElement)!=null&&D.contains(k)||(U=r.optionsElement)!=null&&U.contains(k)||r.disabled||r.immediate&&r.comboboxState!==0&&_.microTask(()=>{Q.flushSync(()=>a.openCombobox()),a.setActivationTrigger(1)})}),q=we(),le=bt(),{isFocused:Y,focusProps:ee}=We({autoFocus:y}),{isHovered:ne,hoverProps:ae}=He({isDisabled:I}),F=d.useMemo(()=>({open:r.comboboxState===0,disabled:I,hover:ne,focus:Y,autofocus:y}),[r,ne,Y,y,I]),xe=Te({ref:M,id:h,role:"combobox",type:m,"aria-controls":(n=r.optionsElement)==null?void 0:n.id,"aria-expanded":r.comboboxState===0,"aria-activedescendant":r.activeOptionIndex===null?void 0:r.virtual?(e=r.options.find(g=>!g.dataRef.current.disabled&&r.compare(g.dataRef.current.value,r.virtual.options[r.activeOptionIndex])))==null?void 0:e.id:(o=r.options[r.activeOptionIndex])==null?void 0:o.id,"aria-labelledby":q,"aria-describedby":le,"aria-autocomplete":"list",defaultValue:(l=(s=t.defaultValue)!=null?s:r.defaultValue!==void 0?c==null?void 0:c(r.defaultValue):null)!=null?l:r.defaultValue,disabled:I||void 0,autoFocus:y,onCompositionStart:B,onCompositionEnd:L,onKeyDown:W,onChange:X,onFocus:f,onBlur:H},ee,ae);return de({ourProps:xe,theirProps:O,slot:F,defaultTag:yn,name:"Combobox.Input"})}let In="button";function On(t,i){var n;let e=se("Combobox.Button"),o=pe("Combobox.Button"),s=ve(i,o.setButtonElement),l=Ft(),r=d.useId(),{id:a=`headlessui-combobox-button-${r}`,disabled:u=e.disabled||!1,autoFocus:p=!1,...h}=t,b=Ze(e.inputElement),c=E(S=>{switch(S.key){case z.Space:case z.Enter:S.preventDefault(),S.stopPropagation(),e.comboboxState===1&&Q.flushSync(()=>o.openCombobox()),b();return;case z.ArrowDown:S.preventDefault(),S.stopPropagation(),e.comboboxState===1&&(Q.flushSync(()=>o.openCombobox()),e.value||o.goToOption($.First)),b();return;case z.ArrowUp:S.preventDefault(),S.stopPropagation(),e.comboboxState===1&&(Q.flushSync(()=>o.openCombobox()),e.value||o.goToOption($.Last)),b();return;case z.Escape:if(e.comboboxState!==0)return;S.preventDefault(),e.optionsElement&&!e.optionsPropsRef.current.static&&S.stopPropagation(),Q.flushSync(()=>o.closeCombobox()),b();return;default:return}}),I=E(S=>{S.preventDefault(),!Rt(S.currentTarget)&&(S.button===Ce.Left&&(e.comboboxState===0?o.closeCombobox():o.openCombobox()),b())}),y=we([a]),{isFocusVisible:m,focusProps:O}=We({autoFocus:p}),{isHovered:T,hoverProps:M}=He({isDisabled:u}),{pressed:P,pressProps:_}=xt({disabled:u}),v=d.useMemo(()=>({open:e.comboboxState===0,active:P||e.comboboxState===0,disabled:u,value:e.value,hover:T,focus:m}),[e,T,m,P,u]),w=Te({ref:s,id:a,type:St(t,e.buttonElement),tabIndex:-1,"aria-haspopup":"listbox","aria-controls":(n=e.optionsElement)==null?void 0:n.id,"aria-expanded":e.comboboxState===0,"aria-labelledby":y,disabled:u||void 0,autoFocus:p,onMouseDown:I,onKeyDown:c},O,M,_);return de({mergeRefs:l,ourProps:w,theirProps:h,slot:v,defaultTag:In,name:"Combobox.Button"})}let wn="div",Tn=ze.RenderStrategy|ze.Static;function Cn(t,i){var n,e,o;let s=d.useId(),{id:l=`headlessui-combobox-options-${s}`,hold:r=!1,anchor:a,portal:u=!1,modal:p=!0,transition:h=!1,...b}=t,c=se("Combobox.Options"),I=pe("Combobox.Options"),y=yt(a);y&&(u=!0);let[m,O]=Et(y),[T,M]=d.useState(null),P=It(),_=ve(i,y?m:null,I.setOptionsElement,M),v=Ke(c.optionsElement),w=jt(),[S,B]=zt(h,T,w!==null?(w&he.Open)===he.Open:c.comboboxState===0);Ot(S,c.inputElement,I.closeCombobox);let L=c.__demoMode?!1:p&&c.comboboxState===0;wt(L,v);let W=c.__demoMode?!1:p&&c.comboboxState===0;Tt(W,{allowed:d.useCallback(()=>[c.inputElement,c.buttonElement,c.optionsElement],[c.inputElement,c.buttonElement,c.optionsElement])}),J(()=>{var F;c.optionsPropsRef.current.static=(F=t.static)!=null?F:!1},[c.optionsPropsRef,t.static]),J(()=>{c.optionsPropsRef.current.hold=r},[c.optionsPropsRef,r]),Ct(c.comboboxState===0,{container:c.optionsElement,accept(F){return F.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:F.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(F){F.setAttribute("role","none")}});let X=we([(n=c.buttonElement)==null?void 0:n.id]),H=d.useMemo(()=>({open:c.comboboxState===0,option:void 0}),[c.comboboxState]),f=E(()=>{I.setActivationTrigger(0)}),q=E(F=>{F.preventDefault(),I.setActivationTrigger(0)}),le=Te(y?P():{},{"aria-labelledby":X,role:"listbox","aria-multiselectable":c.mode===1?!0:void 0,id:l,ref:_,style:{...b.style,...O,"--input-width":De(c.inputElement,!0).width,"--button-width":De(c.buttonElement,!0).width},onWheel:c.activationTrigger===0?void 0:f,onMouseDown:q,...Lt(B)}),Y=S&&c.comboboxState===1,ee=Ie(Y,(e=c.virtual)==null?void 0:e.options),ne=Ie(Y,c.value),ae=E(F=>c.compare(ne,F));if(c.virtual){if(ee===void 0)throw new Error("Missing `options` in virtual mode");Object.assign(b,{children:C.createElement(ue.Provider,{value:ee!==c.virtual.options?{...c,virtual:{...c.virtual,options:ee}}:c},C.createElement(vn,{slot:H},b.children))})}return C.createElement(Mt,{enabled:u?t.static||S:!1},C.createElement(ue.Provider,{value:c.mode===1?c:{...c,isSelected:ae}},de({ourProps:le,theirProps:{...b,children:C.createElement(dn,{freeze:Y},typeof b.children=="function"?(o=b.children)==null?void 0:o.call(b,H):b.children)},slot:H,defaultTag:wn,features:Tn,visible:S,name:"Combobox.Options"})))}let Mn="div";function Pn(t,i){var n,e,o,s;let l=se("Combobox.Option"),r=pe("Combobox.Option"),a=d.useId(),{id:u=`headlessui-combobox-option-${a}`,value:p,disabled:h=(o=(e=(n=l.virtual)==null?void 0:n.disabled)==null?void 0:e.call(n,p))!=null?o:!1,order:b=null,...c}=t,I=Ze(l.inputElement),y=l.virtual?l.activeOptionIndex===l.calculateIndex(p):l.activeOptionIndex===null?!1:((s=l.options[l.activeOptionIndex])==null?void 0:s.id)===u,m=l.isSelected(p),O=d.useRef(null),T=Bt({disabled:h,value:p,domRef:O,order:b}),M=d.useContext(et),P=ve(i,O,M?M.measureElement:null),_=E(()=>{r.setIsTyping(!1),r.onChange(p)});J(()=>r.registerOption(u,T),[T,u]);let v=d.useRef(!(l.virtual||l.__demoMode));J(()=>{if(!l.virtual&&!l.__demoMode)return Le().requestAnimationFrame(()=>{v.current=!0})},[l.virtual,l.__demoMode]),J(()=>{if(v.current&&l.comboboxState===0&&y&&l.activationTrigger!==0)return Le().requestAnimationFrame(()=>{var f,q;(q=(f=O.current)==null?void 0:f.scrollIntoView)==null||q.call(f,{block:"nearest"})})},[O,y,l.comboboxState,l.activationTrigger,l.activeOptionIndex]);let w=E(f=>{f.preventDefault(),f.button===Ce.Left&&(h||(_(),_t()||requestAnimationFrame(()=>I()),l.mode===0&&r.closeCombobox()))}),S=E(()=>{if(h)return r.goToOption($.Nothing);let f=l.calculateIndex(p);r.goToOption($.Specific,f)}),B=Pt(),L=E(f=>B.update(f)),W=E(f=>{if(!B.wasMoved(f)||h||y)return;let q=l.calculateIndex(p);r.goToOption($.Specific,q,0)}),X=E(f=>{B.wasMoved(f)&&(h||y&&(l.optionsPropsRef.current.hold||r.goToOption($.Nothing)))}),H=d.useMemo(()=>({active:y,focus:y,selected:m,disabled:h}),[y,m,h]);return de({ourProps:{id:u,ref:P,role:"option",tabIndex:h===!0?void 0:-1,"aria-disabled":h===!0?!0:void 0,"aria-selected":m,disabled:void 0,onMouseDown:w,onFocus:S,onPointerEnter:L,onMouseEnter:L,onPointerMove:W,onMouseMove:W,onPointerLeave:X,onMouseLeave:X},theirProps:c,slot:H,defaultTag:Mn,name:"Combobox.Option"})}let Rn=ce(Sn),_n=ce(On),tt=ce(En),An=dt,nt=ce(Cn),ot=ce(Pn),kn=Object.assign(Rn,{Input:tt,Button:_n,Label:An,Options:nt,Option:ot});var Z={},Pe={},$n="Expected a function",Ne=NaN,Dn="[object Symbol]",Fn=/^\s+|\s+$/g,jn=/^[-+]0x[0-9a-f]+$/i,zn=/^0b[01]+$/i,Ln=/^0o[0-7]+$/i,Bn=parseInt,Nn=typeof ge=="object"&&ge&&ge.Object===Object&&ge,Un=typeof self=="object"&&self&&self.Object===Object&&self,Vn=Nn||Un||Function("return this")(),qn=Object.prototype,Kn=qn.toString,Wn=Math.max,Hn=Math.min,Ee=function(){return Vn.Date.now()};function Gn(t,i,n){var e,o,s,l,r,a,u=0,p=!1,h=!1,b=!0;if(typeof t!="function")throw new TypeError($n);i=Ue(i)||0,Oe(n)&&(p=!!n.leading,h="maxWait"in n,s=h?Wn(Ue(n.maxWait)||0,i):s,b="trailing"in n?!!n.trailing:b);function c(v){var w=e,S=o;return e=o=void 0,u=v,l=t.apply(S,w),l}function I(v){return u=v,r=setTimeout(O,i),p?c(v):l}function y(v){var w=v-a,S=v-u,B=i-w;return h?Hn(B,s-S):B}function m(v){var w=v-a,S=v-u;return a===void 0||w>=i||w<0||h&&S>=s}function O(){var v=Ee();if(m(v))return T(v);r=setTimeout(O,y(v))}function T(v){return r=void 0,b&&e?c(v):(e=o=void 0,l)}function M(){r!==void 0&&clearTimeout(r),u=0,e=a=o=r=void 0}function P(){return r===void 0?l:T(Ee())}function _(){var v=Ee(),w=m(v);if(e=arguments,o=this,a=v,w){if(r===void 0)return I(a);if(h)return r=setTimeout(O,i),c(a)}return r===void 0&&(r=setTimeout(O,i)),l}return _.cancel=M,_.flush=P,_}function Oe(t){var i=typeof t;return!!t&&(i=="object"||i=="function")}function Xn(t){return!!t&&typeof t=="object"}function Yn(t){return typeof t=="symbol"||Xn(t)&&Kn.call(t)==Dn}function Ue(t){if(typeof t=="number")return t;if(Yn(t))return Ne;if(Oe(t)){var i=typeof t.valueOf=="function"?t.valueOf():t;t=Oe(i)?i+"":i}if(typeof t!="string")return t===0?t:+t;t=t.replace(Fn,"");var n=zn.test(t);return n||Ln.test(t)?Bn(t.slice(2),n?2:8):jn.test(t)?Ne:+t}var Qn=Gn,be={};Object.defineProperty(be,"__esModule",{value:!0});be.compose=function(){for(var i=arguments.length,n=Array(i),e=0;e<i;e++)n[e]=arguments[e];return function(){for(var o=arguments.length,s=Array(o),l=0;l<o;l++)s[l]=arguments[l];n.forEach(function(r){return r&&r.apply(void 0,s)})}};be.pick=function(i){for(var n=arguments.length,e=Array(n>1?n-1:0),o=1;o<n;o++)e[o-1]=arguments[o];return e.reduce(function(s,l){return i&&i.hasOwnProperty(l)&&(s[l]=i[l]),s},{})};Object.defineProperty(Pe,"__esModule",{value:!0});var ie=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}return t},Jn=function(){function t(i,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(i,o.key,o)}}return function(i,n,e){return n&&t(i.prototype,n),e&&t(i,e),i}}(),Zn=d,eo=Re(Zn),to=ut,A=Re(to),no=Qn,oo=Re(no),G=be;function Re(t){return t&&t.__esModule?t:{default:t}}function io(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function ro(t,i){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:t}function so(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(t,i):t.__proto__=i)}var lo=function(i){return{mainText:i.main_text,secondaryText:i.secondary_text}},_e=function(t){so(i,t);function i(n){io(this,i);var e=ro(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,n));return e.init=function(){if(!window.google)throw new Error("[react-places-autocomplete]: Google Maps JavaScript API library must be loaded. See: https://github.com/kenny-hibino/react-places-autocomplete#load-google-library");if(!window.google.maps.places)throw new Error("[react-places-autocomplete]: Google Maps Places library must be loaded. Please add `libraries=places` to the src URL. See: https://github.com/kenny-hibino/react-places-autocomplete#load-google-library");e.autocompleteService=new window.google.maps.places.AutocompleteService,e.autocompleteOK=window.google.maps.places.PlacesServiceStatus.OK,e.setState(function(o){return o.ready?null:{ready:!0}})},e.autocompleteCallback=function(o,s){if(e.setState({loading:!1}),s!==e.autocompleteOK){e.props.onError(s,e.clearSuggestions);return}var l=e.props.highlightFirstSuggestion;e.setState({suggestions:o.map(function(r,a){return{id:r.id,description:r.description,placeId:r.place_id,active:!!(l&&a===0),index:a,formattedSuggestion:lo(r.structured_formatting),matchedSubstrings:r.matched_substrings,terms:r.terms,types:r.types}})})},e.fetchPredictions=function(){var o=e.props.value;o.length&&(e.setState({loading:!0}),e.autocompleteService.getPlacePredictions(ie({},e.props.searchOptions,{input:o}),e.autocompleteCallback))},e.clearSuggestions=function(){e.setState({suggestions:[]})},e.clearActive=function(){e.setState({suggestions:e.state.suggestions.map(function(o){return ie({},o,{active:!1})})})},e.handleSelect=function(o,s,l){e.clearSuggestions(),e.props.onSelect?e.props.onSelect(o,s,l):e.props.onChange(o)},e.getActiveSuggestion=function(){return e.state.suggestions.find(function(o){return o.active})},e.selectActiveAtIndex=function(o){var s=e.state.suggestions.find(function(l){return l.index===o}).description;e.setActiveAtIndex(o),e.props.onChange(s)},e.selectUserInputValue=function(){e.clearActive(),e.props.onChange(e.state.userInputValue)},e.handleEnterKey=function(){var o=e.getActiveSuggestion();o===void 0?e.handleSelect(e.props.value,null,null):e.handleSelect(o.description,o.placeId,o)},e.handleDownKey=function(){if(e.state.suggestions.length!==0){var o=e.getActiveSuggestion();o===void 0?e.selectActiveAtIndex(0):o.index===e.state.suggestions.length-1?e.selectUserInputValue():e.selectActiveAtIndex(o.index+1)}},e.handleUpKey=function(){if(e.state.suggestions.length!==0){var o=e.getActiveSuggestion();o===void 0?e.selectActiveAtIndex(e.state.suggestions.length-1):o.index===0?e.selectUserInputValue():e.selectActiveAtIndex(o.index-1)}},e.handleInputKeyDown=function(o){switch(o.key){case"Enter":o.preventDefault(),e.handleEnterKey();break;case"ArrowDown":o.preventDefault(),e.handleDownKey();break;case"ArrowUp":o.preventDefault(),e.handleUpKey();break;case"Escape":e.clearSuggestions();break}},e.setActiveAtIndex=function(o){e.setState({suggestions:e.state.suggestions.map(function(s,l){return l===o?ie({},s,{active:!0}):ie({},s,{active:!1})})})},e.handleInputChange=function(o){var s=o.target.value;if(e.props.onChange(s),e.setState({userInputValue:s}),!s){e.clearSuggestions();return}e.props.shouldFetchSuggestions&&e.debouncedFetchPredictions()},e.handleInputOnBlur=function(){e.mousedownOnSuggestion||e.clearSuggestions()},e.getActiveSuggestionId=function(){var o=e.getActiveSuggestion();return o?"PlacesAutocomplete__suggestion-"+o.placeId:void 0},e.getIsExpanded=function(){return e.state.suggestions.length>0},e.getInputProps=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(o.hasOwnProperty("value"))throw new Error("[react-places-autocomplete]: getInputProps does not accept `value`. Use `value` prop instead");if(o.hasOwnProperty("onChange"))throw new Error("[react-places-autocomplete]: getInputProps does not accept `onChange`. Use `onChange` prop instead");var s={type:"text",autoComplete:"off",role:"combobox","aria-autocomplete":"list","aria-expanded":e.getIsExpanded(),"aria-activedescendant":e.getActiveSuggestionId(),disabled:!e.state.ready};return ie({},s,o,{onKeyDown:(0,G.compose)(e.handleInputKeyDown,o.onKeyDown),onBlur:(0,G.compose)(e.handleInputOnBlur,o.onBlur),value:e.props.value,onChange:function(r){e.handleInputChange(r)}})},e.getSuggestionItemProps=function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=e.handleSuggestionMouseEnter.bind(e,o.index),r=e.handleSuggestionClick.bind(e,o);return ie({},s,{key:o.id,id:e.getActiveSuggestionId(),role:"option",onMouseEnter:(0,G.compose)(l,s.onMouseEnter),onMouseLeave:(0,G.compose)(e.handleSuggestionMouseLeave,s.onMouseLeave),onMouseDown:(0,G.compose)(e.handleSuggestionMouseDown,s.onMouseDown),onMouseUp:(0,G.compose)(e.handleSuggestionMouseUp,s.onMouseUp),onTouchStart:(0,G.compose)(e.handleSuggestionTouchStart,s.onTouchStart),onTouchEnd:(0,G.compose)(e.handleSuggestionMouseUp,s.onTouchEnd),onClick:(0,G.compose)(r,s.onClick)})},e.handleSuggestionMouseEnter=function(o){e.setActiveAtIndex(o)},e.handleSuggestionMouseLeave=function(){e.mousedownOnSuggestion=!1,e.clearActive()},e.handleSuggestionMouseDown=function(o){o.preventDefault(),e.mousedownOnSuggestion=!0},e.handleSuggestionTouchStart=function(){e.mousedownOnSuggestion=!0},e.handleSuggestionMouseUp=function(){e.mousedownOnSuggestion=!1},e.handleSuggestionClick=function(o,s){s&&s.preventDefault&&s.preventDefault();var l=o.description,r=o.placeId;e.handleSelect(l,r,o),setTimeout(function(){e.mousedownOnSuggestion=!1})},e.state={loading:!1,suggestions:[],userInputValue:n.value,ready:!n.googleCallbackName},e.debouncedFetchPredictions=(0,oo.default)(e.fetchPredictions,n.debounce),e}return Jn(i,[{key:"componentDidMount",value:function(){var e=this.props.googleCallbackName;if(e){var o=window.google&&window.google.maps&&window.google.maps.places;o?this.init():window[e]=this.init}else this.init()}},{key:"componentWillUnmount",value:function(){var e=this.props.googleCallbackName;e&&window[e]&&delete window[e]}},{key:"render",value:function(){return this.props.children({getInputProps:this.getInputProps,getSuggestionItemProps:this.getSuggestionItemProps,loading:this.state.loading,suggestions:this.state.suggestions})}}]),i}(eo.default.Component);_e.propTypes={onChange:A.default.func.isRequired,value:A.default.string.isRequired,children:A.default.func.isRequired,onError:A.default.func,onSelect:A.default.func,searchOptions:A.default.shape({bounds:A.default.object,componentRestrictions:A.default.object,location:A.default.object,offset:A.default.oneOfType([A.default.number,A.default.string]),radius:A.default.oneOfType([A.default.number,A.default.string]),types:A.default.array}),debounce:A.default.number,highlightFirstSuggestion:A.default.bool,shouldFetchSuggestions:A.default.bool,googleCallbackName:A.default.string};_e.defaultProps={onError:function(i,n){return console.error(`[react-places-autocomplete]: error happened when fetching data from Google Maps API.
Please check the docs here (https://developers.google.com/maps/documentation/javascript/places#place_details_responses)
Status: `,i)},searchOptions:{},debounce:200,highlightFirstSuggestion:!1,shouldFetchSuggestions:!0};Pe.default=_e;var fe={};Object.defineProperty(fe,"__esModule",{value:!0});fe.geocodeByAddress=function(i){var n=new window.google.maps.Geocoder,e=window.google.maps.GeocoderStatus.OK;return new Promise(function(o,s){n.geocode({address:i},function(l,r){r!==e&&s(r),o(l)})})};fe.getLatLng=function(i){return new Promise(function(n,e){try{var o={lat:i.geometry.location.lat(),lng:i.geometry.location.lng()};n(o)}catch(s){e(s)}})};fe.geocodeByPlaceId=function(i){var n=new window.google.maps.Geocoder,e=window.google.maps.GeocoderStatus.OK;return new Promise(function(o,s){n.geocode({placeId:i},function(l,r){r!==e&&s(r),o(l)})})};Object.defineProperty(Z,"__esModule",{value:!0});var it=Z.getLatLng=Z.geocodeByPlaceId=rt=Z.geocodeByAddress=void 0,ao=Pe,uo=co(ao),Ae=fe;function co(t){return t&&t.__esModule?t:{default:t}}var rt=Z.geocodeByAddress=Ae.geocodeByAddress;Z.geocodeByPlaceId=Ae.geocodeByPlaceId;it=Z.getLatLng=Ae.getLatLng;var po=Z.default=uo.default;const fo=({posCallback:t,centerCallback:i,singleMarker:n,singleMarkerCallback:e,eventAddress:o,eventLatitude:s,eventLongitude:l})=>{const[r,a]=d.useState(o||""),[u,p]=d.useState({lat:45.3850225,lng:-75.6946679}),[h,b]=d.useState([]),[c,I]=d.useState({lat:s||45.3850225,lng:l||-75.6946679}),y=async m=>{const O=await rt(m),T=await it(O[0]),M=O[0].place_id;a(m),p({lat:T.lat,lng:T.lng}),b([...h,{name:m,id:M,position:T}]),I(T)};return d.useEffect(()=>{t&&t(h)},[h,t]),d.useEffect(()=>{i&&i(u)},[u,i]),d.useEffect(()=>{n&&e&&e({coordinates:c,address:r})},[c,e,n]),V.jsx("div",{className:"cu-locationpicker not-prose",children:V.jsx(po,{value:r,onChange:a,onSelect:y,children:({getInputProps:m,suggestions:O,getSuggestionItemProps:T})=>V.jsxs(kn,{value:r,onChange:y,children:[V.jsxs("div",{className:"relative",children:[V.jsx(Nt,{className:"pointer-events-none absolute left-3.5 top-3.5 h-5 w-5 text-cu-black-400","aria-hidden":"true"}),V.jsx(tt,{className:"w-full h-12 pl-10 pr-4 bg-white border rounded-lg border-cu-black-200 text-cu-black-800 placeholder-cu-black-400 focus:border-cu-black-400 focus:outline-none focus:ring-0 sm:text-sm",...m({placeholder:"Type address"})}),r&&V.jsx(kt,{className:"absolute right-3.5 top-3.5 h-5 w-5 text-cu-black-400","aria-hidden":"true",onClick:()=>{a("")}})]}),V.jsx(nt,{className:"mt-3 max-h-80 divide-y divide-cu-black-100 overflow-y-auto bg-white px-1.5 text-sm text-cu-black-800",children:O.map(M=>V.jsx(ot,{value:M,children:({active:P})=>V.jsx("ul",{children:V.jsx("li",{...T(M),className:`p-4 text-cu-black-600 hover:cursor-pointer ${P?"bg-cu-black-50 text-cu-black-900":"bg-white"}`,children:M.description})})},M.index))})]})})})};fo.__docgenInfo={description:"",methods:[],displayName:"LocationPicker",props:{posCallback:{required:!1,tsType:{name:"signature",type:"function",raw:"(pos: { name: string; id: string; position: object }[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ name: string; id: string; position: object }",signature:{properties:[{key:"name",value:{name:"string",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"position",value:{name:"object",required:!0}}]}}],raw:"{ name: string; id: string; position: object }[]"},name:"pos"}],return:{name:"void"}}},description:""},centerCallback:{required:!1,tsType:{name:"signature",type:"function",raw:"(center: { lat: number; lng: number }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ lat: number; lng: number }",signature:{properties:[{key:"lat",value:{name:"number",required:!0}},{key:"lng",value:{name:"number",required:!0}}]}},name:"center"}],return:{name:"void"}}},description:""},singleMarker:{required:!1,tsType:{name:"boolean"},description:""},singleMarkerCallback:{required:!1,tsType:{name:"signature",type:"function",raw:"(marker: { coordinates: { lat: number; lng: number }; address: string }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ coordinates: { lat: number; lng: number }; address: string }",signature:{properties:[{key:"coordinates",value:{name:"signature",type:"object",raw:"{ lat: number; lng: number }",signature:{properties:[{key:"lat",value:{name:"number",required:!0}},{key:"lng",value:{name:"number",required:!0}}]},required:!0}},{key:"address",value:{name:"string",required:!0}}]}},name:"marker"}],return:{name:"void"}}},description:""},eventLatitude:{required:!1,tsType:{name:"number"},description:""},eventLongitude:{required:!1,tsType:{name:"number"},description:""},eventAddress:{required:!1,tsType:{name:"string"},description:""}}};export{fo as L};
