import{r as l,R as d}from"./index-ec8b93d8.js";import{s as P,e as $,c as T,p as M}from"./keyboard-c534a18f.js";import{s as R,b as f,t as w,D as h,y as E,T as S,f as C,a as F,l as v,X as g}from"./open-closed-50e7a81e.js";import{r as L}from"./index-73f8b247.js";var N=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(N||{});function z(){let e=l.useRef(0);return P("keydown",r=>{r.key==="Tab"&&(e.current=r.shiftKey?1:0)},!0),e}function m(...e){return l.useMemo(()=>$(...e),[...e])}function J(e,r,o,u){let a=R(o);l.useEffect(()=>{e=e??window;function s(n){a.current(n)}return e.addEventListener(r,s,u),()=>e.removeEventListener(r,s,u)},[e,r,u])}function k(e){let r=f(e),o=l.useRef(!1);l.useEffect(()=>(o.current=!1,()=>{o.current=!0,w(()=>{o.current&&r()})}),[r])}let b=l.createContext(!1);function D(){return l.useContext(b)}function Q(e){return d.createElement(b.Provider,{value:e.force},e.children)}function H(e){let r=D(),o=l.useContext(x),u=m(e),[a,s]=l.useState(()=>{if(!r&&o!==null||C.isServer)return null;let n=u==null?void 0:u.getElementById("headlessui-portal-root");if(n)return n;if(u===null)return null;let t=u.createElement("div");return t.setAttribute("id","headlessui-portal-root"),u.body.appendChild(t)});return l.useEffect(()=>{a!==null&&(u!=null&&u.body.contains(a)||u==null||u.body.appendChild(a))},[a,u]),l.useEffect(()=>{r||o!==null&&s(o.current)},[o,s,r]),a}let A=l.Fragment;function B(e,r){let o=e,u=l.useRef(null),a=E(S(i=>{u.current=i}),r),s=m(u),n=H(u),[t]=l.useState(()=>{var i;return C.isServer?null:(i=s==null?void 0:s.createElement("div"))!=null?i:null}),c=l.useContext(p),y=F();return v(()=>{!n||!t||n.contains(t)||(t.setAttribute("data-headlessui-portal",""),n.appendChild(t))},[n,t]),v(()=>{if(t&&c)return c.register(t)},[c,t]),k(()=>{var i;!n||!t||(t instanceof Node&&n.contains(t)&&n.removeChild(t),n.childNodes.length<=0&&((i=n.parentElement)==null||i.removeChild(n)))}),y?!n||!t?null:L.createPortal(g({ourProps:{ref:a},theirProps:o,defaultTag:A,name:"Portal"}),t):null}let j=l.Fragment,x=l.createContext(null);function G(e,r){let{target:o,...u}=e,a={ref:E(r)};return d.createElement(x.Provider,{value:o},g({ourProps:a,theirProps:u,defaultTag:j,name:"Popover.Group"}))}let p=l.createContext(null);function V(){let e=l.useContext(p),r=l.useRef([]),o=f(s=>(r.current.push(s),e&&e.register(s),()=>u(s))),u=f(s=>{let n=r.current.indexOf(s);n!==-1&&r.current.splice(n,1),e&&e.unregister(s)}),a=l.useMemo(()=>({register:o,unregister:u,portals:r}),[o,u,r]);return[r,l.useMemo(()=>function({children:s}){return d.createElement(p.Provider,{value:a},s)},[a])]}let I=h(B),O=h(G),W=Object.assign(I,{Group:O});function Y({defaultContainers:e=[],portals:r}={}){let o=l.useRef(null),u=m(o),a=f(()=>{var s;let n=[];for(let t of e)t!==null&&(t instanceof HTMLElement?n.push(t):"current"in t&&t.current instanceof HTMLElement&&n.push(t.current));if(r!=null&&r.current)for(let t of r.current)n.push(t);for(let t of(s=u==null?void 0:u.querySelectorAll("html > *, body > *"))!=null?s:[])t!==document.body&&t!==document.head&&t instanceof HTMLElement&&t.id!=="headlessui-portal-root"&&(t.contains(o.current)||n.some(c=>t.contains(c))||n.push(t));return n});return{resolveContainers:a,contains:f(s=>a().some(n=>n.contains(s))),mainTreeNodeRef:o,MainTreeNode:l.useMemo(()=>function(){return d.createElement(T,{features:M.Hidden,ref:o})},[o])}}export{J as E,Q as P,V as a,z as b,k as c,W as d,m as n,Y as p,N as s};
//# sourceMappingURL=use-root-containers-cd4bc64b.js.map
