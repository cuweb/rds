var p=Object.defineProperty;var g=(a,s,e)=>s in a?p(a,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[s]=e;var n=(a,s,e)=>g(a,typeof s!="symbol"?s+"":s,e);import{j as i}from"./jsx-runtime-Cf8x2fCZ.js";import{e as v,r as b}from"./index-DDmFEvuO.js";class x{constructor(s){n(this,"parentElement");n(this,"dropdowns");this.parentElement=s,this.dropdowns=this.parentElement.querySelectorAll(".cu-filter__dropdown"),this.dropdownsClick()}dropdownsClick(){this.dropdowns&&this.dropdowns.forEach(s=>{this.dropdownsClickHandler(s)})}dropdownsClickHandler(s){const e=s.querySelector(".cu-filter__dropdown-toggle"),t=s.querySelector(".cu-filter__dropdown-arrow"),r=s.querySelector(".cu-filter__dropdown-menu");e&&r&&(e.addEventListener("click",l=>{l.stopPropagation();const o=r.classList.contains("hidden");if(!o){this.closeAllDropdowns();return}this.closeAllDropdowns(),r.classList.toggle("hidden",!o),o?this.alignDropdowns(r):(r.style.left="",r.style.right=""),t&&t.classList.toggle("rotate-180",o);const c=e.attributes.getNamedItem("aria-expanded");c&&(c.value=o.toString());const f=e.attributes.getNamedItem("aria-haspopup");f&&(f.value=o.toString())}),document.addEventListener("click",l=>{s.contains(l.target)||(r.classList.add("hidden"),t&&t.classList.remove("rotate-180"))}),r.addEventListener("click",l=>{l.stopPropagation()}))}alignDropdowns(s){const{right:e,left:t}=s.getBoundingClientRect(),r=this.parentElement.offsetWidth;e>r&&Object.assign(s.style,{right:"-16px",left:"auto"}),t<0&&Object.assign(s.style,{left:"-16px",right:"auto"})}closeAllDropdowns(){this.dropdowns.forEach(s=>{const e=s.querySelector(".cu-filter__dropdown-menu"),t=s.querySelector(".cu-filter__dropdown-arrow");e&&e.classList.add("hidden"),t&&t.classList.remove("rotate-180")})}destroy(){console.log("Destroying dropdowns"),this.closeAllDropdowns()}}class y extends x{constructor(e){super(e);n(this,"filter");n(this,"sortingItems");n(this,"filteringItems");n(this,"activeFilterPanel");n(this,"activeFilterRemoveBtns");n(this,"_activeFilterItems",{sortBy:"",filterBy:[]});this.filter=e,this.sortingItems=this.filter.querySelectorAll(".cu-filter__sorting-item"),this.filteringItems=this.filter.querySelectorAll(".cu-filter__filtering-item"),this.activeFilterPanel=this.filter.querySelector(".cu-filter__active-filter-panel"),this.activeFilterRemoveBtns=this.filter.querySelectorAll(".cu-filter__active-filter-remove"),this.init()}init(){this.activeSortItemLoad(),this.sortItemClick(),this.activeFilterItemLoad(),this.filterItemClick(),this.activeFilterRemoveBtnsClick()}activeFilterItemLoad(){this.filteringItems&&this.filteringItems.forEach(e=>{this.filterItemClickHandler(e)})}activeSortItemLoad(){this.sortingItems&&this.sortingItems.forEach(e=>{e.getAttribute("data-selected")==="true"&&(this._activeFilterItems.sortBy=e.getAttribute("data-sort")||"")})}sortItemClick(){this.sortingItems&&this.sortingItems.forEach(e=>{e.addEventListener("click",t=>{t.stopPropagation();const r=t.currentTarget;this.sortItemClickHandler(r)})})}filterItemClick(){this.filteringItems&&this.filteringItems.forEach(e=>{e.addEventListener("click",t=>{t.stopPropagation();const r=t.target;this.filterItemClickHandler(r)})})}activeFilterRemoveBtnsClick(){this.activeFilterRemoveBtns&&this.activeFilterRemoveBtns.forEach(e=>{e.addEventListener("click",t=>{t.stopPropagation();const l=t.currentTarget.getAttribute("data-label");l&&(this._activeFilterItems.filterBy=this._activeFilterItems.filterBy.filter(o=>o!==l),this.unselectFilterItem(l),this.removeFromActiveFilterPanel(l))})})}sortItemClickHandler(e){this.unselectSortItem();const t=e.getAttribute("data-sort");e.setAttribute("data-selected","true"),e.classList.add("bg-gray-100"),this._activeFilterItems.sortBy=t||"",this.closeAllDropdowns()}unselectSortItem(){this.sortingItems&&this.sortingItems.forEach(e=>{e&&(e.setAttribute("data-selected","false"),e.classList.remove("bg-gray-100"))})}filterItemClickHandler(e){const t=e.getAttribute("data-label");t&&(e.checked?(this._activeFilterItems.filterBy.push(t),this.addToActiveFilterPanel(t)):(this._activeFilterItems.filterBy=this._activeFilterItems.filterBy.filter(r=>r!==t),this.removeFromActiveFilterPanel(t)))}addToActiveFilterPanel(e){if(!this.activeFilterPanel||!e)return;const t=`<div class="flex items-center gap-0.5 pl-3 pe-2 py-1 border rounded-lg border-cu-black-100">
          <span>${e}</span>
          <button
            type="button"
            class="cu-filter__active-filter-remove flex flex-shrink-0 w-4 h-4 p-1 ml-1 rounded-full text-cu-black-400 hover:bg-cu-red hover:text-white"
            data-label="${e}"
          >
            <span class="sr-only">Remove filter for ${e}</span>
            <svg class="w-2 h-2" stroke="currentColor" fill="none" viewBox="0 0 8 8">
              <path strokeLinecap="round" strokeWidth="1.5" d="M1 1l6 6m0-6L1 7"></path>
            </svg>
          </button>
        </div>`;this.activeFilterPanel.insertAdjacentHTML("beforeend",t),this.activeFilterRemoveBtns=this.filter.querySelectorAll(".cu-filter__active-filter-remove"),this.activeFilterRemoveBtnsClick()}removeFromActiveFilterPanel(e){var r;if(!this.activeFilterPanel||!e)return;const t=this.activeFilterPanel.querySelector(`[data-label="${e}"]`);if(t){(r=t.parentElement)==null||r.remove();const l=t.getAttribute("data-label");if(!l)return;this.unselectFilterItem(l)}}get activeFilterItems(){return this._activeFilterItems}unselectFilterItem(e){e&&this.filteringItems.forEach(t=>{t&&t.getAttribute("data-label")==e&&(t.checked=!1)})}unselectAllFilterMenuItems(){this.filteringItems&&(this.filteringItems.forEach(e=>{const t=e.querySelector('input[type="checkbox"]');if(t){const r=t.getAttribute("data-label");t.checked=!1,r&&this.removeFromActiveFilterPanel(r)}}),this._activeFilterItems.filterBy=[])}destroy(){this.unselectAllFilterMenuItems()}}const w=()=>{const a=document.querySelectorAll(".cu-filter");if(!a)return;const s=[];return a.forEach(e=>{const t=new y(e),r=t.activeFilterItems;console.log("Keep for the reference and future use in API",r),s.push(t)}),{destroy:()=>{s.forEach(e=>e.destroy())}}},d=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",className:"cu-filter__dropdown-arrow flex-shrink-0 w-5 h-5 ml-1 text-cu-black-300 group-hover:text-cu-black-600 ease-in-out duration-300",children:i.jsx("path",{fillRule:"evenodd",d:"M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"})}),u=({sortOptions:a,filterOptions:s})=>{const e="cu-filter__dropdown relative",t="cu-filter__dropdown-toggle inline-flex justify-center text-sm font-medium text-cu-black-800 group hover:text-cu-red";return i.jsx("div",{className:"border rounded-tl-lg rounded-tr-lg border-cu-black-100 bg-gray-50 px-4 py-4 sm:px-6",children:i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[a&&i.jsxs("div",{className:e,children:[i.jsxs("button",{className:t,type:"button",id:"sortMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:["Sort",i.jsx(d,{})]}),i.jsx("ul",{className:"cu-filter__dropdown-menu hidden not-prose list-none absolute z-10 left-0 w-40 mt-2 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none","aria-labelledby":"sortMenuButton",children:a.map((r,l)=>i.jsx("li",{className:"!my-0",children:i.jsx("button",{type:"button","data-selected":r.selected,"data-sort":r.value,className:`cu-filter__sorting-item text-cu-black-600 block px-4 py-2 hover:bg-gray-200 w-full text-start ${r.selected?"bg-gray-100":""}`,children:r.label})},l))})]}),s&&i.jsx("div",{className:"ms-auto",children:i.jsx("div",{className:"flex flex-wrap items-center gap-3 sm:gap-4",children:s.map((r,l)=>i.jsxs(v.Fragment,{children:[i.jsxs("div",{className:e,children:[i.jsxs("button",{className:t,type:"button",id:`${r.id}MenuButton`,"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:[r.name,i.jsx(d,{})]}),i.jsx("ul",{className:"cu-filter__dropdown-menu hidden not-prose list-none absolute z-10 left-0 mt-2 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none p-3 sm:p-4 w-32 sm:w-40","aria-labelledby":`${r.id}MenuButton`,children:r.options.map((o,c)=>i.jsxs("li",{className:`flex items-center ${c!==r.options.length-1?"mb-4":""}`,children:[i.jsx("input",{id:`filter-${o.value}-${l}`,name:`${r.id}[]`,type:"checkbox",defaultChecked:o.checked,className:"cu-filter__filtering-item w-4 h-4 rounded border-cu-black-200 text-cu-red focus:ring-cu-red-100",value:o.value,"data-label":o.label}),i.jsx("label",{htmlFor:`filter-${o.value}-${l}`,className:"pr-6 ml-3 text-sm text-cu-black-600",children:o.label})]},c))})]}),l<s.length-1&&i.jsx("span",{className:"border-l border-cu-black-100 h-8 w-[1px]"})]},l))})})]})})};u.displayName="FilterPanel.Top";d.__docgenInfo={description:"",methods:[],displayName:"DropDownSVG"};u.__docgenInfo={description:"",methods:[],displayName:"FilterPanel.Top",props:{children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},sortOptions:{required:!1,tsType:{name:"Array",elements:[{name:"SortOptions"}],raw:"SortOptions[]"},description:""},filterOptions:{required:!1,tsType:{name:"Array",elements:[{name:"FilterOptions"}],raw:"FilterOptions[]"},description:""}}};const m=()=>i.jsxs("div",{className:"flex items-start text-sm text-cu-black-600 border border-t-0 rounded-bl-lg rounded-br-lg border-cu-black-100 px-4 py-4 sm:px-6 sm:py-5 gap-x-4 sm:gap-x-5 gap-y-3",children:[i.jsxs("div",{className:"flex items-center gap-x-4 sm:gap-x-5 gap-y-3",children:[i.jsx("span",{children:"Filters"}),i.jsx("span",{className:"border-l border-cu-black-100 h-7 w-[1px]"})]}),i.jsx("div",{className:"cu-filter__active-filter-panel flex flex-wrap items-center gap-3"})]});m.displayName="FilterPanel.Bottom";m.__docgenInfo={description:"",methods:[],displayName:"FilterPanel.Bottom"};const h=({children:a})=>(b.useEffect(()=>{const s=w();return()=>{s&&typeof s.destroy=="function"&&s.destroy()}},[]),i.jsx("div",{className:"cu-filter text-sm font-medium",children:a})),k=Object.assign(h,{Top:u,Bottom:m});h.__docgenInfo={description:"",methods:[],displayName:"FilterPanelWrapper",props:{children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};export{k as F};
