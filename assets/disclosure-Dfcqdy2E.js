import{R as b,r as n}from"./index-CBqU2yxZ.js";import{O as B,U as E,y as $,T as A,o as g,a as F,u as T,d as v,C as R,I as K,b as N}from"./transition-Dz28ezoH.js";import{I as L,d as H,o as k,r as j}from"./use-root-containers-CiCts8xM.js";import{T as Q}from"./use-resolve-button-type-BHDntMkD.js";var M;let V=(M=b.startTransition)!=null?M:function(e){e()};var Y=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Y||{}),Z=(e=>(e[e.ToggleDisclosure=0]="ToggleDisclosure",e[e.CloseDisclosure=1]="CloseDisclosure",e[e.SetButtonId=2]="SetButtonId",e[e.SetPanelId=3]="SetPanelId",e[e.LinkPanel=4]="LinkPanel",e[e.UnlinkPanel=5]="UnlinkPanel",e))(Z||{});let _={0:e=>({...e,disclosureState:T(e.disclosureState,{0:1,1:0})}),1:e=>e.disclosureState===1?e:{...e,disclosureState:1},4(e){return e.linkedPanel===!0?e:{...e,linkedPanel:!0}},5(e){return e.linkedPanel===!1?e:{...e,linkedPanel:!1}},2(e,t){return e.buttonId===t.buttonId?e:{...e,buttonId:t.buttonId}},3(e,t){return e.panelId===t.panelId?e:{...e,panelId:t.panelId}}},x=n.createContext(null);x.displayName="DisclosureContext";function h(e){let t=n.useContext(x);if(t===null){let a=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,h),a}return t}let w=n.createContext(null);w.displayName="DisclosureAPIContext";function U(e){let t=n.useContext(w);if(t===null){let a=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,U),a}return t}let O=n.createContext(null);O.displayName="DisclosurePanelContext";function q(){return n.useContext(O)}function z(e,t){return T(t.type,_,e,t)}let G=n.Fragment;function J(e,t){let{defaultOpen:a=!1,...i}=e,m=n.useRef(null),l=$(t,A(u=>{m.current=u},e.as===void 0||e.as===n.Fragment)),r=n.useRef(null),f=n.useRef(null),s=n.useReducer(z,{disclosureState:a?0:1,linkedPanel:!1,buttonRef:f,panelRef:r,buttonId:null,panelId:null}),[{disclosureState:p,buttonId:c},y]=s,d=g(u=>{y({type:1});let S=H(m);if(!S||!c)return;let o=u?u instanceof HTMLElement?u:u.current instanceof HTMLElement?u.current:S.getElementById(c):S.getElementById(c);o==null||o.focus()}),I=n.useMemo(()=>({close:d}),[d]),P=n.useMemo(()=>({open:p===0,close:d}),[p,d]),C={ref:l};return b.createElement(x.Provider,{value:s},b.createElement(w.Provider,{value:I},b.createElement(F,{value:T(p,{0:v.Open,1:v.Closed})},R({ourProps:C,theirProps:i,slot:P,defaultTag:G,name:"Disclosure"}))))}let W="button";function X(e,t){let a=L(),{id:i=`headlessui-disclosure-button-${a}`,...m}=e,[l,r]=h("Disclosure.Button"),f=q(),s=f===null?!1:f===l.panelId,p=n.useRef(null),c=$(p,t,s?null:l.buttonRef),y=K();n.useEffect(()=>{if(!s)return r({type:2,buttonId:i}),()=>{r({type:2,buttonId:null})}},[i,r,s]);let d=g(o=>{var D;if(s){if(l.disclosureState===1)return;switch(o.key){case k.Space:case k.Enter:o.preventDefault(),o.stopPropagation(),r({type:0}),(D=l.buttonRef.current)==null||D.focus();break}}else switch(o.key){case k.Space:case k.Enter:o.preventDefault(),o.stopPropagation(),r({type:0});break}}),I=g(o=>{switch(o.key){case k.Space:o.preventDefault();break}}),P=g(o=>{var D;j(o.currentTarget)||e.disabled||(s?(r({type:0}),(D=l.buttonRef.current)==null||D.focus()):r({type:0}))}),C=n.useMemo(()=>({open:l.disclosureState===0}),[l]),u=Q(e,p),S=s?{ref:c,type:u,onKeyDown:d,onClick:P}:{ref:c,id:i,type:u,"aria-expanded":l.disclosureState===0,"aria-controls":l.linkedPanel?l.panelId:void 0,onKeyDown:d,onKeyUp:I,onClick:P};return R({mergeRefs:y,ourProps:S,theirProps:m,slot:C,defaultTag:W,name:"Disclosure.Button"})}let ee="div",te=B.RenderStrategy|B.Static;function ne(e,t){let a=L(),{id:i=`headlessui-disclosure-panel-${a}`,...m}=e,[l,r]=h("Disclosure.Panel"),{close:f}=U("Disclosure.Panel"),s=K(),p=$(t,l.panelRef,P=>{V(()=>r({type:P?4:5}))});n.useEffect(()=>(r({type:3,panelId:i}),()=>{r({type:3,panelId:null})}),[i,r]);let c=N(),y=c!==null?(c&v.Open)===v.Open:l.disclosureState===0,d=n.useMemo(()=>({open:l.disclosureState===0,close:f}),[l,f]),I={ref:p,id:i};return b.createElement(O.Provider,{value:l.panelId},R({mergeRefs:s,ourProps:I,theirProps:m,slot:d,defaultTag:ee,features:te,visible:y,name:"Disclosure.Panel"}))}let le=E(J),re=E(X),oe=E(ne),ce=Object.assign(le,{Button:re,Panel:oe});export{ce as A};
