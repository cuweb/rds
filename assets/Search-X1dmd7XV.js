import{j as C}from"./jsx-runtime-vNq4Oc-g.js";import{r as f,R as N}from"./index-4g5l5LRQ.js";import{j as De}from"./optionClasses-BVitpQvL.js";import{L as Ae}from"./Link-2TUC2Gpg.js";import{m as he,t as xe,_ as Oe}from"./dialog-_bgwye2m.js";import{r as _e}from"./index-jmm5gWkb.js";import{s as Te,l as L,o as O,O as ye,U as Z,u as J,p as pe,a as Le,d as oe,x as Ne,C as G,y as Y,b as Ve,c as Se,q as ce}from"./transition-Gh--TBV_.js";import{y as Be,b as Ke,s as qe,I as Q,n as Ue,o as A,r as Xe,k as Je,j as Ze}from"./use-root-containers-zPP06tnb.js";import{T as Ge}from"./use-resolve-button-type-39X7o1GN.js";import{F as He,u as Ye,c as E,f as Ie}from"./calculate-active-index-dTyzoF5M.js";function Qe({title:n,titleId:i,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},e),n?f.createElement("title",{id:i},n):null,f.createElement("path",{fillRule:"evenodd",d:"M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z",clipRule:"evenodd"}))}const We=f.forwardRef(Qe),Re=We;function et({title:n,titleId:i,...e},t){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},e),n?f.createElement("title",{id:i},n):null,f.createElement("path",{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const tt=f.forwardRef(et),nt=tt;/**
 * react-virtual
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function re(){return re=Object.assign?Object.assign.bind():function(n){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}return n},re.apply(this,arguments)}/**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ie(){return ie=Object.assign?Object.assign.bind():function(n){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}return n},ie.apply(this,arguments)}/**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function X(n,i,e){var t,o=(t=e.initialDeps)!=null?t:[],r;return function(){var a;e.key&&e.debug!=null&&e.debug()&&(a=Date.now());var s=n(),c=s.length!==o.length||s.some(function(m,g){return o[g]!==m});if(!c)return r;o=s;var u;if(e.key&&e.debug!=null&&e.debug()&&(u=Date.now()),r=i.apply(void 0,s),e.key&&e.debug!=null&&e.debug()){var v=Math.round((Date.now()-a)*100)/100,p=Math.round((Date.now()-u)*100)/100,h=p/16,l=function(g,y){for(g=String(g);g.length<y;)g=" "+g;return g};console.info("%câ± "+l(p,5)+" /"+l(v,5)+" ms",`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(`+Math.max(0,Math.min(120-120*h,120))+"deg 100% 31%);",e==null?void 0:e.key)}return e==null||e.onChange==null||e.onChange(r),r}}function de(n,i){if(n===void 0)throw new Error("Unexpected undefined"+(i?": "+i:""));return n}var ot=function(i,e){return Math.abs(i-e)<1};/**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var rt=function(i){return i},it=function(i){for(var e=Math.max(i.startIndex-i.overscan,0),t=Math.min(i.endIndex+i.overscan,i.count-1),o=[],r=e;r<=t;r++)o.push(r);return o},at=function(i,e){var t=i.scrollElement;if(t){var o=function(s){var c=s.width,u=s.height;e({width:Math.round(c),height:Math.round(u)})};o(t.getBoundingClientRect());var r=new ResizeObserver(function(a){var s=a[0];if(s!=null&&s.borderBoxSize){var c=s.borderBoxSize[0];if(c){o({width:c.inlineSize,height:c.blockSize});return}}o(t.getBoundingClientRect())});return r.observe(t,{box:"border-box"}),function(){r.unobserve(t)}}},lt=function(i,e){var t=i.scrollElement;if(t){var o=function(){e(t[i.options.horizontal?"scrollLeft":"scrollTop"])};return o(),t.addEventListener("scroll",o,{passive:!0}),function(){t.removeEventListener("scroll",o)}}},st=function(i,e,t){if(e!=null&&e.borderBoxSize){var o=e.borderBoxSize[0];if(o){var r=Math.round(o[t.options.horizontal?"inlineSize":"blockSize"]);return r}}return Math.round(i.getBoundingClientRect()[t.options.horizontal?"width":"height"])},ut=function(i,e,t){var o,r,a=e.adjustments,s=a===void 0?0:a,c=e.behavior,u=i+s;(o=t.scrollElement)==null||o.scrollTo==null||o.scrollTo((r={},r[t.options.horizontal?"left":"top"]=u,r.behavior=c,r))},ct=function(i){var e=this;this.unsubs=[],this.scrollElement=null,this.isScrolling=!1,this.isScrollingTimeoutId=null,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollDirection=null,this.scrollAdjustments=0,this.measureElementCache=new Map,this.observer=function(){var t=null,o=function(){return t||(typeof ResizeObserver<"u"?t=new ResizeObserver(function(a){a.forEach(function(s){e._measureElement(s.target,s)})}):null)};return{disconnect:function(){var a;return(a=o())==null?void 0:a.disconnect()},observe:function(a){var s;return(s=o())==null?void 0:s.observe(a,{box:"border-box"})},unobserve:function(a){var s;return(s=o())==null?void 0:s.unobserve(a)}}}(),this.range=null,this.setOptions=function(t){Object.entries(t).forEach(function(o){var r=o[0],a=o[1];typeof a>"u"&&delete t[r]}),e.options=ie({debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:rt,rangeExtractor:it,onChange:function(){},measureElement:st,initialRect:{width:0,height:0},scrollMargin:0,scrollingDelay:150,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1},t)},this.notify=function(t){e.options.onChange==null||e.options.onChange(e,t)},this.maybeNotify=X(function(){return e.calculateRange(),[e.isScrolling,e.range?e.range.startIndex:null,e.range?e.range.endIndex:null]},function(t){e.notify(t)},{key:!1,debug:function(){return e.options.debug},initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=function(){e.unsubs.filter(Boolean).forEach(function(t){return t()}),e.unsubs=[],e.scrollElement=null},this._didMount=function(){return e.measureElementCache.forEach(e.observer.observe),function(){e.observer.disconnect(),e.cleanup()}},this._willUpdate=function(){var t=e.options.getScrollElement();e.scrollElement!==t&&(e.cleanup(),e.scrollElement=t,e._scrollToOffset(e.scrollOffset,{adjustments:void 0,behavior:void 0}),e.unsubs.push(e.options.observeElementRect(e,function(o){e.scrollRect=o,e.maybeNotify()})),e.unsubs.push(e.options.observeElementOffset(e,function(o){e.scrollAdjustments=0,e.scrollOffset!==o&&(e.isScrollingTimeoutId!==null&&(clearTimeout(e.isScrollingTimeoutId),e.isScrollingTimeoutId=null),e.isScrolling=!0,e.scrollDirection=e.scrollOffset<o?"forward":"backward",e.scrollOffset=o,e.maybeNotify(),e.isScrollingTimeoutId=setTimeout(function(){e.isScrollingTimeoutId=null,e.isScrolling=!1,e.scrollDirection=null,e.maybeNotify()},e.options.scrollingDelay))})))},this.getSize=function(){return e.scrollRect[e.options.horizontal?"width":"height"]},this.memoOptions=X(function(){return[e.options.count,e.options.paddingStart,e.options.scrollMargin,e.options.getItemKey]},function(t,o,r,a){return e.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:o,scrollMargin:r,getItemKey:a}},{key:!1}),this.getFurthestMeasurement=function(t,o){for(var r=new Map,a=new Map,s=o-1;s>=0;s--){var c=t[s];if(!r.has(c.lane)){var u=a.get(c.lane);if(u==null||c.end>u.end?a.set(c.lane,c):c.end<u.end&&r.set(c.lane,!0),r.size===e.options.lanes)break}}return a.size===e.options.lanes?Array.from(a.values()).sort(function(v,p){return v.end-p.end})[0]:void 0},this.getMeasurements=X(function(){return[e.memoOptions(),e.itemSizeCache]},function(t,o){var r=t.count,a=t.paddingStart,s=t.scrollMargin,c=t.getItemKey,u=e.pendingMeasuredCacheIndexes.length>0?Math.min.apply(Math,e.pendingMeasuredCacheIndexes):0;e.pendingMeasuredCacheIndexes=[];for(var v=e.measurementsCache.slice(0,u),p=u;p<r;p++){var h=c(p),l=e.options.lanes===1?v[p-1]:e.getFurthestMeasurement(v,p),m=l?l.end:a+s,g=o.get(h),y=typeof g=="number"?g:e.options.estimateSize(p),x=m+y,M=l?l.lane:p%e.options.lanes;v[p]={index:p,start:m,size:y,end:x,key:h,lane:M}}return e.measurementsCache=v,v},{key:!1,debug:function(){return e.options.debug}}),this.calculateRange=X(function(){return[e.getMeasurements(),e.getSize(),e.scrollOffset]},function(t,o,r){return e.range=t.length>0&&o>0?dt({measurements:t,outerSize:o,scrollOffset:r}):null},{key:!1,debug:function(){return e.options.debug}}),this.getIndexes=X(function(){return[e.options.rangeExtractor,e.calculateRange(),e.options.overscan,e.options.count]},function(t,o,r,a){return o===null?[]:t(ie({},o,{overscan:r,count:a}))},{key:!1,debug:function(){return e.options.debug}}),this.indexFromElement=function(t){var o=e.options.indexAttribute,r=t.getAttribute(o);return r?parseInt(r,10):(console.warn("Missing attribute name '"+o+"={index}' on measured element."),-1)},this._measureElement=function(t,o){var r=e.measurementsCache[e.indexFromElement(t)];if(!r||!t.isConnected){e.measureElementCache.forEach(function(c,u){c===t&&(e.observer.unobserve(t),e.measureElementCache.delete(u))});return}var a=e.measureElementCache.get(r.key);a!==t&&(a&&e.observer.unobserve(a),e.observer.observe(t),e.measureElementCache.set(r.key,t));var s=e.options.measureElement(t,o,e);e.resizeItem(r,s)},this.resizeItem=function(t,o){var r,a=(r=e.itemSizeCache.get(t.key))!=null?r:t.size,s=o-a;s!==0&&(t.start<e.scrollOffset&&e._scrollToOffset(e.scrollOffset,{adjustments:e.scrollAdjustments+=s,behavior:void 0}),e.pendingMeasuredCacheIndexes.push(t.index),e.itemSizeCache=new Map(e.itemSizeCache.set(t.key,o)),e.notify(!1))},this.measureElement=function(t){t&&e._measureElement(t,void 0)},this.getVirtualItems=X(function(){return[e.getIndexes(),e.getMeasurements()]},function(t,o){for(var r=[],a=0,s=t.length;a<s;a++){var c=t[a],u=o[c];r.push(u)}return r},{key:!1,debug:function(){return e.options.debug}}),this.getVirtualItemForOffset=function(t){var o=e.getMeasurements();return de(o[Ee(0,o.length-1,function(r){return de(o[r]).start},t)])},this.getOffsetForAlignment=function(t,o){var r=e.getSize();o==="auto"&&(t<=e.scrollOffset?o="start":t>=e.scrollOffset+r?o="end":o="start"),o==="start"?t=t:o==="end"?t=t-r:o==="center"&&(t=t-r/2);var a=e.options.horizontal?"scrollWidth":"scrollHeight",s=e.scrollElement?"document"in e.scrollElement?e.scrollElement.document.documentElement[a]:e.scrollElement[a]:0,c=s-e.getSize();return Math.max(Math.min(c,t),0)},this.getOffsetForIndex=function(t,o){o===void 0&&(o="auto"),t=Math.max(0,Math.min(t,e.options.count-1));var r=de(e.getMeasurements()[t]);if(o==="auto")if(r.end>=e.scrollOffset+e.getSize()-e.options.scrollPaddingEnd)o="end";else if(r.start<=e.scrollOffset+e.options.scrollPaddingStart)o="start";else return[e.scrollOffset,o];var a=o==="end"?r.end+e.options.scrollPaddingEnd:r.start-e.options.scrollPaddingStart;return[e.getOffsetForAlignment(a,o),o]},this.isDynamicMode=function(){return e.measureElementCache.size>0},this.cancelScrollToIndex=function(){e.scrollToIndexTimeoutId!==null&&(clearTimeout(e.scrollToIndexTimeoutId),e.scrollToIndexTimeoutId=null)},this.scrollToOffset=function(t,o){var r=o===void 0?{}:o,a=r.align,s=a===void 0?"start":a,c=r.behavior;e.cancelScrollToIndex(),c==="smooth"&&e.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),e._scrollToOffset(e.getOffsetForAlignment(t,s),{adjustments:void 0,behavior:c})},this.scrollToIndex=function(t,o){var r=o===void 0?{}:o,a=r.align,s=a===void 0?"auto":a,c=r.behavior;t=Math.max(0,Math.min(t,e.options.count-1)),e.cancelScrollToIndex(),c==="smooth"&&e.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");var u=e.getOffsetForIndex(t,s),v=u[0],p=u[1];e._scrollToOffset(v,{adjustments:void 0,behavior:c}),c!=="smooth"&&e.isDynamicMode()&&(e.scrollToIndexTimeoutId=setTimeout(function(){e.scrollToIndexTimeoutId=null;var h=e.measureElementCache.has(e.options.getItemKey(t));if(h){var l=e.getOffsetForIndex(t,p),m=l[0];ot(m,e.scrollOffset)||e.scrollToIndex(t,{align:p,behavior:c})}else e.scrollToIndex(t,{align:p,behavior:c})}))},this.scrollBy=function(t,o){var r=o===void 0?{}:o,a=r.behavior;e.cancelScrollToIndex(),a==="smooth"&&e.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),e._scrollToOffset(e.scrollOffset+t,{adjustments:void 0,behavior:a})},this.getTotalSize=function(){var t;return(((t=e.getMeasurements()[e.options.count-1])==null?void 0:t.end)||e.options.paddingStart)-e.options.scrollMargin+e.options.paddingEnd},this._scrollToOffset=function(t,o){var r=o.adjustments,a=o.behavior;e.options.scrollToFn(t,{behavior:a,adjustments:r},e)},this.measure=function(){e.itemSizeCache=new Map,e.notify(!1)},this.setOptions(i),this.scrollRect=this.options.initialRect,this.scrollOffset=this.options.initialOffset,this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(function(t){e.itemSizeCache.set(t.key,t.size)}),this.maybeNotify()},Ee=function(i,e,t,o){for(;i<=e;){var r=(i+e)/2|0,a=t(r);if(a<o)i=r+1;else if(a>o)e=r-1;else return r}return i>0?i-1:0};function dt(n){for(var i=n.measurements,e=n.outerSize,t=n.scrollOffset,o=i.length-1,r=function(u){return i[u].start},a=Ee(0,o,r,t),s=a;s<o&&i[s].end<t+e;)s++;return{startIndex:a,endIndex:s}}/**
 * react-virtual
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ft=typeof document<"u"?f.useLayoutEffect:f.useEffect;function pt(n){var i=f.useReducer(function(){return{}},{})[1],e=re({},n,{onChange:function(a,s){s?_e.flushSync(i):i(),n.onChange==null||n.onChange(a,s)}}),t=f.useState(function(){return new ct(e)}),o=t[0];return o.setOptions(e),f.useEffect(function(){return o._didMount()},[]),ft(function(){return o._willUpdate()}),o}function vt(n){return pt(re({observeElementRect:at,observeElementOffset:lt,scrollToFn:ut},n))}function ve(n,i){let[e,t]=f.useState(n),o=Te(n);return L(()=>t(o.current),[o,t,...i]),e}function mt(n,i,e){let[t,o]=f.useState(e),r=n!==void 0,a=f.useRef(r),s=f.useRef(!1),c=f.useRef(!1);return r&&!a.current&&!s.current?(s.current=!0,a.current=r,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!r&&a.current&&!c.current&&(c.current=!0,a.current=r,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[r?n:t,O(u=>(r||o(u),i==null?void 0:i(u)))]}function we(n={},i=null,e=[]){for(let[t,o]of Object.entries(n))$e(e,Me(i,t),o);return e}function Me(n,i){return n?n+"["+i+"]":i}function $e(n,i,e){if(Array.isArray(e))for(let[t,o]of e.entries())$e(n,Me(i,t.toString()),o);else e instanceof Date?n.push([i,e.toISOString()]):typeof e=="boolean"?n.push([i,e?"1":"0"]):typeof e=="string"?n.push([i,e]):typeof e=="number"?n.push([i,`${e}`]):e==null?n.push([i,""]):we(e,i,n)}var bt={},gt=(n=>(n[n.Open=0]="Open",n[n.Closed=1]="Closed",n))(gt||{}),ht=(n=>(n[n.Single=0]="Single",n[n.Multi=1]="Multi",n))(ht||{}),xt=(n=>(n[n.Pointer=0]="Pointer",n[n.Focus=1]="Focus",n[n.Other=2]="Other",n))(xt||{}),Ot=(n=>(n[n.OpenCombobox=0]="OpenCombobox",n[n.CloseCombobox=1]="CloseCombobox",n[n.GoToOption=2]="GoToOption",n[n.RegisterOption=3]="RegisterOption",n[n.UnregisterOption=4]="UnregisterOption",n[n.RegisterLabel=5]="RegisterLabel",n[n.SetActivationTrigger=6]="SetActivationTrigger",n[n.UpdateVirtualOptions=7]="UpdateVirtualOptions",n))(Ot||{});function fe(n,i=e=>e){let e=n.activeOptionIndex!==null?n.options[n.activeOptionIndex]:null,t=i(n.options.slice()),o=t.length>0&&t[0].dataRef.current.order!==null?t.sort((a,s)=>a.dataRef.current.order-s.dataRef.current.order):Ze(t,a=>a.dataRef.current.domRef.current),r=e?o.indexOf(e):null;return r===-1&&(r=null),{options:o,activeOptionIndex:r}}let yt={1(n){var i;return(i=n.dataRef.current)!=null&&i.disabled||n.comboboxState===1?n:{...n,activeOptionIndex:null,comboboxState:1}},0(n){var i,e;if((i=n.dataRef.current)!=null&&i.disabled||n.comboboxState===0)return n;if((e=n.dataRef.current)!=null&&e.value){let t=n.dataRef.current.calculateIndex(n.dataRef.current.value);if(t!==-1)return{...n,activeOptionIndex:t,comboboxState:0}}return{...n,comboboxState:0}},2(n,i){var e,t,o,r,a;if((e=n.dataRef.current)!=null&&e.disabled||(t=n.dataRef.current)!=null&&t.optionsRef.current&&!((o=n.dataRef.current)!=null&&o.optionsPropsRef.current.static)&&n.comboboxState===1)return n;if(n.virtual){let v=i.focus===E.Specific?i.idx:Ie(i,{resolveItems:()=>n.virtual.options,resolveActiveIndex:()=>{var h,l;return(l=(h=n.activeOptionIndex)!=null?h:n.virtual.options.findIndex(m=>!n.virtual.disabled(m)))!=null?l:null},resolveDisabled:n.virtual.disabled,resolveId(){throw new Error("Function not implemented.")}}),p=(r=i.trigger)!=null?r:2;return n.activeOptionIndex===v&&n.activationTrigger===p?n:{...n,activeOptionIndex:v,activationTrigger:p}}let s=fe(n);if(s.activeOptionIndex===null){let v=s.options.findIndex(p=>!p.dataRef.current.disabled);v!==-1&&(s.activeOptionIndex=v)}let c=i.focus===E.Specific?i.idx:Ie(i,{resolveItems:()=>s.options,resolveActiveIndex:()=>s.activeOptionIndex,resolveId:v=>v.id,resolveDisabled:v=>v.dataRef.current.disabled}),u=(a=i.trigger)!=null?a:2;return n.activeOptionIndex===c&&n.activationTrigger===u?n:{...n,...s,activeOptionIndex:c,activationTrigger:u}},3:(n,i)=>{var e,t,o;if((e=n.dataRef.current)!=null&&e.virtual)return{...n,options:[...n.options,i.payload]};let r=i.payload,a=fe(n,c=>(c.push(r),c));n.activeOptionIndex===null&&(t=n.dataRef.current)!=null&&t.isSelected(i.payload.dataRef.current.value)&&(a.activeOptionIndex=a.options.indexOf(r));let s={...n,...a,activationTrigger:2};return(o=n.dataRef.current)!=null&&o.__demoMode&&n.dataRef.current.value===void 0&&(s.activeOptionIndex=0),s},4:(n,i)=>{var e;if((e=n.dataRef.current)!=null&&e.virtual)return{...n,options:n.options.filter(o=>o.id!==i.id)};let t=fe(n,o=>{let r=o.findIndex(a=>a.id===i.id);return r!==-1&&o.splice(r,1),o});return{...n,...t,activationTrigger:2}},5:(n,i)=>n.labelId===i.id?n:{...n,labelId:i.id},6:(n,i)=>n.activationTrigger===i.trigger?n:{...n,activationTrigger:i.trigger},7:(n,i)=>{var e;if(((e=n.virtual)==null?void 0:e.options)===i.options)return n;let t=n.activeOptionIndex;if(n.activeOptionIndex!==null){let o=i.options.indexOf(n.virtual.options[n.activeOptionIndex]);o!==-1?t=o:t=null}return{...n,activeOptionIndex:t,virtual:Object.assign({},n.virtual,{options:i.options})}}},me=f.createContext(null);me.displayName="ComboboxActionsContext";function W(n){let i=f.useContext(me);if(i===null){let e=new Error(`<${n} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(e,W),e}return i}let Pe=f.createContext(null);function St(n){var i;let e=B("VirtualProvider"),[t,o]=f.useMemo(()=>{let c=e.optionsRef.current;if(!c)return[0,0];let u=window.getComputedStyle(c);return[parseFloat(u.paddingBlockStart||u.paddingTop),parseFloat(u.paddingBlockEnd||u.paddingBottom)]},[e.optionsRef.current]),r=vt({scrollPaddingStart:t,scrollPaddingEnd:o,count:e.virtual.options.length,estimateSize(){return 40},getScrollElement(){var c;return(c=e.optionsRef.current)!=null?c:null},overscan:12}),[a,s]=f.useState(0);return L(()=>{s(c=>c+1)},[(i=e.virtual)==null?void 0:i.options]),N.createElement(Pe.Provider,{value:r},N.createElement("div",{style:{position:"relative",width:"100%",height:`${r.getTotalSize()}px`},ref:c=>{if(c){if(typeof process<"u"&&bt.JEST_WORKER_ID!==void 0||e.activationTrigger===0)return;e.activeOptionIndex!==null&&e.virtual.options.length>e.activeOptionIndex&&r.scrollToIndex(e.activeOptionIndex)}}},r.getVirtualItems().map(c=>{var u;return N.createElement(f.Fragment,{key:c.key},N.cloneElement((u=n.children)==null?void 0:u.call(n,{option:e.virtual.options[c.index],open:e.comboboxState===0}),{key:`${a}-${c.key}`,"data-index":c.index,"aria-setsize":e.virtual.options.length,"aria-posinset":c.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${c.start}px)`,overflowAnchor:"none"}}))})))}let be=f.createContext(null);be.displayName="ComboboxDataContext";function B(n){let i=f.useContext(be);if(i===null){let e=new Error(`<${n} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(e,B),e}return i}function It(n,i){return J(i.type,yt,n,i)}let Rt=f.Fragment;function Ct(n,i){let{value:e,defaultValue:t,onChange:o,form:r,name:a,by:s=null,disabled:c=!1,__demoMode:u=!1,nullable:v=!1,multiple:p=!1,immediate:h=!1,virtual:l=null,...m}=n,g=!1,y=null,[x=p?[]:void 0,M]=mt(e,o,t),[$,z]=f.useReducer(It,{dataRef:f.createRef(),comboboxState:u?0:1,options:[],virtual:null,activeOptionIndex:null,activationTrigger:2,labelId:null}),F=f.useRef(!1),K=f.useRef({static:!1,hold:!1}),q=f.useRef(null),U=f.useRef(null),H=f.useRef(null),R=f.useRef(null),I=O(typeof s=="string"?(b,S)=>{let k=s;return(b==null?void 0:b[k])===(S==null?void 0:S[k])}:s??((b,S)=>b===S)),j=O(b=>$.options.findIndex(S=>I(S.dataRef.current.value,b))),ae=f.useCallback(b=>J(d.mode,{1:()=>x.some(S=>I(S,b)),0:()=>I(x,b)}),[x]),le=O(b=>$.activeOptionIndex===j(b)),d=f.useMemo(()=>({...$,immediate:g,optionsPropsRef:K,labelRef:q,inputRef:U,buttonRef:H,optionsRef:R,value:x,defaultValue:t,disabled:c,mode:p?1:0,virtual:$.virtual,get activeOptionIndex(){if(F.current&&$.activeOptionIndex===null&&$.options.length>0){let b=$.options.findIndex(S=>!S.dataRef.current.disabled);if(b!==-1)return b}return $.activeOptionIndex},calculateIndex:j,compare:I,isSelected:ae,isActive:le,nullable:v,__demoMode:u}),[x,t,c,p,v,u,$,y]);L(()=>{},[y,void 0]),L(()=>{$.dataRef.current=d},[d]),Be([d.buttonRef,d.inputRef,d.optionsRef],()=>ue.closeCombobox(),d.comboboxState===0);let P=f.useMemo(()=>{var b,S,k;return{open:d.comboboxState===0,disabled:c,activeIndex:d.activeOptionIndex,activeOption:d.activeOptionIndex===null?null:d.virtual?d.virtual.options[(b=d.activeOptionIndex)!=null?b:0]:(k=(S=d.options[d.activeOptionIndex])==null?void 0:S.dataRef.current.value)!=null?k:null,value:x}},[d,c,x]),w=O(()=>{if(d.activeOptionIndex!==null){if(d.virtual)se(d.virtual.options[d.activeOptionIndex]);else{let{dataRef:b}=d.options[d.activeOptionIndex];se(b.current.value)}ue.goToOption(E.Specific,d.activeOptionIndex)}}),_=O(()=>{z({type:0}),F.current=!0}),T=O(()=>{z({type:1}),F.current=!1}),D=O((b,S,k)=>(F.current=!1,b===E.Specific?z({type:2,focus:E.Specific,idx:S,trigger:k}):z({type:2,focus:b,trigger:k}))),V=O((b,S)=>(z({type:3,payload:{id:b,dataRef:S}}),()=>{d.isActive(S.current.value)&&(F.current=!0),z({type:4,id:b})})),ze=O(b=>(z({type:5,id:b}),()=>z({type:5,id:null}))),se=O(b=>J(d.mode,{0(){return M==null?void 0:M(b)},1(){let S=d.value.slice(),k=S.findIndex(te=>I(te,b));return k===-1?S.push(b):S.splice(k,1),M==null?void 0:M(S)}})),Fe=O(b=>{z({type:6,trigger:b})}),ue=f.useMemo(()=>({onChange:se,registerOption:V,registerLabel:ze,goToOption:D,closeCombobox:T,openCombobox:_,setActivationTrigger:Fe,selectActiveOption:w}),[]),ke=i===null?{}:{ref:i},ee=f.useRef(null),je=pe();return f.useEffect(()=>{ee.current&&t!==void 0&&je.addEventListener(ee.current,"reset",()=>{M==null||M(t)})},[ee,M]),N.createElement(me.Provider,{value:ue},N.createElement(be.Provider,{value:d},N.createElement(Le,{value:J(d.comboboxState,{0:oe.Open,1:oe.Closed})},a!=null&&x!=null&&we({[a]:x}).map(([b,S],k)=>N.createElement(Ke,{features:qe.Hidden,ref:k===0?te=>{var ge;ee.current=(ge=te==null?void 0:te.closest("form"))!=null?ge:null}:void 0,...Ne({key:b,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:r,name:b,value:S})})),G({ourProps:ke,theirProps:m,slot:P,defaultTag:Rt,name:"Combobox"}))))}let Tt="input";function Et(n,i){var e,t,o,r,a;let s=Q(),{id:c=`headlessui-combobox-input-${s}`,onChange:u,displayValue:v,type:p="text",...h}=n,l=B("Combobox.Input"),m=W("Combobox.Input"),g=Y(l.inputRef,i),y=Ue(l.inputRef),x=f.useRef(!1),M=pe(),$=O(()=>{m.onChange(null),l.optionsRef.current&&(l.optionsRef.current.scrollTop=0),m.goToOption(E.Nothing)}),z=function(){var d;return typeof v=="function"&&l.value!==void 0?(d=v(l.value))!=null?d:"":typeof l.value=="string"?l.value:""}();he(([d,P],[w,_])=>{if(x.current)return;let T=l.inputRef.current;T&&((_===0&&P===1||d!==w)&&(T.value=d),requestAnimationFrame(()=>{if(x.current||!T||(y==null?void 0:y.activeElement)!==T)return;let{selectionStart:D,selectionEnd:V}=T;Math.abs((V??0)-(D??0))===0&&D===0&&T.setSelectionRange(T.value.length,T.value.length)}))},[z,l.comboboxState,y]),he(([d],[P])=>{if(d===0&&P===1){if(x.current)return;let w=l.inputRef.current;if(!w)return;let _=w.value,{selectionStart:T,selectionEnd:D,selectionDirection:V}=w;w.value="",w.value=_,V!==null?w.setSelectionRange(T,D,V):w.setSelectionRange(T,D)}},[l.comboboxState]);let F=f.useRef(!1),K=O(()=>{F.current=!0}),q=O(()=>{M.nextFrame(()=>{F.current=!1})}),U=O(d=>{switch(x.current=!0,d.key){case A.Enter:if(x.current=!1,l.comboboxState!==0||F.current)return;if(d.preventDefault(),d.stopPropagation(),l.activeOptionIndex===null){m.closeCombobox();return}m.selectActiveOption(),l.mode===0&&m.closeCombobox();break;case A.ArrowDown:return x.current=!1,d.preventDefault(),d.stopPropagation(),J(l.comboboxState,{0:()=>m.goToOption(E.Next),1:()=>m.openCombobox()});case A.ArrowUp:return x.current=!1,d.preventDefault(),d.stopPropagation(),J(l.comboboxState,{0:()=>m.goToOption(E.Previous),1:()=>{m.openCombobox(),M.nextFrame(()=>{l.value||m.goToOption(E.Last)})}});case A.Home:if(d.shiftKey)break;return x.current=!1,d.preventDefault(),d.stopPropagation(),m.goToOption(E.First);case A.PageUp:return x.current=!1,d.preventDefault(),d.stopPropagation(),m.goToOption(E.First);case A.End:if(d.shiftKey)break;return x.current=!1,d.preventDefault(),d.stopPropagation(),m.goToOption(E.Last);case A.PageDown:return x.current=!1,d.preventDefault(),d.stopPropagation(),m.goToOption(E.Last);case A.Escape:return x.current=!1,l.comboboxState!==0?void 0:(d.preventDefault(),l.optionsRef.current&&!l.optionsPropsRef.current.static&&d.stopPropagation(),l.nullable&&l.mode===0&&l.value===null&&$(),m.closeCombobox());case A.Tab:if(x.current=!1,l.comboboxState!==0)return;l.mode===0&&l.activationTrigger!==1&&m.selectActiveOption(),m.closeCombobox();break}}),H=O(d=>{u==null||u(d),l.nullable&&l.mode===0&&d.target.value===""&&$(),m.openCombobox()}),R=O(d=>{var P,w,_;let T=(P=d.relatedTarget)!=null?P:xe.find(D=>D!==d.currentTarget);if(x.current=!1,!((w=l.optionsRef.current)!=null&&w.contains(T))&&!((_=l.buttonRef.current)!=null&&_.contains(T))&&l.comboboxState===0)return d.preventDefault(),l.mode===0&&(l.nullable&&l.value===null?$():l.activationTrigger!==1&&m.selectActiveOption()),m.closeCombobox()}),I=O(d=>{var P,w,_;let T=(P=d.relatedTarget)!=null?P:xe.find(D=>D!==d.currentTarget);(w=l.buttonRef.current)!=null&&w.contains(T)||(_=l.optionsRef.current)!=null&&_.contains(T)||l.disabled||l.immediate&&l.comboboxState!==0&&(m.openCombobox(),M.nextFrame(()=>{m.setActivationTrigger(1)}))}),j=ve(()=>{if(l.labelId)return[l.labelId].join(" ")},[l.labelId]),ae=f.useMemo(()=>({open:l.comboboxState===0,disabled:l.disabled}),[l]),le={ref:g,id:c,role:"combobox",type:p,"aria-controls":(e=l.optionsRef.current)==null?void 0:e.id,"aria-expanded":l.comboboxState===0,"aria-activedescendant":l.activeOptionIndex===null?void 0:l.virtual?(t=l.options.find(d=>{var P;return!((P=l.virtual)!=null&&P.disabled(d.dataRef.current.value))&&l.compare(d.dataRef.current.value,l.virtual.options[l.activeOptionIndex])}))==null?void 0:t.id:(o=l.options[l.activeOptionIndex])==null?void 0:o.id,"aria-labelledby":j,"aria-autocomplete":"list",defaultValue:(a=(r=n.defaultValue)!=null?r:l.defaultValue!==void 0?v==null?void 0:v(l.defaultValue):null)!=null?a:l.defaultValue,disabled:l.disabled,onCompositionStart:K,onCompositionEnd:q,onKeyDown:U,onChange:H,onFocus:I,onBlur:R};return G({ourProps:le,theirProps:h,slot:ae,defaultTag:Tt,name:"Combobox.Input"})}let wt="button";function Mt(n,i){var e;let t=B("Combobox.Button"),o=W("Combobox.Button"),r=Y(t.buttonRef,i),a=Q(),{id:s=`headlessui-combobox-button-${a}`,...c}=n,u=pe(),v=O(g=>{switch(g.key){case A.ArrowDown:return g.preventDefault(),g.stopPropagation(),t.comboboxState===1&&o.openCombobox(),u.nextFrame(()=>{var y;return(y=t.inputRef.current)==null?void 0:y.focus({preventScroll:!0})});case A.ArrowUp:return g.preventDefault(),g.stopPropagation(),t.comboboxState===1&&(o.openCombobox(),u.nextFrame(()=>{t.value||o.goToOption(E.Last)})),u.nextFrame(()=>{var y;return(y=t.inputRef.current)==null?void 0:y.focus({preventScroll:!0})});case A.Escape:return t.comboboxState!==0?void 0:(g.preventDefault(),t.optionsRef.current&&!t.optionsPropsRef.current.static&&g.stopPropagation(),o.closeCombobox(),u.nextFrame(()=>{var y;return(y=t.inputRef.current)==null?void 0:y.focus({preventScroll:!0})}));default:return}}),p=O(g=>{if(Xe(g.currentTarget))return g.preventDefault();t.comboboxState===0?o.closeCombobox():(g.preventDefault(),o.openCombobox()),u.nextFrame(()=>{var y;return(y=t.inputRef.current)==null?void 0:y.focus({preventScroll:!0})})}),h=ve(()=>{if(t.labelId)return[t.labelId,s].join(" ")},[t.labelId,s]),l=f.useMemo(()=>({open:t.comboboxState===0,disabled:t.disabled,value:t.value}),[t]),m={ref:r,id:s,type:Ge(n,t.buttonRef),tabIndex:-1,"aria-haspopup":"listbox","aria-controls":(e=t.optionsRef.current)==null?void 0:e.id,"aria-expanded":t.comboboxState===0,"aria-labelledby":h,disabled:t.disabled,onClick:p,onKeyDown:v};return G({ourProps:m,theirProps:c,slot:l,defaultTag:wt,name:"Combobox.Button"})}let $t="label";function Pt(n,i){let e=Q(),{id:t=`headlessui-combobox-label-${e}`,...o}=n,r=B("Combobox.Label"),a=W("Combobox.Label"),s=Y(r.labelRef,i);L(()=>a.registerLabel(t),[t]);let c=O(()=>{var v;return(v=r.inputRef.current)==null?void 0:v.focus({preventScroll:!0})}),u=f.useMemo(()=>({open:r.comboboxState===0,disabled:r.disabled}),[r]);return G({ourProps:{ref:s,id:t,onClick:c},theirProps:o,slot:u,defaultTag:$t,name:"Combobox.Label"})}let zt="ul",Ft=ye.RenderStrategy|ye.Static;function kt(n,i){let e=Q(),{id:t=`headlessui-combobox-options-${e}`,hold:o=!1,...r}=n,a=B("Combobox.Options"),s=Y(a.optionsRef,i),c=Ve(),u=c!==null?(c&oe.Open)===oe.Open:a.comboboxState===0;L(()=>{var l;a.optionsPropsRef.current.static=(l=n.static)!=null?l:!1},[a.optionsPropsRef,n.static]),L(()=>{a.optionsPropsRef.current.hold=o},[a.optionsPropsRef,o]),He({container:a.optionsRef.current,enabled:a.comboboxState===0,accept(l){return l.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:l.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(l){l.setAttribute("role","none")}});let v=ve(()=>{var l,m;return(m=a.labelId)!=null?m:(l=a.buttonRef.current)==null?void 0:l.id},[a.labelId,a.buttonRef.current]),p=f.useMemo(()=>({open:a.comboboxState===0,option:void 0}),[a]),h={"aria-labelledby":v,role:"listbox","aria-multiselectable":a.mode===1?!0:void 0,id:t,ref:s};return a.virtual&&a.comboboxState===0&&Object.assign(r,{children:N.createElement(St,null,r.children)}),G({ourProps:h,theirProps:r,slot:p,defaultTag:zt,features:Ft,visible:u,name:"Combobox.Options"})}let jt="li";function Dt(n,i){var e;let t=Q(),{id:o=`headlessui-combobox-option-${t}`,disabled:r=!1,value:a,order:s=null,...c}=n,u=B("Combobox.Option"),v=W("Combobox.Option"),p=u.virtual?u.activeOptionIndex===u.calculateIndex(a):u.activeOptionIndex===null?!1:((e=u.options[u.activeOptionIndex])==null?void 0:e.id)===o,h=u.isSelected(a),l=f.useRef(null),m=Te({disabled:r,value:a,domRef:l,order:s}),g=f.useContext(Pe),y=Y(i,l,g?g.measureElement:null),x=O(()=>v.onChange(a));L(()=>v.registerOption(o,m),[m,o]);let M=f.useRef(!(u.virtual||u.__demoMode));L(()=>{if(!u.virtual||!u.__demoMode)return;let R=Se();return R.requestAnimationFrame(()=>{M.current=!0}),R.dispose},[u.virtual,u.__demoMode]),L(()=>{if(!M.current||u.comboboxState!==0||!p||u.activationTrigger===0)return;let R=Se();return R.requestAnimationFrame(()=>{var I,j;(j=(I=l.current)==null?void 0:I.scrollIntoView)==null||j.call(I,{block:"nearest"})}),R.dispose},[l,p,u.comboboxState,u.activationTrigger,u.activeOptionIndex]);let $=O(R=>{var I;if(r||(I=u.virtual)!=null&&I.disabled(a))return R.preventDefault();x(),Je()||requestAnimationFrame(()=>{var j;return(j=u.inputRef.current)==null?void 0:j.focus({preventScroll:!0})}),u.mode===0&&requestAnimationFrame(()=>v.closeCombobox())}),z=O(()=>{var R;if(r||(R=u.virtual)!=null&&R.disabled(a))return v.goToOption(E.Nothing);let I=u.calculateIndex(a);v.goToOption(E.Specific,I)}),F=Ye(),K=O(R=>F.update(R)),q=O(R=>{var I;if(!F.wasMoved(R)||r||(I=u.virtual)!=null&&I.disabled(a)||p)return;let j=u.calculateIndex(a);v.goToOption(E.Specific,j,0)}),U=O(R=>{var I;F.wasMoved(R)&&(r||(I=u.virtual)!=null&&I.disabled(a)||p&&(u.optionsPropsRef.current.hold||v.goToOption(E.Nothing)))}),H=f.useMemo(()=>({active:p,selected:h,disabled:r}),[p,h,r]);return G({ourProps:{id:o,ref:y,role:"option",tabIndex:r===!0?void 0:-1,"aria-disabled":r===!0?!0:void 0,"aria-selected":h,disabled:void 0,onClick:$,onFocus:z,onPointerEnter:K,onMouseEnter:K,onPointerMove:q,onMouseMove:q,onPointerLeave:U,onMouseLeave:U},theirProps:c,slot:H,defaultTag:jt,name:"Combobox.Option"})}let At=Z(Ct),_t=Z(Mt),Lt=Z(Et),Nt=Z(Pt),Vt=Z(kt),Bt=Z(Dt),ne=Object.assign(At,{Input:Lt,Button:_t,Label:Nt,Options:Vt,Option:Bt});function Kt(...n){return n.filter(Boolean).join(" ")}const Ce=({searchOn:n="title",sourceData:i,children:e,callback:t})=>{const[o,r]=f.useState(""),[a,s]=f.useState(!1),c=o===""?[]:i.filter(p=>p[n].toString().toLowerCase().includes(o.toLowerCase())),u=e||C.jsx(Re,{className:"left-4 h-5 w-5 cursor-pointer text-gray-400","aria-hidden":"true"}),v=p=>{if(p){const h=String(p.url);window.location.href=h,s(!1)}};return f.useEffect(()=>{function p(h){h.key==="k"&&(h.metaKey||h.ctrlKey)&&s(!a)}return window.addEventListener("keydown",p),()=>{window.removeEventListener("keydown",p)}},[a]),f.useEffect(()=>{t(a)},[a,t]),C.jsxs(C.Fragment,{children:[C.jsx("button",{onClick:()=>s(!0),"aria-label":"search",className:"not-prose",children:u}),C.jsx(ce.Root,{show:a,as:f.Fragment,afterLeave:()=>r(""),appear:!0,children:C.jsxs(Oe,{as:"div",className:"cu-search not-prose relative z-50",onClose:s,children:[C.jsx(ce.Child,{as:f.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:C.jsx("div",{className:`fixed inset-0 transition-opacity ${De} `})}),C.jsx("div",{className:"z-100 fixed inset-0 overflow-y-auto p-4 sm:p-6 md:p-20",children:C.jsx(ce.Child,{as:f.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:C.jsx(Oe.Panel,{className:"mx-auto mt-[20vh] max-w-xl transform divide-y divide-gray-100 overflow-hidden rounded-xl bg-white shadow-2xl ring-1 ring-black ring-opacity-5 transition-all",children:C.jsxs(ne,{onChange:v,children:[C.jsxs("div",{className:"relative",children:[C.jsx(Re,{className:"pointer-events-none absolute left-4 top-3.5 h-5 w-5 text-gray-400","aria-hidden":"true"}),C.jsx(ne.Input,{className:"h-12 w-full rounded-lg border border-cu-black-100 bg-transparent pl-11 pr-4 text-sm text-cu-black-800 placeholder-cu-black-300 focus:border-cu-black-300 focus:ring-0",placeholder:"Search...",onChange:p=>r(p.target.value)}),o&&C.jsx(nt,{className:"absolute right-4 top-3.5 h-4 w-4 text-gray-400","aria-hidden":"true",onClick:()=>{r("")}})]}),c.length>0&&C.jsx(ne.Options,{static:!0,className:"max-h-72 scroll-py-2 overflow-y-auto py-2 text-sm text-gray-800",children:c.map(p=>C.jsx(ne.Option,{value:p,className:({active:h})=>Kt("cursor-default select-none px-4 py-2",h&&"bg-cu-red text-white"),children:C.jsx(Ae,{href:`${p.url}`,onClick:()=>s(!1),children:p[n]})},p.id))}),o!==""&&c.length===0&&C.jsx("p",{className:"p-4 text-sm text-gray-500",children:"Search not found"})]})})})})]})})]})};try{Ce.displayName="Search",Ce.__docgenInfo={description:"",displayName:"Search",props:{sourceData:{defaultValue:null,description:"",name:"sourceData",required:!0,type:{name:"SourceDataProps[]"}},searchOn:{defaultValue:{value:"title"},description:"",name:"searchOn",required:!1,type:{name:"string"}},callback:{defaultValue:null,description:"",name:"callback",required:!0,type:{name:"(k: boolean) => void"}}}}}catch{}export{Ce as S,nt as X};
