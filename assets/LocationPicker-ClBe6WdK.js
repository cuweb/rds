import{j as Y}from"./jsx-runtime-Cf8x2fCZ.js";import{r as v,e as R}from"./index-DDmFEvuO.js";import{c as ge,g as lt}from"./_commonjsHelpers-D6-XlEtG.js";import{r as at}from"./index-yBjzXJbu.js";import{r as ut}from"./index-Chjiymov.js";import{f as Ue,s as Ve,E as ct,V as dt,q as ft,v as pt,z as mt,n as Ke,d as gt,b as ht,y as vt,A as bt,W as Oe,B as Pe,e as xt,C as yt,Y as St,R as Et,K as It,M as Ot,$ as We,g as He,h as wt,i as Tt,o as K,G as j,j as Ct,Z as Mt,N as Re,a0 as Pt,p as Rt,m as Ae,r as _e,a1 as At,_ as _t,U as kt}from"./portal-DEnTgecq.js";import{r as te}from"./index-D9S4NuzN.js";import{o as P,p as Ge,m as $t,K as ce,y as be,u as Dt,x as Ft,i as ve,n as ne,_ as we,R as zt,L as de,s as jt,e as ke,a as se,c as Lt,O as $e}from"./use-server-handoff-complete-DXjT3LgW.js";import{F as Bt}from"./MagnifyingGlassIcon-C8JQTb0o.js";function Nt(e,i,t){let[n,o]=v.useState(t),l=e!==void 0,a=v.useRef(l),r=v.useRef(!1),c=v.useRef(!1);return l&&!a.current&&!r.current?(r.current=!0,a.current=l,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!l&&a.current&&!c.current&&(c.current=!0,a.current=l,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[l?e:n,P(f=>(l||o(f),i==null?void 0:i(f)))]}function qt(e){let[i]=v.useState(e);return i}function Je(e={},i=null,t=[]){for(let[n,o]of Object.entries(e))Ye(t,Xe(i,n),o);return t}function Xe(e,i){return e?e+"["+i+"]":i}function Ye(e,i,t){if(Array.isArray(t))for(let[n,o]of t.entries())Ye(e,Xe(i,n.toString()),o);else t instanceof Date?e.push([i,t.toISOString()]):typeof t=="boolean"?e.push([i,t?"1":"0"]):typeof t=="string"?e.push([i,t]):typeof t=="number"?e.push([i,`${t}`]):t==null?e.push([i,""]):Je(t,i,e)}let Ut=v.createContext(null);function Vt({children:e}){let i=v.useContext(Ut);if(!i)return R.createElement(R.Fragment,null,e);let{target:t}=i;return t?te.createPortal(R.createElement(R.Fragment,null,e),t):null}function Kt({data:e,form:i,disabled:t,onReset:n,overrides:o}){let[l,a]=v.useState(null),r=Ge();return v.useEffect(()=>{if(n&&l)return r.addEventListener(l,"reset",n)},[l,i,n]),R.createElement(Vt,null,R.createElement(Wt,{setForm:a,formId:i}),Je(e).map(([c,f])=>R.createElement(Ue,{features:Ve.Hidden,...$t({key:c,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:i,disabled:t,name:c,value:f,...o})})))}function Wt({setForm:e,formId:i}){return v.useEffect(()=>{if(i){let t=document.getElementById(i);t&&e(t)}},[e,i]),i?null:R.createElement(Ue,{features:Ve.Hidden,as:"input",type:"hidden",hidden:!0,readOnly:!0,ref:t=>{if(!t)return;let n=t.closest("form");n&&e(n)}})}function ie(e,i,t){let n=t.initialDeps??[],o;function l(){var a,r,c,f;let m;t.key&&((a=t.debug)!=null&&a.call(t))&&(m=Date.now());const y=e();if(!(y.length!==n.length||y.some((M,g)=>n[g]!==M)))return o;n=y;let p;if(t.key&&((r=t.debug)!=null&&r.call(t))&&(p=Date.now()),o=i(...y),t.key&&((c=t.debug)!=null&&c.call(t))){const M=Math.round((Date.now()-m)*100)/100,g=Math.round((Date.now()-p)*100)/100,d=g/16,I=(s,u)=>{for(s=String(s);s.length<u;)s=" "+s;return s};console.info(`%câ± ${I(g,5)} /${I(M,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*d,120))}deg 100% 31%);`,t==null?void 0:t.key)}return(f=t==null?void 0:t.onChange)==null||f.call(t,o),o}return l.updateDeps=a=>{n=a},l}function xe(e,i){if(e===void 0)throw new Error("Unexpected undefined");return e}const Ht=(e,i)=>Math.abs(e-i)<1,Gt=(e,i,t)=>{let n;return function(...o){e.clearTimeout(n),n=e.setTimeout(()=>i.apply(this,o),t)}},Jt=e=>e,Xt=e=>{const i=Math.max(e.startIndex-e.overscan,0),t=Math.min(e.endIndex+e.overscan,e.count-1),n=[];for(let o=i;o<=t;o++)n.push(o);return n},Yt=(e,i)=>{const t=e.scrollElement;if(!t)return;const n=e.targetWindow;if(!n)return;const o=a=>{const{width:r,height:c}=a;i({width:Math.round(r),height:Math.round(c)})};if(o(t.getBoundingClientRect()),!n.ResizeObserver)return()=>{};const l=new n.ResizeObserver(a=>{const r=()=>{const c=a[0];if(c!=null&&c.borderBoxSize){const f=c.borderBoxSize[0];if(f){o({width:f.inlineSize,height:f.blockSize});return}}o(t.getBoundingClientRect())};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(r):r()});return l.observe(t,{box:"border-box"}),()=>{l.unobserve(t)}},De={passive:!0},Fe=typeof window>"u"?!0:"onscrollend"in window,Qt=(e,i)=>{const t=e.scrollElement;if(!t)return;const n=e.targetWindow;if(!n)return;let o=0;const l=e.options.useScrollendEvent&&Fe?()=>{}:Gt(n,()=>{i(o,!1)},e.options.isScrollingResetDelay),a=m=>()=>{const{horizontal:y,isRtl:C}=e.options;o=y?t.scrollLeft*(C&&-1||1):t.scrollTop,l(),i(o,m)},r=a(!0),c=a(!1);c(),t.addEventListener("scroll",r,De);const f=e.options.useScrollendEvent&&Fe;return f&&t.addEventListener("scrollend",c,De),()=>{t.removeEventListener("scroll",r),f&&t.removeEventListener("scrollend",c)}},Zt=(e,i,t)=>{if(i!=null&&i.borderBoxSize){const n=i.borderBoxSize[0];if(n)return Math.round(n[t.options.horizontal?"inlineSize":"blockSize"])}return Math.round(e.getBoundingClientRect()[t.options.horizontal?"width":"height"])},en=(e,{adjustments:i=0,behavior:t},n)=>{var o,l;const a=e+i;(l=(o=n.scrollElement)==null?void 0:o.scrollTo)==null||l.call(o,{[n.options.horizontal?"left":"top"]:a,behavior:t})};class tn{constructor(i){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let t=null;const n=()=>t||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:t=new this.targetWindow.ResizeObserver(o=>{o.forEach(l=>{const a=()=>{this._measureElement(l.target,l)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(a):a()})}));return{disconnect:()=>{var o;(o=n())==null||o.disconnect(),t=null},observe:o=>{var l;return(l=n())==null?void 0:l.observe(o,{box:"border-box"})},unobserve:o=>{var l;return(l=n())==null?void 0:l.unobserve(o)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach(([n,o])=>{typeof o>"u"&&delete t[n]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Jt,rangeExtractor:Xt,onChange:()=>{},measureElement:Zt,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...t}},this.notify=t=>{var n,o;(o=(n=this.options).onChange)==null||o.call(n,this,t)},this.maybeNotify=ie(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),t=>{this.notify(t)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var t;const n=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==n){if(this.cleanup(),!n){this.maybeNotify();return}this.scrollElement=n,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((t=this.scrollElement)==null?void 0:t.window)??null,this.elementsCache.forEach(o=>{this.observer.observe(o)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,o=>{this.scrollRect=o,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(o,l)=>{this.scrollAdjustments=0,this.scrollDirection=l?this.getScrollOffset()<o?"forward":"backward":null,this.scrollOffset=o,this.isScrolling=l,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(t,n)=>{const o=new Map,l=new Map;for(let a=n-1;a>=0;a--){const r=t[a];if(o.has(r.lane))continue;const c=l.get(r.lane);if(c==null||r.end>c.end?l.set(r.lane,r):r.end<c.end&&o.set(r.lane,!0),o.size===this.options.lanes)break}return l.size===this.options.lanes?Array.from(l.values()).sort((a,r)=>a.end===r.end?a.index-r.index:a.end-r.end)[0]:void 0},this.getMeasurementOptions=ie(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(t,n,o,l,a)=>(this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:n,scrollMargin:o,getItemKey:l,enabled:a}),{key:!1}),this.getMeasurements=ie(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:t,paddingStart:n,scrollMargin:o,getItemKey:l,enabled:a},r)=>{if(!a)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(m=>{this.itemSizeCache.set(m.key,m.size)}));const c=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const f=this.measurementsCache.slice(0,c);for(let m=c;m<t;m++){const y=l(m),C=this.options.lanes===1?f[m-1]:this.getFurthestMeasurement(f,m),p=C?C.end+this.options.gap:n+o,M=r.get(y),g=typeof M=="number"?M:this.options.estimateSize(m),d=p+g,I=C?C.lane:m%this.options.lanes;f[m]={index:m,start:p,size:g,end:d,key:y,lane:I}}return this.measurementsCache=f,f},{key:!1,debug:()=>this.options.debug}),this.calculateRange=ie(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(t,n,o,l)=>this.range=t.length>0&&n>0?nn({measurements:t,outerSize:n,scrollOffset:o,lanes:l}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=ie(()=>{let t=null,n=null;const o=this.calculateRange();return o&&(t=o.startIndex,n=o.endIndex),this.maybeNotify.updateDeps([this.isScrolling,t,n]),[this.options.rangeExtractor,this.options.overscan,this.options.count,t,n]},(t,n,o,l,a)=>l===null||a===null?[]:t({startIndex:l,endIndex:a,overscan:n,count:o}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=t=>{const n=this.options.indexAttribute,o=t.getAttribute(n);return o?parseInt(o,10):(console.warn(`Missing attribute name '${n}={index}' on measured element.`),-1)},this._measureElement=(t,n)=>{const o=this.indexFromElement(t),l=this.measurementsCache[o];if(!l)return;const a=l.key,r=this.elementsCache.get(a);r!==t&&(r&&this.observer.unobserve(r),this.observer.observe(t),this.elementsCache.set(a,t)),t.isConnected&&this.resizeItem(o,this.options.measureElement(t,n,this))},this.resizeItem=(t,n)=>{const o=this.measurementsCache[t];if(!o)return;const l=this.itemSizeCache.get(o.key)??o.size,a=n-l;a!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(o,a,this):o.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=a,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(o.index),this.itemSizeCache=new Map(this.itemSizeCache.set(o.key,n)),this.notify(!1))},this.measureElement=t=>{if(!t){this.elementsCache.forEach((n,o)=>{n.isConnected||(this.observer.unobserve(n),this.elementsCache.delete(o))});return}this._measureElement(t,void 0)},this.getVirtualItems=ie(()=>[this.getVirtualIndexes(),this.getMeasurements()],(t,n)=>{const o=[];for(let l=0,a=t.length;l<a;l++){const r=t[l],c=n[r];o.push(c)}return o},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const n=this.getMeasurements();if(n.length!==0)return xe(n[Qe(0,n.length-1,o=>xe(n[o]).start,t)])},this.getOffsetForAlignment=(t,n,o=0)=>{const l=this.getSize(),a=this.getScrollOffset();n==="auto"&&(n=t>=a+l?"end":"start"),n==="center"?t+=(o-l)/2:n==="end"&&(t-=l);const r=this.options.horizontal?"scrollWidth":"scrollHeight",f=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[r]:this.scrollElement[r]:0)-l;return Math.max(Math.min(f,t),0)},this.getOffsetForIndex=(t,n="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const o=this.measurementsCache[t];if(!o)return;const l=this.getSize(),a=this.getScrollOffset();if(n==="auto")if(o.end>=a+l-this.options.scrollPaddingEnd)n="end";else if(o.start<=a+this.options.scrollPaddingStart)n="start";else return[a,n];const r=n==="end"?o.end+this.options.scrollPaddingEnd:o.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(r,n,o.size),n]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(t,{align:n="start",behavior:o}={})=>{this.cancelScrollToIndex(),o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,n),{adjustments:void 0,behavior:o})},this.scrollToIndex=(t,{align:n="auto",behavior:o}={})=>{t=Math.max(0,Math.min(t,this.options.count-1)),this.cancelScrollToIndex(),o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const l=this.getOffsetForIndex(t,n);if(!l)return;const[a,r]=l;this._scrollToOffset(a,{adjustments:void 0,behavior:o}),o!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(t))){const[f]=xe(this.getOffsetForIndex(t,r));Ht(f,this.getScrollOffset())||this.scrollToIndex(t,{align:r,behavior:o})}else this.scrollToIndex(t,{align:r,behavior:o})}))},this.scrollBy=(t,{behavior:n}={})=>{this.cancelScrollToIndex(),n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+t,{adjustments:void 0,behavior:n})},this.getTotalSize=()=>{var t;const n=this.getMeasurements();let o;if(n.length===0)o=this.options.paddingStart;else if(this.options.lanes===1)o=((t=n[n.length-1])==null?void 0:t.end)??0;else{const l=Array(this.options.lanes).fill(null);let a=n.length-1;for(;a>=0&&l.some(r=>r===null);){const r=n[a];l[r.lane]===null&&(l[r.lane]=r.end),a--}o=Math.max(...l.filter(r=>r!==null))}return Math.max(o-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(t,{adjustments:n,behavior:o})=>{this.options.scrollToFn(t,{behavior:o,adjustments:n},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(i)}}const Qe=(e,i,t,n)=>{for(;e<=i;){const o=(e+i)/2|0,l=t(o);if(l<n)e=o+1;else if(l>n)i=o-1;else return o}return e>0?e-1:0};function nn({measurements:e,outerSize:i,scrollOffset:t,lanes:n}){const o=e.length-1,l=c=>e[c].start;if(e.length<=n)return{startIndex:0,endIndex:o};let a=Qe(0,o,l,t),r=a;if(n===1)for(;r<o&&e[r].end<t+i;)r++;else if(n>1){const c=Array(n).fill(0);for(;r<o&&c.some(m=>m<t+i);){const m=e[r];c[m.lane]=m.end,r++}const f=Array(n).fill(t+i);for(;a>=0&&f.some(m=>m>=t);){const m=e[a];f[m.lane]=m.start,a--}a=Math.max(0,a-a%n),r=Math.min(o,r+(n-1-r%n))}return{startIndex:a,endIndex:r}}const ze=typeof document<"u"?v.useLayoutEffect:v.useEffect;function on(e){const i=v.useReducer(()=>({}),{})[1],t={...e,onChange:(o,l)=>{var a;l?te.flushSync(i):i(),(a=e.onChange)==null||a.call(e,o,l)}},[n]=v.useState(()=>new tn(t));return n.setOptions(t),ze(()=>n._didMount(),[]),ze(()=>n._willUpdate()),n}function rn(e){return on({observeElementRect:Yt,observeElementOffset:Qt,scrollToFn:en,...e})}function sn(e,i){return e!==null&&i!==null&&typeof e=="object"&&typeof i=="object"&&"id"in e&&"id"in i?e.id===i.id:e===i}function ln(e=sn){return v.useCallback((i,t)=>{if(typeof e=="string"){let n=e;return(i==null?void 0:i[n])===(t==null?void 0:t[n])}return e(i,t)},[e])}function Ze(e){let i=v.useRef({value:"",selectionStart:null,selectionEnd:null});return ct(e,"blur",t=>{let n=t.target;n instanceof HTMLInputElement&&(i.current={value:n.value,selectionStart:n.selectionStart,selectionEnd:n.selectionEnd})}),P(()=>{if(document.activeElement!==e&&e instanceof HTMLInputElement&&e.isConnected){if(e.focus({preventScroll:!0}),e.value!==i.current.value)e.setSelectionRange(e.value.length,e.value.length);else{let{selectionStart:t,selectionEnd:n}=i.current;t!==null&&n!==null&&e.setSelectionRange(t,n)}i.current={value:"",selectionStart:null,selectionEnd:null}}})}function an({children:e,freeze:i}){let t=Ee(i,e);return R.createElement(R.Fragment,null,t)}function Ee(e,i){let[t,n]=v.useState(i);return!e&&t!==i&&n(i),e?t:i}var Te=(e=>(e[e.Left=0]="Left",e[e.Right=2]="Right",e))(Te||{}),un=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(un||{}),cn=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(cn||{}),dn=(e=>(e[e.Pointer=0]="Pointer",e[e.Focus=1]="Focus",e[e.Other=2]="Other",e))(dn||{}),fn=(e=>(e[e.OpenCombobox=0]="OpenCombobox",e[e.CloseCombobox=1]="CloseCombobox",e[e.GoToOption=2]="GoToOption",e[e.SetTyping=3]="SetTyping",e[e.RegisterOption=4]="RegisterOption",e[e.UnregisterOption=5]="UnregisterOption",e[e.SetActivationTrigger=6]="SetActivationTrigger",e[e.UpdateVirtualConfiguration=7]="UpdateVirtualConfiguration",e[e.SetInputElement=8]="SetInputElement",e[e.SetButtonElement=9]="SetButtonElement",e[e.SetOptionsElement=10]="SetOptionsElement",e))(fn||{});function ye(e,i=t=>t){let t=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,n=i(e.options.slice()),o=n.length>0&&n[0].dataRef.current.order!==null?n.sort((a,r)=>a.dataRef.current.order-r.dataRef.current.order):_t(n,a=>a.dataRef.current.domRef.current),l=t?o.indexOf(t):null;return l===-1&&(l=null),{options:o,activeOptionIndex:l}}let pn={1(e){var i;return(i=e.dataRef.current)!=null&&i.disabled||e.comboboxState===1?e:{...e,activeOptionIndex:null,comboboxState:1,isTyping:!1,activationTrigger:2,__demoMode:!1}},0(e){var i,t;if((i=e.dataRef.current)!=null&&i.disabled||e.comboboxState===0)return e;if((t=e.dataRef.current)!=null&&t.value){let n=e.dataRef.current.calculateIndex(e.dataRef.current.value);if(n!==-1)return{...e,activeOptionIndex:n,comboboxState:0,__demoMode:!1}}return{...e,comboboxState:0,__demoMode:!1}},3(e,i){return e.isTyping===i.isTyping?e:{...e,isTyping:i.isTyping}},2(e,i){var t,n,o,l;if((t=e.dataRef.current)!=null&&t.disabled||e.optionsElement&&!((n=e.dataRef.current)!=null&&n.optionsPropsRef.current.static)&&e.comboboxState===1)return e;if(e.virtual){let{options:f,disabled:m}=e.virtual,y=i.focus===j.Specific?i.idx:Re(i,{resolveItems:()=>f,resolveActiveIndex:()=>{var p,M;return(M=(p=e.activeOptionIndex)!=null?p:f.findIndex(g=>!m(g)))!=null?M:null},resolveDisabled:m,resolveId(){throw new Error("Function not implemented.")}}),C=(o=i.trigger)!=null?o:2;return e.activeOptionIndex===y&&e.activationTrigger===C?e:{...e,activeOptionIndex:y,activationTrigger:C,isTyping:!1,__demoMode:!1}}let a=ye(e);if(a.activeOptionIndex===null){let f=a.options.findIndex(m=>!m.dataRef.current.disabled);f!==-1&&(a.activeOptionIndex=f)}let r=i.focus===j.Specific?i.idx:Re(i,{resolveItems:()=>a.options,resolveActiveIndex:()=>a.activeOptionIndex,resolveId:f=>f.id,resolveDisabled:f=>f.dataRef.current.disabled}),c=(l=i.trigger)!=null?l:2;return e.activeOptionIndex===r&&e.activationTrigger===c?e:{...e,...a,isTyping:!1,activeOptionIndex:r,activationTrigger:c,__demoMode:!1}},4:(e,i)=>{var t,n,o;if((t=e.dataRef.current)!=null&&t.virtual)return{...e,options:[...e.options,i.payload]};let l=i.payload,a=ye(e,c=>(c.push(l),c));e.activeOptionIndex===null&&(n=e.dataRef.current)!=null&&n.isSelected(i.payload.dataRef.current.value)&&(a.activeOptionIndex=a.options.indexOf(l));let r={...e,...a,activationTrigger:2};return(o=e.dataRef.current)!=null&&o.__demoMode&&e.dataRef.current.value===void 0&&(r.activeOptionIndex=0),r},5:(e,i)=>{var t;if((t=e.dataRef.current)!=null&&t.virtual)return{...e,options:e.options.filter(o=>o.id!==i.id)};let n=ye(e,o=>{let l=o.findIndex(a=>a.id===i.id);return l!==-1&&o.splice(l,1),o});return{...e,...n,activationTrigger:2}},6:(e,i)=>e.activationTrigger===i.trigger?e:{...e,activationTrigger:i.trigger},7:(e,i)=>{var t,n;if(e.virtual===null)return{...e,virtual:{options:i.options,disabled:(t=i.disabled)!=null?t:()=>!1}};if(e.virtual.options===i.options&&e.virtual.disabled===i.disabled)return e;let o=e.activeOptionIndex;if(e.activeOptionIndex!==null){let l=i.options.indexOf(e.virtual.options[e.activeOptionIndex]);l!==-1?o=l:o=null}return{...e,activeOptionIndex:o,virtual:{options:i.options,disabled:(n=i.disabled)!=null?n:()=>!1}}},8:(e,i)=>e.inputElement===i.element?e:{...e,inputElement:i.element},9:(e,i)=>e.buttonElement===i.element?e:{...e,buttonElement:i.element},10:(e,i)=>e.optionsElement===i.element?e:{...e,optionsElement:i.element}},Ce=v.createContext(null);Ce.displayName="ComboboxActionsContext";function fe(e){let i=v.useContext(Ce);if(i===null){let t=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,fe),t}return i}let et=v.createContext(null);function mn(e){let i=le("VirtualProvider"),{options:t}=i.virtual,[n,o]=v.useMemo(()=>{let f=i.optionsElement;if(!f)return[0,0];let m=window.getComputedStyle(f);return[parseFloat(m.paddingBlockStart||m.paddingTop),parseFloat(m.paddingBlockEnd||m.paddingBottom)]},[i.optionsElement]),l=rn({enabled:t.length!==0,scrollPaddingStart:n,scrollPaddingEnd:o,count:t.length,estimateSize(){return 40},getScrollElement(){return i.optionsElement},overscan:12}),[a,r]=v.useState(0);ne(()=>{r(f=>f+1)},[t]);let c=l.getVirtualItems();return c.length===0?null:R.createElement(et.Provider,{value:l},R.createElement("div",{style:{position:"relative",width:"100%",height:`${l.getTotalSize()}px`},ref:f=>{f&&i.activationTrigger!==0&&i.activeOptionIndex!==null&&t.length>i.activeOptionIndex&&l.scrollToIndex(i.activeOptionIndex)}},c.map(f=>{var m;return R.createElement(v.Fragment,{key:f.key},R.cloneElement((m=e.children)==null?void 0:m.call(e,{...e.slot,option:t[f.index]}),{key:`${a}-${f.key}`,"data-index":f.index,"aria-setsize":t.length,"aria-posinset":f.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${f.start}px)`,overflowAnchor:"none"}}))})))}let ue=v.createContext(null);ue.displayName="ComboboxDataContext";function le(e){let i=v.useContext(ue);if(i===null){let t=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,le),t}return i}function gn(e,i){return se(i.type,pn,e,i)}let hn=v.Fragment;function vn(e,i){var t,n;let o=St(),{value:l,defaultValue:a,onChange:r,form:c,name:f,by:m,disabled:y=o||!1,onClose:C,__demoMode:p=!1,multiple:M=!1,immediate:g=!1,virtual:d=null,nullable:I,...s}=e,u=qt(a),[b=M?[]:void 0,h]=Nt(l,r,u),[x,E]=v.useReducer(gn,{dataRef:v.createRef(),comboboxState:p?0:1,isTyping:!1,options:[],virtual:d?{options:d.options,disabled:(t=d.disabled)!=null?t:()=>!1}:null,activeOptionIndex:null,activationTrigger:2,inputElement:null,buttonElement:null,optionsElement:null,__demoMode:p}),_=v.useRef(!1),U=v.useRef({static:!1,hold:!1}),L=ln(m),N=P(T=>d?m===null?d.options.indexOf(T):d.options.findIndex($=>L($,T)):x.options.findIndex($=>L($.dataRef.current.value,T))),D=v.useCallback(T=>se(O.mode,{1:()=>b.some($=>L($,T)),0:()=>L(b,T)}),[b]),B=P(T=>x.activeOptionIndex===N(T)),O=v.useMemo(()=>({...x,immediate:g,optionsPropsRef:U,value:b,defaultValue:u,disabled:y,mode:M?1:0,virtual:d?x.virtual:null,get activeOptionIndex(){if(_.current&&x.activeOptionIndex===null&&(d?d.options.length>0:x.options.length>0)){if(d){let $=d.options.findIndex(X=>{var me,Me;return!((Me=(me=d.disabled)==null?void 0:me.call(d,X))!=null&&Me)});if($!==-1)return $}let T=x.options.findIndex($=>!$.dataRef.current.disabled);if(T!==-1)return T}return x.activeOptionIndex},calculateIndex:N,compare:L,isSelected:D,isActive:B}),[b,u,y,M,p,x,d]);ne(()=>{var T;d&&E({type:7,options:d.options,disabled:(T=d.disabled)!=null?T:null})},[d,d==null?void 0:d.options,d==null?void 0:d.disabled]),ne(()=>{x.dataRef.current=O},[O]);let k=O.comboboxState===0;Et(k,[O.buttonElement,O.inputElement,O.optionsElement],()=>A.closeCombobox());let q=v.useMemo(()=>{var T,$,X;return{open:O.comboboxState===0,disabled:y,activeIndex:O.activeOptionIndex,activeOption:O.activeOptionIndex===null?null:O.virtual?O.virtual.options[(T=O.activeOptionIndex)!=null?T:0]:(X=($=O.options[O.activeOptionIndex])==null?void 0:$.dataRef.current.value)!=null?X:null,value:b}},[O,y,b]),G=P(()=>{if(O.activeOptionIndex!==null){if(A.setIsTyping(!1),O.virtual)S(O.virtual.options[O.activeOptionIndex]);else{let{dataRef:T}=O.options[O.activeOptionIndex];S(T.current.value)}A.goToOption(j.Specific,O.activeOptionIndex)}}),J=P(()=>{E({type:0}),_.current=!0}),Z=P(()=>{E({type:1}),_.current=!1,C==null||C()}),oe=P(T=>{E({type:3,isTyping:T})}),ee=P((T,$,X)=>(_.current=!1,T===j.Specific?E({type:2,focus:j.Specific,idx:$,trigger:X}):E({type:2,focus:T,trigger:X}))),F=P((T,$)=>(E({type:4,payload:{id:T,dataRef:$}}),()=>{O.isActive($.current.value)&&(_.current=!0),E({type:5,id:T})})),S=P(T=>se(O.mode,{0(){return h==null?void 0:h(T)},1(){let $=O.value.slice(),X=$.findIndex(me=>L(me,T));return X===-1?$.push(T):$.splice(X,1),h==null?void 0:h($)}})),W=P(T=>{E({type:6,trigger:T})}),z=P(T=>{E({type:8,element:T})}),V=P(T=>{E({type:9,element:T})}),w=P(T=>{E({type:10,element:T})}),A=v.useMemo(()=>({onChange:S,registerOption:F,goToOption:ee,setIsTyping:oe,closeCombobox:Z,openCombobox:J,setActivationTrigger:W,selectActiveOption:G,setInputElement:z,setButtonElement:V,setOptionsElement:w}),[]),[H,pe]=It(),it=i===null?{}:{ref:i},rt=v.useCallback(()=>{if(u!==void 0)return h==null?void 0:h(u)},[h,u]),st=de();return R.createElement(pe,{value:H,props:{htmlFor:(n=O.inputElement)==null?void 0:n.id},slot:{open:O.comboboxState===0,disabled:y}},R.createElement(Ot,null,R.createElement(Ce.Provider,{value:A},R.createElement(ue.Provider,{value:O},R.createElement(Lt,{value:se(O.comboboxState,{0:ve.Open,1:ve.Closed})},f!=null&&R.createElement(Kt,{disabled:y,data:b!=null?{[f]:b}:{},form:c,onReset:rt}),st({ourProps:it,theirProps:s,slot:q,defaultTag:hn,name:"Combobox"}))))))}let bn="input";function xn(e,i){var t,n,o,l,a;let r=le("Combobox.Input"),c=fe("Combobox.Input"),f=v.useId(),m=Pt(),{id:y=m||`headlessui-combobox-input-${f}`,onChange:C,displayValue:p,disabled:M=r.disabled||!1,autoFocus:g=!1,type:d="text",...I}=e,s=v.useRef(null),u=be(s,i,Rt(),c.setInputElement),b=Ke(r.inputElement),h=Ge(),x=P(()=>{c.onChange(null),r.optionsElement&&(r.optionsElement.scrollTop=0),c.goToOption(j.Nothing)}),E=v.useMemo(()=>{var S;return typeof p=="function"&&r.value!==void 0?(S=p(r.value))!=null?S:"":typeof r.value=="string"?r.value:""},[r.value,p]);Ae(([S,W],[z,V])=>{if(r.isTyping)return;let w=s.current;w&&((V===0&&W===1||S!==z)&&(w.value=S),requestAnimationFrame(()=>{if(r.isTyping||!w||(b==null?void 0:b.activeElement)!==w)return;let{selectionStart:A,selectionEnd:H}=w;Math.abs((H??0)-(A??0))===0&&A===0&&w.setSelectionRange(w.value.length,w.value.length)}))},[E,r.comboboxState,b,r.isTyping]),Ae(([S],[W])=>{if(S===0&&W===1){if(r.isTyping)return;let z=s.current;if(!z)return;let V=z.value,{selectionStart:w,selectionEnd:A,selectionDirection:H}=z;z.value="",z.value=V,H!==null?z.setSelectionRange(w,A,H):z.setSelectionRange(w,A)}},[r.comboboxState]);let _=v.useRef(!1),U=P(()=>{_.current=!0}),L=P(()=>{h.nextFrame(()=>{_.current=!1})}),N=P(S=>{switch(c.setIsTyping(!0),S.key){case K.Enter:if(r.comboboxState!==0||_.current)return;if(S.preventDefault(),S.stopPropagation(),r.activeOptionIndex===null){c.closeCombobox();return}c.selectActiveOption(),r.mode===0&&c.closeCombobox();break;case K.ArrowDown:return S.preventDefault(),S.stopPropagation(),se(r.comboboxState,{0:()=>c.goToOption(j.Next),1:()=>c.openCombobox()});case K.ArrowUp:return S.preventDefault(),S.stopPropagation(),se(r.comboboxState,{0:()=>c.goToOption(j.Previous),1:()=>{te.flushSync(()=>c.openCombobox()),r.value||c.goToOption(j.Last)}});case K.Home:if(S.shiftKey)break;return S.preventDefault(),S.stopPropagation(),c.goToOption(j.First);case K.PageUp:return S.preventDefault(),S.stopPropagation(),c.goToOption(j.First);case K.End:if(S.shiftKey)break;return S.preventDefault(),S.stopPropagation(),c.goToOption(j.Last);case K.PageDown:return S.preventDefault(),S.stopPropagation(),c.goToOption(j.Last);case K.Escape:return r.comboboxState!==0?void 0:(S.preventDefault(),r.optionsElement&&!r.optionsPropsRef.current.static&&S.stopPropagation(),r.mode===0&&r.value===null&&x(),c.closeCombobox());case K.Tab:if(r.comboboxState!==0)return;r.mode===0&&r.activationTrigger!==1&&c.selectActiveOption(),c.closeCombobox();break}}),D=P(S=>{C==null||C(S),r.mode===0&&S.target.value===""&&x(),c.openCombobox()}),B=P(S=>{var W,z,V;let w=(W=S.relatedTarget)!=null?W:_e.find(A=>A!==S.currentTarget);if(!((z=r.optionsElement)!=null&&z.contains(w))&&!((V=r.buttonElement)!=null&&V.contains(w))&&r.comboboxState===0)return S.preventDefault(),r.mode===0&&r.value===null&&x(),c.closeCombobox()}),O=P(S=>{var W,z,V;let w=(W=S.relatedTarget)!=null?W:_e.find(A=>A!==S.currentTarget);(z=r.buttonElement)!=null&&z.contains(w)||(V=r.optionsElement)!=null&&V.contains(w)||r.disabled||r.immediate&&r.comboboxState!==0&&h.microTask(()=>{te.flushSync(()=>c.openCombobox()),c.setActivationTrigger(1)})}),k=Oe(),q=At(),{isFocused:G,focusProps:J}=We({autoFocus:g}),{isHovered:Z,hoverProps:oe}=He({isDisabled:M}),ee=v.useMemo(()=>({open:r.comboboxState===0,disabled:M,hover:Z,focus:G,autofocus:g}),[r,Z,G,g,M]),F=we({ref:u,id:y,role:"combobox",type:d,"aria-controls":(t=r.optionsElement)==null?void 0:t.id,"aria-expanded":r.comboboxState===0,"aria-activedescendant":r.activeOptionIndex===null?void 0:r.virtual?(n=r.options.find(S=>!S.dataRef.current.disabled&&r.compare(S.dataRef.current.value,r.virtual.options[r.activeOptionIndex])))==null?void 0:n.id:(o=r.options[r.activeOptionIndex])==null?void 0:o.id,"aria-labelledby":k,"aria-describedby":q,"aria-autocomplete":"list",defaultValue:(a=(l=e.defaultValue)!=null?l:r.defaultValue!==void 0?p==null?void 0:p(r.defaultValue):null)!=null?a:r.defaultValue,disabled:M||void 0,autoFocus:g,onCompositionStart:U,onCompositionEnd:L,onKeyDown:N,onChange:D,onFocus:O,onBlur:B},J,oe);return de()({ourProps:F,theirProps:I,slot:ee,defaultTag:bn,name:"Combobox.Input"})}let yn="button";function Sn(e,i){var t;let n=le("Combobox.Button"),o=fe("Combobox.Button"),l=be(i,o.setButtonElement),a=v.useId(),{id:r=`headlessui-combobox-button-${a}`,disabled:c=n.disabled||!1,autoFocus:f=!1,...m}=e,y=Ze(n.inputElement),C=P(E=>{switch(E.key){case K.Space:case K.Enter:E.preventDefault(),E.stopPropagation(),n.comboboxState===1&&te.flushSync(()=>o.openCombobox()),y();return;case K.ArrowDown:E.preventDefault(),E.stopPropagation(),n.comboboxState===1&&(te.flushSync(()=>o.openCombobox()),n.value||o.goToOption(j.First)),y();return;case K.ArrowUp:E.preventDefault(),E.stopPropagation(),n.comboboxState===1&&(te.flushSync(()=>o.openCombobox()),n.value||o.goToOption(j.Last)),y();return;case K.Escape:if(n.comboboxState!==0)return;E.preventDefault(),n.optionsElement&&!n.optionsPropsRef.current.static&&E.stopPropagation(),te.flushSync(()=>o.closeCombobox()),y();return;default:return}}),p=P(E=>{E.preventDefault(),!Ct(E.currentTarget)&&(E.button===Te.Left&&(n.comboboxState===0?o.closeCombobox():o.openCombobox()),y())}),M=Oe([r]),{isFocusVisible:g,focusProps:d}=We({autoFocus:f}),{isHovered:I,hoverProps:s}=He({isDisabled:c}),{pressed:u,pressProps:b}=wt({disabled:c}),h=v.useMemo(()=>({open:n.comboboxState===0,active:u||n.comboboxState===0,disabled:c,value:n.value,hover:I,focus:g}),[n,I,g,u,c]),x=we({ref:l,id:r,type:Tt(e,n.buttonElement),tabIndex:-1,"aria-haspopup":"listbox","aria-controls":(t=n.optionsElement)==null?void 0:t.id,"aria-expanded":n.comboboxState===0,"aria-labelledby":M,disabled:c||void 0,autoFocus:f,onMouseDown:p,onKeyDown:C},d,s,b);return de()({ourProps:x,theirProps:m,slot:h,defaultTag:yn,name:"Combobox.Button"})}let En="div",In=$e.RenderStrategy|$e.Static;function On(e,i){var t,n,o;let l=v.useId(),{id:a=`headlessui-combobox-options-${l}`,hold:r=!1,anchor:c,portal:f=!1,modal:m=!0,transition:y=!1,...C}=e,p=le("Combobox.Options"),M=fe("Combobox.Options"),g=ft(c);g&&(f=!0);let[d,I]=pt(g),[s,u]=v.useState(null),b=mt(),h=be(i,g?d:null,M.setOptionsElement,u),x=Ke(p.optionsElement),E=Dt(),[_,U]=Ft(y,s,E!==null?(E&ve.Open)===ve.Open:p.comboboxState===0);gt(_,p.inputElement,M.closeCombobox);let L=p.__demoMode?!1:m&&p.comboboxState===0;ht(L,x);let N=p.__demoMode?!1:m&&p.comboboxState===0;vt(N,{allowed:v.useCallback(()=>[p.inputElement,p.buttonElement,p.optionsElement],[p.inputElement,p.buttonElement,p.optionsElement])}),ne(()=>{var F;p.optionsPropsRef.current.static=(F=e.static)!=null?F:!1},[p.optionsPropsRef,e.static]),ne(()=>{p.optionsPropsRef.current.hold=r},[p.optionsPropsRef,r]),bt(p.comboboxState===0,{container:p.optionsElement,accept(F){return F.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:F.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(F){F.setAttribute("role","none")}});let D=Oe([(t=p.buttonElement)==null?void 0:t.id]),B=v.useMemo(()=>({open:p.comboboxState===0,option:void 0}),[p.comboboxState]),O=P(()=>{M.setActivationTrigger(0)}),k=P(F=>{F.preventDefault(),M.setActivationTrigger(0)}),q=we(g?b():{},{"aria-labelledby":D,role:"listbox","aria-multiselectable":p.mode===1?!0:void 0,id:a,ref:h,style:{...C.style,...I,"--input-width":Pe(p.inputElement,!0).width,"--button-width":Pe(p.buttonElement,!0).width},onWheel:p.activationTrigger===0?void 0:O,onMouseDown:k,...zt(U)}),G=_&&p.comboboxState===1,J=Ee(G,(n=p.virtual)==null?void 0:n.options),Z=Ee(G,p.value),oe=P(F=>p.compare(Z,F));if(p.virtual){if(J===void 0)throw new Error("Missing `options` in virtual mode");Object.assign(C,{children:R.createElement(ue.Provider,{value:J!==p.virtual.options?{...p,virtual:{...p.virtual,options:J}}:p},R.createElement(mn,{slot:B},C.children))})}let ee=de();return R.createElement(xt,{enabled:f?e.static||_:!1},R.createElement(ue.Provider,{value:p.mode===1?p:{...p,isSelected:oe}},ee({ourProps:q,theirProps:{...C,children:R.createElement(an,{freeze:G},typeof C.children=="function"?(o=C.children)==null?void 0:o.call(C,B):C.children)},slot:B,defaultTag:En,features:In,visible:_,name:"Combobox.Options"})))}let wn="div";function Tn(e,i){var t,n,o,l;let a=le("Combobox.Option"),r=fe("Combobox.Option"),c=v.useId(),{id:f=`headlessui-combobox-option-${c}`,value:m,disabled:y=(o=(n=(t=a.virtual)==null?void 0:t.disabled)==null?void 0:n.call(t,m))!=null?o:!1,order:C=null,...p}=e,M=Ze(a.inputElement),g=a.virtual?a.activeOptionIndex===a.calculateIndex(m):a.activeOptionIndex===null?!1:((l=a.options[a.activeOptionIndex])==null?void 0:l.id)===f,d=a.isSelected(m),I=v.useRef(null),s=jt({disabled:y,value:m,domRef:I,order:C}),u=v.useContext(et),b=be(i,I,u?u.measureElement:null),h=P(()=>{r.setIsTyping(!1),r.onChange(m)});ne(()=>r.registerOption(f,s),[s,f]);let x=v.useRef(!(a.virtual||a.__demoMode));ne(()=>{if(!a.virtual&&!a.__demoMode)return ke().requestAnimationFrame(()=>{x.current=!0})},[a.virtual,a.__demoMode]),ne(()=>{if(x.current&&a.comboboxState===0&&g&&a.activationTrigger!==0)return ke().requestAnimationFrame(()=>{var k,q;(q=(k=I.current)==null?void 0:k.scrollIntoView)==null||q.call(k,{block:"nearest"})})},[I,g,a.comboboxState,a.activationTrigger,a.activeOptionIndex]);let E=P(k=>{k.preventDefault(),k.button===Te.Left&&(y||(h(),Mt()||requestAnimationFrame(()=>M()),a.mode===0&&r.closeCombobox()))}),_=P(()=>{if(y)return r.goToOption(j.Nothing);let k=a.calculateIndex(m);r.goToOption(j.Specific,k)}),U=yt(),L=P(k=>U.update(k)),N=P(k=>{if(!U.wasMoved(k)||y||g)return;let q=a.calculateIndex(m);r.goToOption(j.Specific,q,0)}),D=P(k=>{U.wasMoved(k)&&(y||g&&(a.optionsPropsRef.current.hold||r.goToOption(j.Nothing)))}),B=v.useMemo(()=>({active:g,focus:g,selected:d,disabled:y}),[g,d,y]),O={id:f,ref:b,role:"option",tabIndex:y===!0?void 0:-1,"aria-disabled":y===!0?!0:void 0,"aria-selected":d,disabled:void 0,onMouseDown:E,onFocus:_,onPointerEnter:L,onMouseEnter:L,onPointerMove:N,onMouseMove:N,onPointerLeave:D,onMouseLeave:D};return de()({ourProps:O,theirProps:p,slot:B,defaultTag:wn,name:"Combobox.Option"})}let Cn=ce(vn),Mn=ce(Sn),tt=ce(xn),Pn=dt,nt=ce(On),ot=ce(Tn),Rn=Object.assign(Cn,{Input:tt,Button:Mn,Label:Pn,Options:nt,Option:ot});var Q={},he={},Se,je;function An(){if(je)return Se;je=1;var e="Expected a function",i=NaN,t="[object Symbol]",n=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,a=/^0o[0-7]+$/i,r=parseInt,c=typeof ge=="object"&&ge&&ge.Object===Object&&ge,f=typeof self=="object"&&self&&self.Object===Object&&self,m=c||f||Function("return this")(),y=Object.prototype,C=y.toString,p=Math.max,M=Math.min,g=function(){return m.Date.now()};function d(h,x,E){var _,U,L,N,D,B,O=0,k=!1,q=!1,G=!0;if(typeof h!="function")throw new TypeError(e);x=b(x)||0,I(E)&&(k=!!E.leading,q="maxWait"in E,L=q?p(b(E.maxWait)||0,x):L,G="trailing"in E?!!E.trailing:G);function J(w){var A=_,H=U;return _=U=void 0,O=w,N=h.apply(H,A),N}function Z(w){return O=w,D=setTimeout(F,x),k?J(w):N}function oe(w){var A=w-B,H=w-O,pe=x-A;return q?M(pe,L-H):pe}function ee(w){var A=w-B,H=w-O;return B===void 0||A>=x||A<0||q&&H>=L}function F(){var w=g();if(ee(w))return S(w);D=setTimeout(F,oe(w))}function S(w){return D=void 0,G&&_?J(w):(_=U=void 0,N)}function W(){D!==void 0&&clearTimeout(D),O=0,_=B=U=D=void 0}function z(){return D===void 0?N:S(g())}function V(){var w=g(),A=ee(w);if(_=arguments,U=this,B=w,A){if(D===void 0)return Z(B);if(q)return D=setTimeout(F,x),J(B)}return D===void 0&&(D=setTimeout(F,x)),N}return V.cancel=W,V.flush=z,V}function I(h){var x=typeof h;return!!h&&(x=="object"||x=="function")}function s(h){return!!h&&typeof h=="object"}function u(h){return typeof h=="symbol"||s(h)&&C.call(h)==t}function b(h){if(typeof h=="number")return h;if(u(h))return i;if(I(h)){var x=typeof h.valueOf=="function"?h.valueOf():h;h=I(x)?x+"":x}if(typeof h!="string")return h===0?h:+h;h=h.replace(n,"");var E=l.test(h);return E||a.test(h)?r(h.slice(2),E?2:8):o.test(h)?i:+h}return Se=d,Se}var ae={},Le;function _n(){return Le||(Le=1,Object.defineProperty(ae,"__esModule",{value:!0}),ae.compose=function(){for(var i=arguments.length,t=Array(i),n=0;n<i;n++)t[n]=arguments[n];return function(){for(var o=arguments.length,l=Array(o),a=0;a<o;a++)l[a]=arguments[a];t.forEach(function(r){return r&&r.apply(void 0,l)})}},ae.pick=function(i){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return n.reduce(function(l,a){return i&&i.hasOwnProperty(a)&&(l[a]=i[a]),l},{})}),ae}var Be;function kn(){if(Be)return he;Be=1,Object.defineProperty(he,"__esModule",{value:!0});var e=Object.assign||function(g){for(var d=1;d<arguments.length;d++){var I=arguments[d];for(var s in I)Object.prototype.hasOwnProperty.call(I,s)&&(g[s]=I[s])}return g},i=function(){function g(d,I){for(var s=0;s<I.length;s++){var u=I[s];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(d,u.key,u)}}return function(d,I,s){return I&&g(d.prototype,I),s&&g(d,s),d}}(),t=at(),n=f(t),o=ut(),l=f(o),a=An(),r=f(a),c=_n();function f(g){return g&&g.__esModule?g:{default:g}}function m(g,d){if(!(g instanceof d))throw new TypeError("Cannot call a class as a function")}function y(g,d){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:g}function C(g,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);g.prototype=Object.create(d&&d.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(g,d):g.__proto__=d)}var p=function(d){return{mainText:d.main_text,secondaryText:d.secondary_text}},M=function(g){C(d,g);function d(I){m(this,d);var s=y(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,I));return s.init=function(){if(!window.google)throw new Error("[react-places-autocomplete]: Google Maps JavaScript API library must be loaded. See: https://github.com/kenny-hibino/react-places-autocomplete#load-google-library");if(!window.google.maps.places)throw new Error("[react-places-autocomplete]: Google Maps Places library must be loaded. Please add `libraries=places` to the src URL. See: https://github.com/kenny-hibino/react-places-autocomplete#load-google-library");s.autocompleteService=new window.google.maps.places.AutocompleteService,s.autocompleteOK=window.google.maps.places.PlacesServiceStatus.OK,s.setState(function(u){return u.ready?null:{ready:!0}})},s.autocompleteCallback=function(u,b){if(s.setState({loading:!1}),b!==s.autocompleteOK){s.props.onError(b,s.clearSuggestions);return}var h=s.props.highlightFirstSuggestion;s.setState({suggestions:u.map(function(x,E){return{id:x.id,description:x.description,placeId:x.place_id,active:!!(h&&E===0),index:E,formattedSuggestion:p(x.structured_formatting),matchedSubstrings:x.matched_substrings,terms:x.terms,types:x.types}})})},s.fetchPredictions=function(){var u=s.props.value;u.length&&(s.setState({loading:!0}),s.autocompleteService.getPlacePredictions(e({},s.props.searchOptions,{input:u}),s.autocompleteCallback))},s.clearSuggestions=function(){s.setState({suggestions:[]})},s.clearActive=function(){s.setState({suggestions:s.state.suggestions.map(function(u){return e({},u,{active:!1})})})},s.handleSelect=function(u,b,h){s.clearSuggestions(),s.props.onSelect?s.props.onSelect(u,b,h):s.props.onChange(u)},s.getActiveSuggestion=function(){return s.state.suggestions.find(function(u){return u.active})},s.selectActiveAtIndex=function(u){var b=s.state.suggestions.find(function(h){return h.index===u}).description;s.setActiveAtIndex(u),s.props.onChange(b)},s.selectUserInputValue=function(){s.clearActive(),s.props.onChange(s.state.userInputValue)},s.handleEnterKey=function(){var u=s.getActiveSuggestion();u===void 0?s.handleSelect(s.props.value,null,null):s.handleSelect(u.description,u.placeId,u)},s.handleDownKey=function(){if(s.state.suggestions.length!==0){var u=s.getActiveSuggestion();u===void 0?s.selectActiveAtIndex(0):u.index===s.state.suggestions.length-1?s.selectUserInputValue():s.selectActiveAtIndex(u.index+1)}},s.handleUpKey=function(){if(s.state.suggestions.length!==0){var u=s.getActiveSuggestion();u===void 0?s.selectActiveAtIndex(s.state.suggestions.length-1):u.index===0?s.selectUserInputValue():s.selectActiveAtIndex(u.index-1)}},s.handleInputKeyDown=function(u){switch(u.key){case"Enter":u.preventDefault(),s.handleEnterKey();break;case"ArrowDown":u.preventDefault(),s.handleDownKey();break;case"ArrowUp":u.preventDefault(),s.handleUpKey();break;case"Escape":s.clearSuggestions();break}},s.setActiveAtIndex=function(u){s.setState({suggestions:s.state.suggestions.map(function(b,h){return h===u?e({},b,{active:!0}):e({},b,{active:!1})})})},s.handleInputChange=function(u){var b=u.target.value;if(s.props.onChange(b),s.setState({userInputValue:b}),!b){s.clearSuggestions();return}s.props.shouldFetchSuggestions&&s.debouncedFetchPredictions()},s.handleInputOnBlur=function(){s.mousedownOnSuggestion||s.clearSuggestions()},s.getActiveSuggestionId=function(){var u=s.getActiveSuggestion();return u?"PlacesAutocomplete__suggestion-"+u.placeId:void 0},s.getIsExpanded=function(){return s.state.suggestions.length>0},s.getInputProps=function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(u.hasOwnProperty("value"))throw new Error("[react-places-autocomplete]: getInputProps does not accept `value`. Use `value` prop instead");if(u.hasOwnProperty("onChange"))throw new Error("[react-places-autocomplete]: getInputProps does not accept `onChange`. Use `onChange` prop instead");var b={type:"text",autoComplete:"off",role:"combobox","aria-autocomplete":"list","aria-expanded":s.getIsExpanded(),"aria-activedescendant":s.getActiveSuggestionId(),disabled:!s.state.ready};return e({},b,u,{onKeyDown:(0,c.compose)(s.handleInputKeyDown,u.onKeyDown),onBlur:(0,c.compose)(s.handleInputOnBlur,u.onBlur),value:s.props.value,onChange:function(x){s.handleInputChange(x)}})},s.getSuggestionItemProps=function(u){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=s.handleSuggestionMouseEnter.bind(s,u.index),x=s.handleSuggestionClick.bind(s,u);return e({},b,{key:u.id,id:s.getActiveSuggestionId(),role:"option",onMouseEnter:(0,c.compose)(h,b.onMouseEnter),onMouseLeave:(0,c.compose)(s.handleSuggestionMouseLeave,b.onMouseLeave),onMouseDown:(0,c.compose)(s.handleSuggestionMouseDown,b.onMouseDown),onMouseUp:(0,c.compose)(s.handleSuggestionMouseUp,b.onMouseUp),onTouchStart:(0,c.compose)(s.handleSuggestionTouchStart,b.onTouchStart),onTouchEnd:(0,c.compose)(s.handleSuggestionMouseUp,b.onTouchEnd),onClick:(0,c.compose)(x,b.onClick)})},s.handleSuggestionMouseEnter=function(u){s.setActiveAtIndex(u)},s.handleSuggestionMouseLeave=function(){s.mousedownOnSuggestion=!1,s.clearActive()},s.handleSuggestionMouseDown=function(u){u.preventDefault(),s.mousedownOnSuggestion=!0},s.handleSuggestionTouchStart=function(){s.mousedownOnSuggestion=!0},s.handleSuggestionMouseUp=function(){s.mousedownOnSuggestion=!1},s.handleSuggestionClick=function(u,b){b&&b.preventDefault&&b.preventDefault();var h=u.description,x=u.placeId;s.handleSelect(h,x,u),setTimeout(function(){s.mousedownOnSuggestion=!1})},s.state={loading:!1,suggestions:[],userInputValue:I.value,ready:!I.googleCallbackName},s.debouncedFetchPredictions=(0,r.default)(s.fetchPredictions,I.debounce),s}return i(d,[{key:"componentDidMount",value:function(){var s=this.props.googleCallbackName;if(s){var u=window.google&&window.google.maps&&window.google.maps.places;u?this.init():window[s]=this.init}else this.init()}},{key:"componentWillUnmount",value:function(){var s=this.props.googleCallbackName;s&&window[s]&&delete window[s]}},{key:"render",value:function(){return this.props.children({getInputProps:this.getInputProps,getSuggestionItemProps:this.getSuggestionItemProps,loading:this.state.loading,suggestions:this.state.suggestions})}}]),d}(n.default.Component);return M.propTypes={onChange:l.default.func.isRequired,value:l.default.string.isRequired,children:l.default.func.isRequired,onError:l.default.func,onSelect:l.default.func,searchOptions:l.default.shape({bounds:l.default.object,componentRestrictions:l.default.object,location:l.default.object,offset:l.default.oneOfType([l.default.number,l.default.string]),radius:l.default.oneOfType([l.default.number,l.default.string]),types:l.default.array}),debounce:l.default.number,highlightFirstSuggestion:l.default.bool,shouldFetchSuggestions:l.default.bool,googleCallbackName:l.default.string},M.defaultProps={onError:function(d,I){return console.error(`[react-places-autocomplete]: error happened when fetching data from Google Maps API.
Please check the docs here (https://developers.google.com/maps/documentation/javascript/places#place_details_responses)
Status: `,d)},searchOptions:{},debounce:200,highlightFirstSuggestion:!1,shouldFetchSuggestions:!0},he.default=M,he}var re={},Ne;function $n(){return Ne||(Ne=1,Object.defineProperty(re,"__esModule",{value:!0}),re.geocodeByAddress=function(i){var t=new window.google.maps.Geocoder,n=window.google.maps.GeocoderStatus.OK;return new Promise(function(o,l){t.geocode({address:i},function(a,r){r!==n&&l(r),o(a)})})},re.getLatLng=function(i){return new Promise(function(t,n){try{var o={lat:i.geometry.location.lat(),lng:i.geometry.location.lng()};t(o)}catch(l){n(l)}})},re.geocodeByPlaceId=function(i){var t=new window.google.maps.Geocoder,n=window.google.maps.GeocoderStatus.OK;return new Promise(function(o,l){t.geocode({placeId:i},function(a,r){r!==n&&l(r),o(a)})})}),re}var qe;function Dn(){if(qe)return Q;qe=1,Object.defineProperty(Q,"__esModule",{value:!0}),Q.getLatLng=Q.geocodeByPlaceId=Q.geocodeByAddress=void 0;var e=kn(),i=n(e),t=$n();function n(o){return o&&o.__esModule?o:{default:o}}return Q.geocodeByAddress=t.geocodeByAddress,Q.geocodeByPlaceId=t.geocodeByPlaceId,Q.getLatLng=t.getLatLng,Q.default=i.default,Q}var Ie=Dn();const Fn=lt(Ie),zn=({posCallback:e,centerCallback:i,singleMarker:t,singleMarkerCallback:n,eventAddress:o,eventLatitude:l,eventLongitude:a})=>{const[r,c]=v.useState(o||""),[f,m]=v.useState({lat:45.3850225,lng:-75.6946679}),[y,C]=v.useState([]),[p,M]=v.useState({lat:l||45.3850225,lng:a||-75.6946679}),g=async d=>{const I=await Ie.geocodeByAddress(d),s=await Ie.getLatLng(I[0]),u=I[0].place_id;c(d),m({lat:s.lat,lng:s.lng}),C([...y,{name:d,id:u,position:s}]),M(s)};return v.useEffect(()=>{e&&e(y)},[y,e]),v.useEffect(()=>{i&&i(f)},[f,i]),v.useEffect(()=>{t&&n&&n({coordinates:p,address:r})},[p,r,n,t]),Y.jsx("div",{className:"cu-locationpicker not-prose",children:Y.jsx(Fn,{value:r,onChange:c,onSelect:g,children:({getInputProps:d,suggestions:I,getSuggestionItemProps:s})=>Y.jsxs(Rn,{value:r,onChange:g,children:[Y.jsxs("div",{className:"relative",children:[Y.jsx(Bt,{className:"pointer-events-none absolute left-3.5 top-3.5 h-5 w-5 text-cu-black-400","aria-hidden":"true"}),Y.jsx(tt,{className:"w-full h-12 pl-10 pr-4 bg-white border rounded-lg border-cu-black-200 text-cu-black-800 placeholder-cu-black-400 focus:border-cu-black-400 focus:outline-none focus:ring-0 sm:text-sm",...d({placeholder:"Type address"})}),r&&Y.jsx(kt,{className:"absolute right-3.5 top-3.5 h-5 w-5 text-cu-black-400","aria-hidden":"true",onClick:()=>{c("")}})]}),Y.jsx(nt,{className:"mt-3 max-h-80 divide-y divide-cu-black-100 overflow-y-auto bg-white px-1.5 text-sm text-cu-black-800",children:I.map(u=>Y.jsx(ot,{value:u,children:({active:b})=>Y.jsx("ul",{children:v.createElement("li",{...s(u),className:`p-4 text-cu-black-600 hover:cursor-pointer ${b?"bg-cu-black-50 text-cu-black-900":"bg-white"}`,key:u.index},u.description)})},u.index))})]})})})};zn.__docgenInfo={description:"",methods:[],displayName:"LocationPicker",props:{posCallback:{required:!1,tsType:{name:"signature",type:"function",raw:"(pos: { name: string; id: string; position: object }[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ name: string; id: string; position: object }",signature:{properties:[{key:"name",value:{name:"string",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"position",value:{name:"object",required:!0}}]}}],raw:"{ name: string; id: string; position: object }[]"},name:"pos"}],return:{name:"void"}}},description:""},centerCallback:{required:!1,tsType:{name:"signature",type:"function",raw:"(center: { lat: number; lng: number }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ lat: number; lng: number }",signature:{properties:[{key:"lat",value:{name:"number",required:!0}},{key:"lng",value:{name:"number",required:!0}}]}},name:"center"}],return:{name:"void"}}},description:""},singleMarker:{required:!1,tsType:{name:"boolean"},description:""},singleMarkerCallback:{required:!1,tsType:{name:"signature",type:"function",raw:"(marker: { coordinates: { lat: number; lng: number }; address: string }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ coordinates: { lat: number; lng: number }; address: string }",signature:{properties:[{key:"coordinates",value:{name:"signature",type:"object",raw:"{ lat: number; lng: number }",signature:{properties:[{key:"lat",value:{name:"number",required:!0}},{key:"lng",value:{name:"number",required:!0}}]},required:!0}},{key:"address",value:{name:"string",required:!0}}]}},name:"marker"}],return:{name:"void"}}},description:""},eventLatitude:{required:!1,tsType:{name:"number"},description:""},eventLongitude:{required:!1,tsType:{name:"number"},description:""},eventAddress:{required:!1,tsType:{name:"string"},description:""}}};export{zn as L};
