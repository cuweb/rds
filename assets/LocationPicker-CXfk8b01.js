import{j as V}from"./jsx-runtime-B9B14buI.js";import{r as d,e as T}from"./index-DxDX2vOa.js";import{p as ct}from"./index-BKNjMPK8.js";import{c as he}from"./_commonjsHelpers-BosuxZz1.js";import{f as Ke,s as Ve,E as dt,V as pt,W as ft,R as mt,K as gt,M as ht,Y as vt,p as bt,n as qe,m as $e,Z as we,a0 as xt,$ as We,g as Ge,h as St,i as yt,q as Et,v as It,z as Ot,d as wt,b as Tt,y as Ct,A as Mt,B as De,e as Pt,C as Rt,L as D,o as L,r as Fe,j as _t,a1 as At,Q as je,_ as kt,U as $t}from"./portal-DAmNxAVq.js";import{r as Y}from"./index-BnopnzSw.js";import{o as E,p as He,m as Dt,O as ze,K as de,a as se,n as Z,L as pe,c as Ft,i as ve,y as be,_ as Te,u as jt,x as zt,R as Lt,s as Bt,e as Le}from"./use-server-handoff-complete-yi65jfDX.js";import{F as Nt}from"./MagnifyingGlassIcon-C7RLA2QC.js";function Ut(t,i,n){let[e,o]=d.useState(n),s=t!==void 0,l=d.useRef(s),r=d.useRef(!1),a=d.useRef(!1);return s&&!l.current&&!r.current?(r.current=!0,l.current=s,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!s&&l.current&&!a.current&&(a.current=!0,l.current=s,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[s?t:e,E(c=>(s||o(c),i==null?void 0:i(c)))]}function Kt(t){let[i]=d.useState(t);return i}function Je(t={},i=null,n=[]){for(let[e,o]of Object.entries(t))Xe(n,Qe(i,e),o);return n}function Qe(t,i){return t?t+"["+i+"]":i}function Xe(t,i,n){if(Array.isArray(n))for(let[e,o]of n.entries())Xe(t,Qe(i,e.toString()),o);else n instanceof Date?t.push([i,n.toISOString()]):typeof n=="boolean"?t.push([i,n?"1":"0"]):typeof n=="string"?t.push([i,n]):typeof n=="number"?t.push([i,`${n}`]):n==null?t.push([i,""]):Je(n,i,t)}let Vt=d.createContext(null);function qt({children:t}){let i=d.useContext(Vt);if(!i)return T.createElement(T.Fragment,null,t);let{target:n}=i;return n?Y.createPortal(T.createElement(T.Fragment,null,t),n):null}function Wt({data:t,form:i,disabled:n,onReset:e,overrides:o}){let[s,l]=d.useState(null),r=He();return d.useEffect(()=>{if(e&&s)return r.addEventListener(s,"reset",e)},[s,i,e]),T.createElement(qt,null,T.createElement(Gt,{setForm:l,formId:i}),Je(t).map(([a,c])=>T.createElement(Ke,{features:Ve.Hidden,...Dt({key:a,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:i,disabled:n,name:a,value:c,...o})})))}function Gt({setForm:t,formId:i}){return d.useEffect(()=>{if(i){let n=document.getElementById(i);n&&t(n)}},[t,i]),i?null:T.createElement(Ke,{features:Ve.Hidden,as:"input",type:"hidden",hidden:!0,readOnly:!0,ref:n=>{if(!n)return;let e=n.closest("form");e&&t(e)}})}function ie(t,i,n){let e=n.initialDeps??[],o;return()=>{var s,l,r,a;let c;n.key&&((s=n.debug)!=null&&s.call(n))&&(c=Date.now());const p=t();if(!(p.length!==e.length||p.some((u,I)=>e[I]!==u)))return o;e=p;let S;if(n.key&&((l=n.debug)!=null&&l.call(n))&&(S=Date.now()),o=i(...p),n.key&&((r=n.debug)!=null&&r.call(n))){const u=Math.round((Date.now()-c)*100)/100,I=Math.round((Date.now()-S)*100)/100,y=I/16,f=(O,C)=>{for(O=String(O);O.length<C;)O=" "+O;return O};console.info(`%câ± ${f(I,5)} /${f(u,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*y,120))}deg 100% 31%);`,n==null?void 0:n.key)}return(a=n==null?void 0:n.onChange)==null||a.call(n,o),o}}function Se(t,i){if(t===void 0)throw new Error("Unexpected undefined");return t}const Ht=(t,i)=>Math.abs(t-i)<1,Jt=(t,i,n)=>{let e;return function(...o){t.clearTimeout(e),e=t.setTimeout(()=>i.apply(this,o),n)}},Qt=t=>t,Xt=t=>{const i=Math.max(t.startIndex-t.overscan,0),n=Math.min(t.endIndex+t.overscan,t.count-1),e=[];for(let o=i;o<=n;o++)e.push(o);return e},Yt=(t,i)=>{const n=t.scrollElement;if(!n)return;const e=t.targetWindow;if(!e)return;const o=l=>{const{width:r,height:a}=l;i({width:Math.round(r),height:Math.round(a)})};if(o(n.getBoundingClientRect()),!e.ResizeObserver)return()=>{};const s=new e.ResizeObserver(l=>{const r=l[0];if(r!=null&&r.borderBoxSize){const a=r.borderBoxSize[0];if(a){o({width:a.inlineSize,height:a.blockSize});return}}o(n.getBoundingClientRect())});return s.observe(n,{box:"border-box"}),()=>{s.unobserve(n)}},Be={passive:!0},Zt=typeof window>"u"?!0:"onscrollend"in window,en=(t,i)=>{const n=t.scrollElement;if(!n)return;const e=t.targetWindow;if(!e)return;let o=0;const s=Zt?()=>{}:Jt(e,()=>{i(o,!1)},t.options.isScrollingResetDelay),l=c=>()=>{const{horizontal:p,isRtl:m}=t.options;o=p?n.scrollLeft*(m&&-1||1):n.scrollTop,s(),i(o,c)},r=l(!0),a=l(!1);return a(),n.addEventListener("scroll",r,Be),n.addEventListener("scrollend",a,Be),()=>{n.removeEventListener("scroll",r),n.removeEventListener("scrollend",a)}},tn=(t,i,n)=>{if(i!=null&&i.borderBoxSize){const e=i.borderBoxSize[0];if(e)return Math.round(e[n.options.horizontal?"inlineSize":"blockSize"])}return Math.round(t.getBoundingClientRect()[n.options.horizontal?"width":"height"])},nn=(t,{adjustments:i=0,behavior:n},e)=>{var o,s;const l=t+i;(s=(o=e.scrollElement)==null?void 0:o.scrollTo)==null||s.call(o,{[e.options.horizontal?"left":"top"]:l,behavior:n})};class on{constructor(i){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const e=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(o=>{o.forEach(s=>{this._measureElement(s.target,s)})}));return{disconnect:()=>{var o;(o=e())==null||o.disconnect(),n=null},observe:o=>{var s;return(s=e())==null?void 0:s.observe(o,{box:"border-box"})},unobserve:o=>{var s;return(s=e())==null?void 0:s.unobserve(o)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([e,o])=>{typeof o>"u"&&delete n[e]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Qt,rangeExtractor:Xt,onChange:()=>{},measureElement:tn,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,...n}},this.notify=n=>{var e,o;(o=(e=this.options).onChange)==null||o.call(e,this,n)},this.maybeNotify=ie(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const e=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==e){if(this.cleanup(),!e){this.maybeNotify();return}this.scrollElement=e,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(o=>{this.observer.observe(o)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,o=>{this.scrollRect=o,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(o,s)=>{this.scrollAdjustments=0,this.scrollDirection=s?this.getScrollOffset()<o?"forward":"backward":null,this.scrollOffset=o,this.isScrolling=s,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,e)=>{const o=new Map,s=new Map;for(let l=e-1;l>=0;l--){const r=n[l];if(o.has(r.lane))continue;const a=s.get(r.lane);if(a==null||r.end>a.end?s.set(r.lane,r):r.end<a.end&&o.set(r.lane,!0),o.size===this.options.lanes)break}return s.size===this.options.lanes?Array.from(s.values()).sort((l,r)=>l.end===r.end?l.index-r.index:l.end-r.end)[0]:void 0},this.getMeasurementOptions=ie(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(n,e,o,s,l)=>(this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:e,scrollMargin:o,getItemKey:s,enabled:l}),{key:!1}),this.getMeasurements=ie(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:e,scrollMargin:o,getItemKey:s,enabled:l},r)=>{if(!l)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(p=>{this.itemSizeCache.set(p.key,p.size)}));const a=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const c=this.measurementsCache.slice(0,a);for(let p=a;p<n;p++){const m=s(p),S=this.options.lanes===1?c[p-1]:this.getFurthestMeasurement(c,p),u=S?S.end+this.options.gap:e+o,I=r.get(m),y=typeof I=="number"?I:this.options.estimateSize(p),f=u+y,O=S?S.lane:p%this.options.lanes;c[p]={index:p,start:u,size:y,end:f,key:m,lane:O}}return this.measurementsCache=c,c},{key:!1,debug:()=>this.options.debug}),this.calculateRange=ie(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset()],(n,e,o)=>this.range=n.length>0&&e>0?rn({measurements:n,outerSize:e,scrollOffset:o}):null,{key:!1,debug:()=>this.options.debug}),this.getIndexes=ie(()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count],(n,e,o,s)=>e===null?[]:n({startIndex:e.startIndex,endIndex:e.endIndex,overscan:o,count:s}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const e=this.options.indexAttribute,o=n.getAttribute(e);return o?parseInt(o,10):(console.warn(`Missing attribute name '${e}={index}' on measured element.`),-1)},this._measureElement=(n,e)=>{const o=this.indexFromElement(n),s=this.measurementsCache[o];if(!s)return;const l=s.key,r=this.elementsCache.get(l);r!==n&&(r&&this.observer.unobserve(r),this.observer.observe(n),this.elementsCache.set(l,n)),n.isConnected&&this.resizeItem(o,this.options.measureElement(n,e,this))},this.resizeItem=(n,e)=>{const o=this.measurementsCache[n];if(!o)return;const s=this.itemSizeCache.get(o.key)??o.size,l=e-s;l!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(o,l,this):o.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=l,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(o.index),this.itemSizeCache=new Map(this.itemSizeCache.set(o.key,e)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((e,o)=>{e.isConnected||(this.observer.unobserve(e),this.elementsCache.delete(o))});return}this._measureElement(n,void 0)},this.getVirtualItems=ie(()=>[this.getIndexes(),this.getMeasurements()],(n,e)=>{const o=[];for(let s=0,l=n.length;s<l;s++){const r=n[s],a=e[r];o.push(a)}return o},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const e=this.getMeasurements();if(e.length!==0)return Se(e[Ye(0,e.length-1,o=>Se(e[o]).start,n)])},this.getOffsetForAlignment=(n,e)=>{const o=this.getSize(),s=this.getScrollOffset();e==="auto"&&(n<=s?e="start":n>=s+o?e="end":e="start"),e==="start"?n=n:e==="end"?n=n-o:e==="center"&&(n=n-o/2);const l=this.options.horizontal?"scrollWidth":"scrollHeight",a=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[l]:this.scrollElement[l]:0)-o;return Math.max(Math.min(a,n),0)},this.getOffsetForIndex=(n,e="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const o=this.measurementsCache[n];if(!o)return;const s=this.getSize(),l=this.getScrollOffset();if(e==="auto")if(o.end>=l+s-this.options.scrollPaddingEnd)e="end";else if(o.start<=l+this.options.scrollPaddingStart)e="start";else return[l,e];const r=e==="end"?o.end+this.options.scrollPaddingEnd:o.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(r,e),e]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(n,{align:e="start",behavior:o}={})=>{this.cancelScrollToIndex(),o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,e),{adjustments:void 0,behavior:o})},this.scrollToIndex=(n,{align:e="auto",behavior:o}={})=>{n=Math.max(0,Math.min(n,this.options.count-1)),this.cancelScrollToIndex(),o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const s=this.getOffsetForIndex(n,e);if(!s)return;const[l,r]=s;this._scrollToOffset(l,{adjustments:void 0,behavior:o}),o!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(n))){const[c]=Se(this.getOffsetForIndex(n,r));Ht(c,this.getScrollOffset())||this.scrollToIndex(n,{align:r,behavior:o})}else this.scrollToIndex(n,{align:r,behavior:o})}))},this.scrollBy=(n,{behavior:e}={})=>{this.cancelScrollToIndex(),e==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:e})},this.getTotalSize=()=>{var n;const e=this.getMeasurements();let o;return e.length===0?o=this.options.paddingStart:o=this.options.lanes===1?((n=e[e.length-1])==null?void 0:n.end)??0:Math.max(...e.slice(-this.options.lanes).map(s=>s.end)),Math.max(o-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:e,behavior:o})=>{this.options.scrollToFn(n,{behavior:o,adjustments:e},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(i)}}const Ye=(t,i,n,e)=>{for(;t<=i;){const o=(t+i)/2|0,s=n(o);if(s<e)t=o+1;else if(s>e)i=o-1;else return o}return t>0?t-1:0};function rn({measurements:t,outerSize:i,scrollOffset:n}){const e=t.length-1,s=Ye(0,e,r=>t[r].start,n);let l=s;for(;l<e&&t[l].end<n+i;)l++;return{startIndex:s,endIndex:l}}const sn=typeof document<"u"?d.useLayoutEffect:d.useEffect;function ln(t){const i=d.useReducer(()=>({}),{})[1],n={...t,onChange:(o,s)=>{var l;s?Y.flushSync(i):i(),(l=t.onChange)==null||l.call(t,o,s)}},[e]=d.useState(()=>new on(n));return e.setOptions(n),d.useEffect(()=>e._didMount(),[]),sn(()=>e._willUpdate()),e}function an(t){return ln({observeElementRect:Yt,observeElementOffset:en,scrollToFn:nn,...t})}function un(t,i){return t!==null&&i!==null&&typeof t=="object"&&typeof i=="object"&&"id"in t&&"id"in i?t.id===i.id:t===i}function cn(t=un){return d.useCallback((i,n)=>{if(typeof t=="string"){let e=t;return(i==null?void 0:i[e])===(n==null?void 0:n[e])}return t(i,n)},[t])}function Ze(t){let i=d.useRef({value:"",selectionStart:null,selectionEnd:null});return dt(t,"blur",n=>{let e=n.target;e instanceof HTMLInputElement&&(i.current={value:e.value,selectionStart:e.selectionStart,selectionEnd:e.selectionEnd})}),E(()=>{if(document.activeElement!==t&&t instanceof HTMLInputElement&&t.isConnected){if(t.focus({preventScroll:!0}),t.value!==i.current.value)t.setSelectionRange(t.value.length,t.value.length);else{let{selectionStart:n,selectionEnd:e}=i.current;n!==null&&e!==null&&t.setSelectionRange(n,e)}i.current={value:"",selectionStart:null,selectionEnd:null}}})}function dn({children:t,freeze:i}){let n=Ie(i,t);return T.createElement(T.Fragment,null,n)}function Ie(t,i){let[n,e]=d.useState(i);return!t&&n!==i&&e(i),t?n:i}var Ce=(t=>(t[t.Left=0]="Left",t[t.Right=2]="Right",t))(Ce||{}),pn=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(pn||{}),fn=(t=>(t[t.Single=0]="Single",t[t.Multi=1]="Multi",t))(fn||{}),mn=(t=>(t[t.Pointer=0]="Pointer",t[t.Focus=1]="Focus",t[t.Other=2]="Other",t))(mn||{}),gn=(t=>(t[t.OpenCombobox=0]="OpenCombobox",t[t.CloseCombobox=1]="CloseCombobox",t[t.GoToOption=2]="GoToOption",t[t.SetTyping=3]="SetTyping",t[t.RegisterOption=4]="RegisterOption",t[t.UnregisterOption=5]="UnregisterOption",t[t.SetActivationTrigger=6]="SetActivationTrigger",t[t.UpdateVirtualConfiguration=7]="UpdateVirtualConfiguration",t[t.SetInputElement=8]="SetInputElement",t[t.SetButtonElement=9]="SetButtonElement",t[t.SetOptionsElement=10]="SetOptionsElement",t))(gn||{});function ye(t,i=n=>n){let n=t.activeOptionIndex!==null?t.options[t.activeOptionIndex]:null,e=i(t.options.slice()),o=e.length>0&&e[0].dataRef.current.order!==null?e.sort((l,r)=>l.dataRef.current.order-r.dataRef.current.order):kt(e,l=>l.dataRef.current.domRef.current),s=n?o.indexOf(n):null;return s===-1&&(s=null),{options:o,activeOptionIndex:s}}let hn={1(t){var i;return(i=t.dataRef.current)!=null&&i.disabled||t.comboboxState===1?t:{...t,activeOptionIndex:null,comboboxState:1,isTyping:!1,activationTrigger:2,__demoMode:!1}},0(t){var i,n;if((i=t.dataRef.current)!=null&&i.disabled||t.comboboxState===0)return t;if((n=t.dataRef.current)!=null&&n.value){let e=t.dataRef.current.calculateIndex(t.dataRef.current.value);if(e!==-1)return{...t,activeOptionIndex:e,comboboxState:0,__demoMode:!1}}return{...t,comboboxState:0,__demoMode:!1}},3(t,i){return t.isTyping===i.isTyping?t:{...t,isTyping:i.isTyping}},2(t,i){var n,e,o,s;if((n=t.dataRef.current)!=null&&n.disabled||t.optionsElement&&!((e=t.dataRef.current)!=null&&e.optionsPropsRef.current.static)&&t.comboboxState===1)return t;if(t.virtual){let{options:c,disabled:p}=t.virtual,m=i.focus===D.Specific?i.idx:je(i,{resolveItems:()=>c,resolveActiveIndex:()=>{var u,I;return(I=(u=t.activeOptionIndex)!=null?u:c.findIndex(y=>!p(y)))!=null?I:null},resolveDisabled:p,resolveId(){throw new Error("Function not implemented.")}}),S=(o=i.trigger)!=null?o:2;return t.activeOptionIndex===m&&t.activationTrigger===S?t:{...t,activeOptionIndex:m,activationTrigger:S,isTyping:!1,__demoMode:!1}}let l=ye(t);if(l.activeOptionIndex===null){let c=l.options.findIndex(p=>!p.dataRef.current.disabled);c!==-1&&(l.activeOptionIndex=c)}let r=i.focus===D.Specific?i.idx:je(i,{resolveItems:()=>l.options,resolveActiveIndex:()=>l.activeOptionIndex,resolveId:c=>c.id,resolveDisabled:c=>c.dataRef.current.disabled}),a=(s=i.trigger)!=null?s:2;return t.activeOptionIndex===r&&t.activationTrigger===a?t:{...t,...l,isTyping:!1,activeOptionIndex:r,activationTrigger:a,__demoMode:!1}},4:(t,i)=>{var n,e,o;if((n=t.dataRef.current)!=null&&n.virtual)return{...t,options:[...t.options,i.payload]};let s=i.payload,l=ye(t,a=>(a.push(s),a));t.activeOptionIndex===null&&(e=t.dataRef.current)!=null&&e.isSelected(i.payload.dataRef.current.value)&&(l.activeOptionIndex=l.options.indexOf(s));let r={...t,...l,activationTrigger:2};return(o=t.dataRef.current)!=null&&o.__demoMode&&t.dataRef.current.value===void 0&&(r.activeOptionIndex=0),r},5:(t,i)=>{var n;if((n=t.dataRef.current)!=null&&n.virtual)return{...t,options:t.options.filter(o=>o.id!==i.id)};let e=ye(t,o=>{let s=o.findIndex(l=>l.id===i.id);return s!==-1&&o.splice(s,1),o});return{...t,...e,activationTrigger:2}},6:(t,i)=>t.activationTrigger===i.trigger?t:{...t,activationTrigger:i.trigger},7:(t,i)=>{var n,e;if(t.virtual===null)return{...t,virtual:{options:i.options,disabled:(n=i.disabled)!=null?n:()=>!1}};if(t.virtual.options===i.options&&t.virtual.disabled===i.disabled)return t;let o=t.activeOptionIndex;if(t.activeOptionIndex!==null){let s=i.options.indexOf(t.virtual.options[t.activeOptionIndex]);s!==-1?o=s:o=null}return{...t,activeOptionIndex:o,virtual:{options:i.options,disabled:(e=i.disabled)!=null?e:()=>!1}}},8:(t,i)=>t.inputElement===i.element?t:{...t,inputElement:i.element},9:(t,i)=>t.buttonElement===i.element?t:{...t,buttonElement:i.element},10:(t,i)=>t.optionsElement===i.element?t:{...t,optionsElement:i.element}},Me=d.createContext(null);Me.displayName="ComboboxActionsContext";function fe(t){let i=d.useContext(Me);if(i===null){let n=new Error(`<${t} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,fe),n}return i}let et=d.createContext(null);function vn(t){let i=le("VirtualProvider"),{options:n}=i.virtual,[e,o]=d.useMemo(()=>{let c=i.optionsElement;if(!c)return[0,0];let p=window.getComputedStyle(c);return[parseFloat(p.paddingBlockStart||p.paddingTop),parseFloat(p.paddingBlockEnd||p.paddingBottom)]},[i.optionsElement]),s=an({enabled:n.length!==0,scrollPaddingStart:e,scrollPaddingEnd:o,count:n.length,estimateSize(){return 40},getScrollElement(){return i.optionsElement},overscan:12}),[l,r]=d.useState(0);Z(()=>{r(c=>c+1)},[n]);let a=s.getVirtualItems();return a.length===0?null:T.createElement(et.Provider,{value:s},T.createElement("div",{style:{position:"relative",width:"100%",height:`${s.getTotalSize()}px`},ref:c=>{c&&i.activationTrigger!==0&&i.activeOptionIndex!==null&&n.length>i.activeOptionIndex&&s.scrollToIndex(i.activeOptionIndex)}},a.map(c=>{var p;return T.createElement(d.Fragment,{key:c.key},T.cloneElement((p=t.children)==null?void 0:p.call(t,{...t.slot,option:n[c.index]}),{key:`${l}-${c.key}`,"data-index":c.index,"aria-setsize":n.length,"aria-posinset":c.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${c.start}px)`,overflowAnchor:"none"}}))})))}let ce=d.createContext(null);ce.displayName="ComboboxDataContext";function le(t){let i=d.useContext(ce);if(i===null){let n=new Error(`<${t} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,le),n}return i}function bn(t,i){return se(i.type,hn,t,i)}let xn=d.Fragment;function Sn(t,i){var n,e;let o=ft(),{value:s,defaultValue:l,onChange:r,form:a,name:c,by:p,disabled:m=o||!1,onClose:S,__demoMode:u=!1,multiple:I=!1,immediate:y=!1,virtual:f=null,nullable:O,...C}=t,w=Kt(l),[M=I?[]:void 0,_]=Ut(s,r,w),[v,h]=d.useReducer(bn,{dataRef:d.createRef(),comboboxState:u?0:1,isTyping:!1,options:[],virtual:f?{options:f.options,disabled:(n=f.disabled)!=null?n:()=>!1}:null,activeOptionIndex:null,activationTrigger:2,inputElement:null,buttonElement:null,optionsElement:null,__demoMode:u}),R=d.useRef(!1),N=d.useRef({static:!1,hold:!1}),B=cn(p),G=E(b=>f?p===null?f.options.indexOf(b):f.options.findIndex(P=>B(P,b)):v.options.findIndex(P=>B(P.dataRef.current.value,b))),Q=d.useCallback(b=>se(x.mode,{1:()=>M.some(P=>B(P,b)),0:()=>B(M,b)}),[M]),H=E(b=>v.activeOptionIndex===G(b)),x=d.useMemo(()=>({...v,immediate:y,optionsPropsRef:N,value:M,defaultValue:w,disabled:m,mode:I?1:0,virtual:f?v.virtual:null,get activeOptionIndex(){if(R.current&&v.activeOptionIndex===null&&(f?f.options.length>0:v.options.length>0)){if(f){let P=f.options.findIndex(W=>{var ge,ke;return!((ke=(ge=f.disabled)==null?void 0:ge.call(f,W))!=null&&ke)});if(P!==-1)return P}let b=v.options.findIndex(P=>!P.dataRef.current.disabled);if(b!==-1)return b}return v.activeOptionIndex},calculateIndex:G,compare:B,isSelected:Q,isActive:H}),[M,w,m,I,u,v,f]);Z(()=>{var b;f&&h({type:7,options:f.options,disabled:(b=f.disabled)!=null?b:null})},[f,f==null?void 0:f.options,f==null?void 0:f.disabled]),Z(()=>{v.dataRef.current=x},[x]);let A=x.comboboxState===0;mt(A,[x.buttonElement,x.inputElement,x.optionsElement],()=>z.closeCombobox());let q=d.useMemo(()=>{var b,P,W;return{open:x.comboboxState===0,disabled:m,activeIndex:x.activeOptionIndex,activeOption:x.activeOptionIndex===null?null:x.virtual?x.virtual.options[(b=x.activeOptionIndex)!=null?b:0]:(W=(P=x.options[x.activeOptionIndex])==null?void 0:P.dataRef.current.value)!=null?W:null,value:M}},[x,m,M]),X=E(()=>{if(x.activeOptionIndex!==null){if(z.setIsTyping(!1),x.virtual)g(x.virtual.options[x.activeOptionIndex]);else{let{dataRef:b}=x.options[x.activeOptionIndex];g(b.current.value)}z.goToOption(D.Specific,x.activeOptionIndex)}}),te=E(()=>{h({type:0}),R.current=!0}),oe=E(()=>{h({type:1}),R.current=!1,S==null||S()}),ae=E(b=>{h({type:3,isTyping:b})}),ue=E((b,P,W)=>(R.current=!1,b===D.Specific?h({type:2,focus:D.Specific,idx:P,trigger:W}):h({type:2,focus:b,trigger:W}))),j=E((b,P)=>(h({type:4,payload:{id:b,dataRef:P}}),()=>{x.isActive(P.current.value)&&(R.current=!0),h({type:5,id:b})})),g=E(b=>se(x.mode,{0(){return _==null?void 0:_(b)},1(){let P=x.value.slice(),W=P.findIndex(ge=>B(ge,b));return W===-1?P.push(b):P.splice(W,1),_==null?void 0:_(P)}})),U=E(b=>{h({type:6,trigger:b})}),F=E(b=>{h({type:8,element:b})}),K=E(b=>{h({type:9,element:b})}),$=E(b=>{h({type:10,element:b})}),z=d.useMemo(()=>({onChange:g,registerOption:j,goToOption:ue,setIsTyping:ae,closeCombobox:oe,openCombobox:te,setActivationTrigger:U,selectActiveOption:X,setInputElement:F,setButtonElement:K,setOptionsElement:$}),[]),[ne,st]=gt(),lt=i===null?{}:{ref:i},at=d.useCallback(()=>{if(w!==void 0)return _==null?void 0:_(w)},[_,w]),ut=pe();return T.createElement(st,{value:ne,props:{htmlFor:(e=x.inputElement)==null?void 0:e.id},slot:{open:x.comboboxState===0,disabled:m}},T.createElement(ht,null,T.createElement(Me.Provider,{value:z},T.createElement(ce.Provider,{value:x},T.createElement(Ft,{value:se(x.comboboxState,{0:ve.Open,1:ve.Closed})},c!=null&&T.createElement(Wt,{disabled:m,data:M!=null?{[c]:M}:{},form:a,onReset:at}),ut({ourProps:lt,theirProps:C,slot:q,defaultTag:xn,name:"Combobox"}))))))}let yn="input";function En(t,i){var n,e,o,s,l;let r=le("Combobox.Input"),a=fe("Combobox.Input"),c=d.useId(),p=vt(),{id:m=p||`headlessui-combobox-input-${c}`,onChange:S,displayValue:u,disabled:I=r.disabled||!1,autoFocus:y=!1,type:f="text",...O}=t,C=d.useRef(null),w=be(C,i,bt(),a.setInputElement),M=qe(r.inputElement),_=He(),v=E(()=>{a.onChange(null),r.optionsElement&&(r.optionsElement.scrollTop=0),a.goToOption(D.Nothing)}),h=d.useMemo(()=>{var g;return typeof u=="function"&&r.value!==void 0?(g=u(r.value))!=null?g:"":typeof r.value=="string"?r.value:""},[r.value,u]);$e(([g,U],[F,K])=>{if(r.isTyping)return;let $=C.current;$&&((K===0&&U===1||g!==F)&&($.value=g),requestAnimationFrame(()=>{if(r.isTyping||!$||(M==null?void 0:M.activeElement)!==$)return;let{selectionStart:z,selectionEnd:ne}=$;Math.abs((ne??0)-(z??0))===0&&z===0&&$.setSelectionRange($.value.length,$.value.length)}))},[h,r.comboboxState,M,r.isTyping]),$e(([g],[U])=>{if(g===0&&U===1){if(r.isTyping)return;let F=C.current;if(!F)return;let K=F.value,{selectionStart:$,selectionEnd:z,selectionDirection:ne}=F;F.value="",F.value=K,ne!==null?F.setSelectionRange($,z,ne):F.setSelectionRange($,z)}},[r.comboboxState]);let R=d.useRef(!1),N=E(()=>{R.current=!0}),B=E(()=>{_.nextFrame(()=>{R.current=!1})}),G=E(g=>{switch(a.setIsTyping(!0),g.key){case L.Enter:if(r.comboboxState!==0||R.current)return;if(g.preventDefault(),g.stopPropagation(),r.activeOptionIndex===null){a.closeCombobox();return}a.selectActiveOption(),r.mode===0&&a.closeCombobox();break;case L.ArrowDown:return g.preventDefault(),g.stopPropagation(),se(r.comboboxState,{0:()=>a.goToOption(D.Next),1:()=>a.openCombobox()});case L.ArrowUp:return g.preventDefault(),g.stopPropagation(),se(r.comboboxState,{0:()=>a.goToOption(D.Previous),1:()=>{Y.flushSync(()=>a.openCombobox()),r.value||a.goToOption(D.Last)}});case L.Home:if(g.shiftKey)break;return g.preventDefault(),g.stopPropagation(),a.goToOption(D.First);case L.PageUp:return g.preventDefault(),g.stopPropagation(),a.goToOption(D.First);case L.End:if(g.shiftKey)break;return g.preventDefault(),g.stopPropagation(),a.goToOption(D.Last);case L.PageDown:return g.preventDefault(),g.stopPropagation(),a.goToOption(D.Last);case L.Escape:return r.comboboxState!==0?void 0:(g.preventDefault(),r.optionsElement&&!r.optionsPropsRef.current.static&&g.stopPropagation(),r.mode===0&&r.value===null&&v(),a.closeCombobox());case L.Tab:if(r.comboboxState!==0)return;r.mode===0&&r.activationTrigger!==1&&a.selectActiveOption(),a.closeCombobox();break}}),Q=E(g=>{S==null||S(g),r.mode===0&&g.target.value===""&&v(),a.openCombobox()}),H=E(g=>{var U,F,K;let $=(U=g.relatedTarget)!=null?U:Fe.find(z=>z!==g.currentTarget);if(!((F=r.optionsElement)!=null&&F.contains($))&&!((K=r.buttonElement)!=null&&K.contains($))&&r.comboboxState===0)return g.preventDefault(),r.mode===0&&r.value===null&&v(),a.closeCombobox()}),x=E(g=>{var U,F,K;let $=(U=g.relatedTarget)!=null?U:Fe.find(z=>z!==g.currentTarget);(F=r.buttonElement)!=null&&F.contains($)||(K=r.optionsElement)!=null&&K.contains($)||r.disabled||r.immediate&&r.comboboxState!==0&&_.microTask(()=>{Y.flushSync(()=>a.openCombobox()),a.setActivationTrigger(1)})}),A=we(),q=xt(),{isFocused:X,focusProps:te}=We({autoFocus:y}),{isHovered:oe,hoverProps:ae}=Ge({isDisabled:I}),ue=d.useMemo(()=>({open:r.comboboxState===0,disabled:I,hover:oe,focus:X,autofocus:y}),[r,oe,X,y,I]),j=Te({ref:w,id:m,role:"combobox",type:f,"aria-controls":(n=r.optionsElement)==null?void 0:n.id,"aria-expanded":r.comboboxState===0,"aria-activedescendant":r.activeOptionIndex===null?void 0:r.virtual?(e=r.options.find(g=>!g.dataRef.current.disabled&&r.compare(g.dataRef.current.value,r.virtual.options[r.activeOptionIndex])))==null?void 0:e.id:(o=r.options[r.activeOptionIndex])==null?void 0:o.id,"aria-labelledby":A,"aria-describedby":q,"aria-autocomplete":"list",defaultValue:(l=(s=t.defaultValue)!=null?s:r.defaultValue!==void 0?u==null?void 0:u(r.defaultValue):null)!=null?l:r.defaultValue,disabled:I||void 0,autoFocus:y,onCompositionStart:N,onCompositionEnd:B,onKeyDown:G,onChange:Q,onFocus:x,onBlur:H},te,ae);return pe()({ourProps:j,theirProps:O,slot:ue,defaultTag:yn,name:"Combobox.Input"})}let In="button";function On(t,i){var n;let e=le("Combobox.Button"),o=fe("Combobox.Button"),s=be(i,o.setButtonElement),l=d.useId(),{id:r=`headlessui-combobox-button-${l}`,disabled:a=e.disabled||!1,autoFocus:c=!1,...p}=t,m=Ze(e.inputElement),S=E(h=>{switch(h.key){case L.Space:case L.Enter:h.preventDefault(),h.stopPropagation(),e.comboboxState===1&&Y.flushSync(()=>o.openCombobox()),m();return;case L.ArrowDown:h.preventDefault(),h.stopPropagation(),e.comboboxState===1&&(Y.flushSync(()=>o.openCombobox()),e.value||o.goToOption(D.First)),m();return;case L.ArrowUp:h.preventDefault(),h.stopPropagation(),e.comboboxState===1&&(Y.flushSync(()=>o.openCombobox()),e.value||o.goToOption(D.Last)),m();return;case L.Escape:if(e.comboboxState!==0)return;h.preventDefault(),e.optionsElement&&!e.optionsPropsRef.current.static&&h.stopPropagation(),Y.flushSync(()=>o.closeCombobox()),m();return;default:return}}),u=E(h=>{h.preventDefault(),!_t(h.currentTarget)&&(h.button===Ce.Left&&(e.comboboxState===0?o.closeCombobox():o.openCombobox()),m())}),I=we([r]),{isFocusVisible:y,focusProps:f}=We({autoFocus:c}),{isHovered:O,hoverProps:C}=Ge({isDisabled:a}),{pressed:w,pressProps:M}=St({disabled:a}),_=d.useMemo(()=>({open:e.comboboxState===0,active:w||e.comboboxState===0,disabled:a,value:e.value,hover:O,focus:y}),[e,O,y,w,a]),v=Te({ref:s,id:r,type:yt(t,e.buttonElement),tabIndex:-1,"aria-haspopup":"listbox","aria-controls":(n=e.optionsElement)==null?void 0:n.id,"aria-expanded":e.comboboxState===0,"aria-labelledby":I,disabled:a||void 0,autoFocus:c,onMouseDown:u,onKeyDown:S},f,C,M);return pe()({ourProps:v,theirProps:p,slot:_,defaultTag:In,name:"Combobox.Button"})}let wn="div",Tn=ze.RenderStrategy|ze.Static;function Cn(t,i){var n,e,o;let s=d.useId(),{id:l=`headlessui-combobox-options-${s}`,hold:r=!1,anchor:a,portal:c=!1,modal:p=!0,transition:m=!1,...S}=t,u=le("Combobox.Options"),I=fe("Combobox.Options"),y=Et(a);y&&(c=!0);let[f,O]=It(y),[C,w]=d.useState(null),M=Ot(),_=be(i,y?f:null,I.setOptionsElement,w),v=qe(u.optionsElement),h=jt(),[R,N]=zt(m,C,h!==null?(h&ve.Open)===ve.Open:u.comboboxState===0);wt(R,u.inputElement,I.closeCombobox);let B=u.__demoMode?!1:p&&u.comboboxState===0;Tt(B,v);let G=u.__demoMode?!1:p&&u.comboboxState===0;Ct(G,{allowed:d.useCallback(()=>[u.inputElement,u.buttonElement,u.optionsElement],[u.inputElement,u.buttonElement,u.optionsElement])}),Z(()=>{var j;u.optionsPropsRef.current.static=(j=t.static)!=null?j:!1},[u.optionsPropsRef,t.static]),Z(()=>{u.optionsPropsRef.current.hold=r},[u.optionsPropsRef,r]),Mt(u.comboboxState===0,{container:u.optionsElement,accept(j){return j.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:j.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(j){j.setAttribute("role","none")}});let Q=we([(n=u.buttonElement)==null?void 0:n.id]),H=d.useMemo(()=>({open:u.comboboxState===0,option:void 0}),[u.comboboxState]),x=E(()=>{I.setActivationTrigger(0)}),A=E(j=>{j.preventDefault(),I.setActivationTrigger(0)}),q=Te(y?M():{},{"aria-labelledby":Q,role:"listbox","aria-multiselectable":u.mode===1?!0:void 0,id:l,ref:_,style:{...S.style,...O,"--input-width":De(u.inputElement,!0).width,"--button-width":De(u.buttonElement,!0).width},onWheel:u.activationTrigger===0?void 0:x,onMouseDown:A,...Lt(N)}),X=R&&u.comboboxState===1,te=Ie(X,(e=u.virtual)==null?void 0:e.options),oe=Ie(X,u.value),ae=E(j=>u.compare(oe,j));if(u.virtual){if(te===void 0)throw new Error("Missing `options` in virtual mode");Object.assign(S,{children:T.createElement(ce.Provider,{value:te!==u.virtual.options?{...u,virtual:{...u.virtual,options:te}}:u},T.createElement(vn,{slot:H},S.children))})}let ue=pe();return T.createElement(Pt,{enabled:c?t.static||R:!1},T.createElement(ce.Provider,{value:u.mode===1?u:{...u,isSelected:ae}},ue({ourProps:q,theirProps:{...S,children:T.createElement(dn,{freeze:X},typeof S.children=="function"?(o=S.children)==null?void 0:o.call(S,H):S.children)},slot:H,defaultTag:wn,features:Tn,visible:R,name:"Combobox.Options"})))}let Mn="div";function Pn(t,i){var n,e,o,s;let l=le("Combobox.Option"),r=fe("Combobox.Option"),a=d.useId(),{id:c=`headlessui-combobox-option-${a}`,value:p,disabled:m=(o=(e=(n=l.virtual)==null?void 0:n.disabled)==null?void 0:e.call(n,p))!=null?o:!1,order:S=null,...u}=t,I=Ze(l.inputElement),y=l.virtual?l.activeOptionIndex===l.calculateIndex(p):l.activeOptionIndex===null?!1:((s=l.options[l.activeOptionIndex])==null?void 0:s.id)===c,f=l.isSelected(p),O=d.useRef(null),C=Bt({disabled:m,value:p,domRef:O,order:S}),w=d.useContext(et),M=be(i,O,w?w.measureElement:null),_=E(()=>{r.setIsTyping(!1),r.onChange(p)});Z(()=>r.registerOption(c,C),[C,c]);let v=d.useRef(!(l.virtual||l.__demoMode));Z(()=>{if(!l.virtual&&!l.__demoMode)return Le().requestAnimationFrame(()=>{v.current=!0})},[l.virtual,l.__demoMode]),Z(()=>{if(v.current&&l.comboboxState===0&&y&&l.activationTrigger!==0)return Le().requestAnimationFrame(()=>{var A,q;(q=(A=O.current)==null?void 0:A.scrollIntoView)==null||q.call(A,{block:"nearest"})})},[O,y,l.comboboxState,l.activationTrigger,l.activeOptionIndex]);let h=E(A=>{A.preventDefault(),A.button===Ce.Left&&(m||(_(),At()||requestAnimationFrame(()=>I()),l.mode===0&&r.closeCombobox()))}),R=E(()=>{if(m)return r.goToOption(D.Nothing);let A=l.calculateIndex(p);r.goToOption(D.Specific,A)}),N=Rt(),B=E(A=>N.update(A)),G=E(A=>{if(!N.wasMoved(A)||m||y)return;let q=l.calculateIndex(p);r.goToOption(D.Specific,q,0)}),Q=E(A=>{N.wasMoved(A)&&(m||y&&(l.optionsPropsRef.current.hold||r.goToOption(D.Nothing)))}),H=d.useMemo(()=>({active:y,focus:y,selected:f,disabled:m}),[y,f,m]),x={id:c,ref:M,role:"option",tabIndex:m===!0?void 0:-1,"aria-disabled":m===!0?!0:void 0,"aria-selected":f,disabled:void 0,onMouseDown:h,onFocus:R,onPointerEnter:B,onMouseEnter:B,onPointerMove:G,onMouseMove:G,onPointerLeave:Q,onMouseLeave:Q};return pe()({ourProps:x,theirProps:u,slot:H,defaultTag:Mn,name:"Combobox.Option"})}let Rn=de(Sn),_n=de(On),tt=de(En),An=pt,nt=de(Cn),ot=de(Pn),kn=Object.assign(Rn,{Input:tt,Button:_n,Label:An,Options:nt,Option:ot});var ee={},Pe={},$n="Expected a function",Ne=NaN,Dn="[object Symbol]",Fn=/^\s+|\s+$/g,jn=/^[-+]0x[0-9a-f]+$/i,zn=/^0b[01]+$/i,Ln=/^0o[0-7]+$/i,Bn=parseInt,Nn=typeof he=="object"&&he&&he.Object===Object&&he,Un=typeof self=="object"&&self&&self.Object===Object&&self,Kn=Nn||Un||Function("return this")(),Vn=Object.prototype,qn=Vn.toString,Wn=Math.max,Gn=Math.min,Ee=function(){return Kn.Date.now()};function Hn(t,i,n){var e,o,s,l,r,a,c=0,p=!1,m=!1,S=!0;if(typeof t!="function")throw new TypeError($n);i=Ue(i)||0,Oe(n)&&(p=!!n.leading,m="maxWait"in n,s=m?Wn(Ue(n.maxWait)||0,i):s,S="trailing"in n?!!n.trailing:S);function u(v){var h=e,R=o;return e=o=void 0,c=v,l=t.apply(R,h),l}function I(v){return c=v,r=setTimeout(O,i),p?u(v):l}function y(v){var h=v-a,R=v-c,N=i-h;return m?Gn(N,s-R):N}function f(v){var h=v-a,R=v-c;return a===void 0||h>=i||h<0||m&&R>=s}function O(){var v=Ee();if(f(v))return C(v);r=setTimeout(O,y(v))}function C(v){return r=void 0,S&&e?u(v):(e=o=void 0,l)}function w(){r!==void 0&&clearTimeout(r),c=0,e=a=o=r=void 0}function M(){return r===void 0?l:C(Ee())}function _(){var v=Ee(),h=f(v);if(e=arguments,o=this,a=v,h){if(r===void 0)return I(a);if(m)return r=setTimeout(O,i),u(a)}return r===void 0&&(r=setTimeout(O,i)),l}return _.cancel=w,_.flush=M,_}function Oe(t){var i=typeof t;return!!t&&(i=="object"||i=="function")}function Jn(t){return!!t&&typeof t=="object"}function Qn(t){return typeof t=="symbol"||Jn(t)&&qn.call(t)==Dn}function Ue(t){if(typeof t=="number")return t;if(Qn(t))return Ne;if(Oe(t)){var i=typeof t.valueOf=="function"?t.valueOf():t;t=Oe(i)?i+"":i}if(typeof t!="string")return t===0?t:+t;t=t.replace(Fn,"");var n=zn.test(t);return n||Ln.test(t)?Bn(t.slice(2),n?2:8):jn.test(t)?Ne:+t}var Xn=Hn,xe={};Object.defineProperty(xe,"__esModule",{value:!0});xe.compose=function(){for(var i=arguments.length,n=Array(i),e=0;e<i;e++)n[e]=arguments[e];return function(){for(var o=arguments.length,s=Array(o),l=0;l<o;l++)s[l]=arguments[l];n.forEach(function(r){return r&&r.apply(void 0,s)})}};xe.pick=function(i){for(var n=arguments.length,e=Array(n>1?n-1:0),o=1;o<n;o++)e[o-1]=arguments[o];return e.reduce(function(s,l){return i&&i.hasOwnProperty(l)&&(s[l]=i[l]),s},{})};Object.defineProperty(Pe,"__esModule",{value:!0});var re=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}return t},Yn=function(){function t(i,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(i,o.key,o)}}return function(i,n,e){return n&&t(i.prototype,n),e&&t(i,e),i}}(),Zn=d,eo=Re(Zn),to=ct,k=Re(to),no=Xn,oo=Re(no),J=xe;function Re(t){return t&&t.__esModule?t:{default:t}}function io(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function ro(t,i){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:t}function so(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(t,i):t.__proto__=i)}var lo=function(i){return{mainText:i.main_text,secondaryText:i.secondary_text}},_e=function(t){so(i,t);function i(n){io(this,i);var e=ro(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,n));return e.init=function(){if(!window.google)throw new Error("[react-places-autocomplete]: Google Maps JavaScript API library must be loaded. See: https://github.com/kenny-hibino/react-places-autocomplete#load-google-library");if(!window.google.maps.places)throw new Error("[react-places-autocomplete]: Google Maps Places library must be loaded. Please add `libraries=places` to the src URL. See: https://github.com/kenny-hibino/react-places-autocomplete#load-google-library");e.autocompleteService=new window.google.maps.places.AutocompleteService,e.autocompleteOK=window.google.maps.places.PlacesServiceStatus.OK,e.setState(function(o){return o.ready?null:{ready:!0}})},e.autocompleteCallback=function(o,s){if(e.setState({loading:!1}),s!==e.autocompleteOK){e.props.onError(s,e.clearSuggestions);return}var l=e.props.highlightFirstSuggestion;e.setState({suggestions:o.map(function(r,a){return{id:r.id,description:r.description,placeId:r.place_id,active:!!(l&&a===0),index:a,formattedSuggestion:lo(r.structured_formatting),matchedSubstrings:r.matched_substrings,terms:r.terms,types:r.types}})})},e.fetchPredictions=function(){var o=e.props.value;o.length&&(e.setState({loading:!0}),e.autocompleteService.getPlacePredictions(re({},e.props.searchOptions,{input:o}),e.autocompleteCallback))},e.clearSuggestions=function(){e.setState({suggestions:[]})},e.clearActive=function(){e.setState({suggestions:e.state.suggestions.map(function(o){return re({},o,{active:!1})})})},e.handleSelect=function(o,s,l){e.clearSuggestions(),e.props.onSelect?e.props.onSelect(o,s,l):e.props.onChange(o)},e.getActiveSuggestion=function(){return e.state.suggestions.find(function(o){return o.active})},e.selectActiveAtIndex=function(o){var s=e.state.suggestions.find(function(l){return l.index===o}).description;e.setActiveAtIndex(o),e.props.onChange(s)},e.selectUserInputValue=function(){e.clearActive(),e.props.onChange(e.state.userInputValue)},e.handleEnterKey=function(){var o=e.getActiveSuggestion();o===void 0?e.handleSelect(e.props.value,null,null):e.handleSelect(o.description,o.placeId,o)},e.handleDownKey=function(){if(e.state.suggestions.length!==0){var o=e.getActiveSuggestion();o===void 0?e.selectActiveAtIndex(0):o.index===e.state.suggestions.length-1?e.selectUserInputValue():e.selectActiveAtIndex(o.index+1)}},e.handleUpKey=function(){if(e.state.suggestions.length!==0){var o=e.getActiveSuggestion();o===void 0?e.selectActiveAtIndex(e.state.suggestions.length-1):o.index===0?e.selectUserInputValue():e.selectActiveAtIndex(o.index-1)}},e.handleInputKeyDown=function(o){switch(o.key){case"Enter":o.preventDefault(),e.handleEnterKey();break;case"ArrowDown":o.preventDefault(),e.handleDownKey();break;case"ArrowUp":o.preventDefault(),e.handleUpKey();break;case"Escape":e.clearSuggestions();break}},e.setActiveAtIndex=function(o){e.setState({suggestions:e.state.suggestions.map(function(s,l){return l===o?re({},s,{active:!0}):re({},s,{active:!1})})})},e.handleInputChange=function(o){var s=o.target.value;if(e.props.onChange(s),e.setState({userInputValue:s}),!s){e.clearSuggestions();return}e.props.shouldFetchSuggestions&&e.debouncedFetchPredictions()},e.handleInputOnBlur=function(){e.mousedownOnSuggestion||e.clearSuggestions()},e.getActiveSuggestionId=function(){var o=e.getActiveSuggestion();return o?"PlacesAutocomplete__suggestion-"+o.placeId:void 0},e.getIsExpanded=function(){return e.state.suggestions.length>0},e.getInputProps=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(o.hasOwnProperty("value"))throw new Error("[react-places-autocomplete]: getInputProps does not accept `value`. Use `value` prop instead");if(o.hasOwnProperty("onChange"))throw new Error("[react-places-autocomplete]: getInputProps does not accept `onChange`. Use `onChange` prop instead");var s={type:"text",autoComplete:"off",role:"combobox","aria-autocomplete":"list","aria-expanded":e.getIsExpanded(),"aria-activedescendant":e.getActiveSuggestionId(),disabled:!e.state.ready};return re({},s,o,{onKeyDown:(0,J.compose)(e.handleInputKeyDown,o.onKeyDown),onBlur:(0,J.compose)(e.handleInputOnBlur,o.onBlur),value:e.props.value,onChange:function(r){e.handleInputChange(r)}})},e.getSuggestionItemProps=function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=e.handleSuggestionMouseEnter.bind(e,o.index),r=e.handleSuggestionClick.bind(e,o);return re({},s,{key:o.id,id:e.getActiveSuggestionId(),role:"option",onMouseEnter:(0,J.compose)(l,s.onMouseEnter),onMouseLeave:(0,J.compose)(e.handleSuggestionMouseLeave,s.onMouseLeave),onMouseDown:(0,J.compose)(e.handleSuggestionMouseDown,s.onMouseDown),onMouseUp:(0,J.compose)(e.handleSuggestionMouseUp,s.onMouseUp),onTouchStart:(0,J.compose)(e.handleSuggestionTouchStart,s.onTouchStart),onTouchEnd:(0,J.compose)(e.handleSuggestionMouseUp,s.onTouchEnd),onClick:(0,J.compose)(r,s.onClick)})},e.handleSuggestionMouseEnter=function(o){e.setActiveAtIndex(o)},e.handleSuggestionMouseLeave=function(){e.mousedownOnSuggestion=!1,e.clearActive()},e.handleSuggestionMouseDown=function(o){o.preventDefault(),e.mousedownOnSuggestion=!0},e.handleSuggestionTouchStart=function(){e.mousedownOnSuggestion=!0},e.handleSuggestionMouseUp=function(){e.mousedownOnSuggestion=!1},e.handleSuggestionClick=function(o,s){s&&s.preventDefault&&s.preventDefault();var l=o.description,r=o.placeId;e.handleSelect(l,r,o),setTimeout(function(){e.mousedownOnSuggestion=!1})},e.state={loading:!1,suggestions:[],userInputValue:n.value,ready:!n.googleCallbackName},e.debouncedFetchPredictions=(0,oo.default)(e.fetchPredictions,n.debounce),e}return Yn(i,[{key:"componentDidMount",value:function(){var e=this.props.googleCallbackName;if(e){var o=window.google&&window.google.maps&&window.google.maps.places;o?this.init():window[e]=this.init}else this.init()}},{key:"componentWillUnmount",value:function(){var e=this.props.googleCallbackName;e&&window[e]&&delete window[e]}},{key:"render",value:function(){return this.props.children({getInputProps:this.getInputProps,getSuggestionItemProps:this.getSuggestionItemProps,loading:this.state.loading,suggestions:this.state.suggestions})}}]),i}(eo.default.Component);_e.propTypes={onChange:k.default.func.isRequired,value:k.default.string.isRequired,children:k.default.func.isRequired,onError:k.default.func,onSelect:k.default.func,searchOptions:k.default.shape({bounds:k.default.object,componentRestrictions:k.default.object,location:k.default.object,offset:k.default.oneOfType([k.default.number,k.default.string]),radius:k.default.oneOfType([k.default.number,k.default.string]),types:k.default.array}),debounce:k.default.number,highlightFirstSuggestion:k.default.bool,shouldFetchSuggestions:k.default.bool,googleCallbackName:k.default.string};_e.defaultProps={onError:function(i,n){return console.error(`[react-places-autocomplete]: error happened when fetching data from Google Maps API.
Please check the docs here (https://developers.google.com/maps/documentation/javascript/places#place_details_responses)
Status: `,i)},searchOptions:{},debounce:200,highlightFirstSuggestion:!1,shouldFetchSuggestions:!0};Pe.default=_e;var me={};Object.defineProperty(me,"__esModule",{value:!0});me.geocodeByAddress=function(i){var n=new window.google.maps.Geocoder,e=window.google.maps.GeocoderStatus.OK;return new Promise(function(o,s){n.geocode({address:i},function(l,r){r!==e&&s(r),o(l)})})};me.getLatLng=function(i){return new Promise(function(n,e){try{var o={lat:i.geometry.location.lat(),lng:i.geometry.location.lng()};n(o)}catch(s){e(s)}})};me.geocodeByPlaceId=function(i){var n=new window.google.maps.Geocoder,e=window.google.maps.GeocoderStatus.OK;return new Promise(function(o,s){n.geocode({placeId:i},function(l,r){r!==e&&s(r),o(l)})})};Object.defineProperty(ee,"__esModule",{value:!0});var it=ee.getLatLng=ee.geocodeByPlaceId=rt=ee.geocodeByAddress=void 0,ao=Pe,uo=co(ao),Ae=me;function co(t){return t&&t.__esModule?t:{default:t}}var rt=ee.geocodeByAddress=Ae.geocodeByAddress;ee.geocodeByPlaceId=Ae.geocodeByPlaceId;it=ee.getLatLng=Ae.getLatLng;var po=ee.default=uo.default;const fo=({posCallback:t,centerCallback:i,singleMarker:n,singleMarkerCallback:e,eventAddress:o,eventLatitude:s,eventLongitude:l})=>{const[r,a]=d.useState(o||""),[c,p]=d.useState({lat:45.3850225,lng:-75.6946679}),[m,S]=d.useState([]),[u,I]=d.useState({lat:s||45.3850225,lng:l||-75.6946679}),y=async f=>{const O=await rt(f),C=await it(O[0]),w=O[0].place_id;a(f),p({lat:C.lat,lng:C.lng}),S([...m,{name:f,id:w,position:C}]),I(C)};return d.useEffect(()=>{t&&t(m)},[m,t]),d.useEffect(()=>{i&&i(c)},[c,i]),d.useEffect(()=>{n&&e&&e({coordinates:u,address:r})},[u,e,n]),V.jsx("div",{className:"cu-locationpicker not-prose",children:V.jsx(po,{value:r,onChange:a,onSelect:y,children:({getInputProps:f,suggestions:O,getSuggestionItemProps:C})=>V.jsxs(kn,{value:r,onChange:y,children:[V.jsxs("div",{className:"relative",children:[V.jsx(Nt,{className:"pointer-events-none absolute left-3.5 top-3.5 h-5 w-5 text-cu-black-400","aria-hidden":"true"}),V.jsx(tt,{className:"w-full h-12 pl-10 pr-4 bg-white border rounded-lg border-cu-black-200 text-cu-black-800 placeholder-cu-black-400 focus:border-cu-black-400 focus:outline-none focus:ring-0 sm:text-sm",...f({placeholder:"Type address"})}),r&&V.jsx($t,{className:"absolute right-3.5 top-3.5 h-5 w-5 text-cu-black-400","aria-hidden":"true",onClick:()=>{a("")}})]}),V.jsx(nt,{className:"mt-3 max-h-80 divide-y divide-cu-black-100 overflow-y-auto bg-white px-1.5 text-sm text-cu-black-800",children:O.map(w=>V.jsx(ot,{value:w,children:({active:M})=>V.jsx("ul",{children:V.jsx("li",{...C(w),className:`p-4 text-cu-black-600 hover:cursor-pointer ${M?"bg-cu-black-50 text-cu-black-900":"bg-white"}`,children:w.description})})},w.index))})]})})})};fo.__docgenInfo={description:"",methods:[],displayName:"LocationPicker",props:{posCallback:{required:!1,tsType:{name:"signature",type:"function",raw:"(pos: { name: string; id: string; position: object }[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ name: string; id: string; position: object }",signature:{properties:[{key:"name",value:{name:"string",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"position",value:{name:"object",required:!0}}]}}],raw:"{ name: string; id: string; position: object }[]"},name:"pos"}],return:{name:"void"}}},description:""},centerCallback:{required:!1,tsType:{name:"signature",type:"function",raw:"(center: { lat: number; lng: number }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ lat: number; lng: number }",signature:{properties:[{key:"lat",value:{name:"number",required:!0}},{key:"lng",value:{name:"number",required:!0}}]}},name:"center"}],return:{name:"void"}}},description:""},singleMarker:{required:!1,tsType:{name:"boolean"},description:""},singleMarkerCallback:{required:!1,tsType:{name:"signature",type:"function",raw:"(marker: { coordinates: { lat: number; lng: number }; address: string }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ coordinates: { lat: number; lng: number }; address: string }",signature:{properties:[{key:"coordinates",value:{name:"signature",type:"object",raw:"{ lat: number; lng: number }",signature:{properties:[{key:"lat",value:{name:"number",required:!0}},{key:"lng",value:{name:"number",required:!0}}]},required:!0}},{key:"address",value:{name:"string",required:!0}}]}},name:"marker"}],return:{name:"void"}}},description:""},eventLatitude:{required:!1,tsType:{name:"number"},description:""},eventLongitude:{required:!1,tsType:{name:"number"},description:""},eventAddress:{required:!1,tsType:{name:"string"},description:""}}};export{fo as L};
