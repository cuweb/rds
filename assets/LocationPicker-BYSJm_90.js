import{j as V}from"./jsx-runtime-Nms4Y4qS.js";import{r as f,R as E}from"./index-BwDkhjyp.js";import{p as ut}from"./index-Dk74W0Oi.js";import{c as pe}from"./_commonjsHelpers-BosuxZz1.js";import{T as Ke,s as Ue,E as ct,V as dt,W as ft,d as pt,D as gt,v as ht,X as mt,p as vt,n as qe,m as ke,Y as we,Z as bt,$ as Ve,g as We,h as xt,i as yt,q as St,R as It,z as Ot,f as wt,y as Tt,A as Et,B as De,t as Rt,C as Ct,L as D,o as j,r as $e,j as Mt,a0 as Pt,O as Fe,_ as _t,S as At}from"./portal-DP9i2tGJ.js";import{r as Z}from"./index-Drt3gf4w.js";import{o as w,p as Ge,m as kt,M as ze,W as le,b as re,n as ee,c as Dt,i as ge,H as ue,y as he,D as Te,u as $t,V as Ft,a as zt,A as jt,s as Lt,f as je}from"./use-server-handoff-complete-DpV5tE3Q.js";import{F as Bt}from"./MagnifyingGlassIcon-CTArdofi.js";function Nt(t,i,n){let[e,o]=f.useState(n),s=t!==void 0,a=f.useRef(s),r=f.useRef(!1),l=f.useRef(!1);return s&&!a.current&&!r.current?(r.current=!0,a.current=s,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!s&&a.current&&!l.current&&(l.current=!0,a.current=s,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[s?t:e,w(c=>(s||o(c),i==null?void 0:i(c)))]}function Kt(t){let[i]=f.useState(t);return i}function He(t={},i=null,n=[]){for(let[e,o]of Object.entries(t))Ye(n,Je(i,e),o);return n}function Je(t,i){return t?t+"["+i+"]":i}function Ye(t,i,n){if(Array.isArray(n))for(let[e,o]of n.entries())Ye(t,Je(i,e.toString()),o);else n instanceof Date?t.push([i,n.toISOString()]):typeof n=="boolean"?t.push([i,n?"1":"0"]):typeof n=="string"?t.push([i,n]):typeof n=="number"?t.push([i,`${n}`]):n==null?t.push([i,""]):He(n,i,t)}let Ut=f.createContext(null);function qt({children:t}){let i=f.useContext(Ut);if(!i)return E.createElement(E.Fragment,null,t);let{target:n}=i;return n?Z.createPortal(E.createElement(E.Fragment,null,t),n):null}function Vt({data:t,form:i,disabled:n,onReset:e,overrides:o}){let[s,a]=f.useState(null),r=Ge();return f.useEffect(()=>{if(e&&s)return r.addEventListener(s,"reset",e)},[s,i,e]),E.createElement(qt,null,E.createElement(Wt,{setForm:a,formId:i}),He(t).map(([l,c])=>E.createElement(Ke,{features:Ue.Hidden,...kt({key:l,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:i,disabled:n,name:l,value:c,...o})})))}function Wt({setForm:t,formId:i}){return f.useEffect(()=>{if(i){let n=document.getElementById(i);n&&t(n)}},[t,i]),i?null:E.createElement(Ke,{features:Ue.Hidden,as:"input",type:"hidden",hidden:!0,readOnly:!0,ref:n=>{if(!n)return;let e=n.closest("form");e&&t(e)}})}function oe(t,i,n){let e=n.initialDeps??[],o;return()=>{var s,a,r,l;let c;n.key&&((s=n.debug)!=null&&s.call(n))&&(c=Date.now());const d=t();if(!(d.length!==e.length||d.some((u,I)=>e[I]!==u)))return o;e=d;let b;if(n.key&&((a=n.debug)!=null&&a.call(n))&&(b=Date.now()),o=i(...d),n.key&&((r=n.debug)!=null&&r.call(n))){const u=Math.round((Date.now()-c)*100)/100,I=Math.round((Date.now()-b)*100)/100,x=I/16,p=(O,C)=>{for(O=String(O);O.length<C;)O=" "+O;return O};console.info(`%câ± ${p(I,5)} /${p(u,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*x,120))}deg 100% 31%);`,n==null?void 0:n.key)}return(l=n==null?void 0:n.onChange)==null||l.call(n,o),o}}function xe(t,i){if(t===void 0)throw new Error("Unexpected undefined");return t}const Gt=(t,i)=>Math.abs(t-i)<1,Ht=(t,i,n)=>{let e;return function(...o){t.clearTimeout(e),e=t.setTimeout(()=>i.apply(this,o),n)}},Jt=t=>t,Yt=t=>{const i=Math.max(t.startIndex-t.overscan,0),n=Math.min(t.endIndex+t.overscan,t.count-1),e=[];for(let o=i;o<=n;o++)e.push(o);return e},Qt=(t,i)=>{const n=t.scrollElement;if(!n)return;const e=t.targetWindow;if(!e)return;const o=a=>{const{width:r,height:l}=a;i({width:Math.round(r),height:Math.round(l)})};if(o(n.getBoundingClientRect()),!e.ResizeObserver)return()=>{};const s=new e.ResizeObserver(a=>{const r=a[0];if(r!=null&&r.borderBoxSize){const l=r.borderBoxSize[0];if(l){o({width:l.inlineSize,height:l.blockSize});return}}o(n.getBoundingClientRect())});return s.observe(n,{box:"border-box"}),()=>{s.unobserve(n)}},Le={passive:!0},Xt=typeof window>"u"?!0:"onscrollend"in window,Zt=(t,i)=>{const n=t.scrollElement;if(!n)return;const e=t.targetWindow;if(!e)return;let o=0;const s=Xt?()=>{}:Ht(e,()=>{i(o,!1)},t.options.isScrollingResetDelay),a=c=>()=>{const{horizontal:d,isRtl:g}=t.options;o=d?n.scrollLeft*(g&&-1||1):n.scrollTop,s(),i(o,c)},r=a(!0),l=a(!1);return l(),n.addEventListener("scroll",r,Le),n.addEventListener("scrollend",l,Le),()=>{n.removeEventListener("scroll",r),n.removeEventListener("scrollend",l)}},en=(t,i,n)=>{if(i!=null&&i.borderBoxSize){const e=i.borderBoxSize[0];if(e)return Math.round(e[n.options.horizontal?"inlineSize":"blockSize"])}return Math.round(t.getBoundingClientRect()[n.options.horizontal?"width":"height"])},tn=(t,{adjustments:i=0,behavior:n},e)=>{var o,s;const a=t+i;(s=(o=e.scrollElement)==null?void 0:o.scrollTo)==null||s.call(o,{[e.options.horizontal?"left":"top"]:a,behavior:n})};class nn{constructor(i){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const e=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(o=>{o.forEach(s=>{this._measureElement(s.target,s)})}));return{disconnect:()=>{var o;(o=e())==null||o.disconnect(),n=null},observe:o=>{var s;return(s=e())==null?void 0:s.observe(o,{box:"border-box"})},unobserve:o=>{var s;return(s=e())==null?void 0:s.unobserve(o)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([e,o])=>{typeof o>"u"&&delete n[e]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Jt,rangeExtractor:Yt,onChange:()=>{},measureElement:en,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,...n}},this.notify=n=>{var e,o;(o=(e=this.options).onChange)==null||o.call(e,this,n)},this.maybeNotify=oe(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const e=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==e){if(this.cleanup(),!e){this.maybeNotify();return}this.scrollElement=e,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(o=>{this.observer.observe(o)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,o=>{this.scrollRect=o,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(o,s)=>{this.scrollAdjustments=0,this.scrollDirection=s?this.getScrollOffset()<o?"forward":"backward":null,this.scrollOffset=o,this.isScrolling=s,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,e)=>{const o=new Map,s=new Map;for(let a=e-1;a>=0;a--){const r=n[a];if(o.has(r.lane))continue;const l=s.get(r.lane);if(l==null||r.end>l.end?s.set(r.lane,r):r.end<l.end&&o.set(r.lane,!0),o.size===this.options.lanes)break}return s.size===this.options.lanes?Array.from(s.values()).sort((a,r)=>a.end===r.end?a.index-r.index:a.end-r.end)[0]:void 0},this.getMeasurementOptions=oe(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(n,e,o,s,a)=>(this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:e,scrollMargin:o,getItemKey:s,enabled:a}),{key:!1}),this.getMeasurements=oe(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:e,scrollMargin:o,getItemKey:s,enabled:a},r)=>{if(!a)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(d=>{this.itemSizeCache.set(d.key,d.size)}));const l=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const c=this.measurementsCache.slice(0,l);for(let d=l;d<n;d++){const g=s(d),b=this.options.lanes===1?c[d-1]:this.getFurthestMeasurement(c,d),u=b?b.end+this.options.gap:e+o,I=r.get(g),x=typeof I=="number"?I:this.options.estimateSize(d),p=u+x,O=b?b.lane:d%this.options.lanes;c[d]={index:d,start:u,size:x,end:p,key:g,lane:O}}return this.measurementsCache=c,c},{key:!1,debug:()=>this.options.debug}),this.calculateRange=oe(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset()],(n,e,o)=>this.range=n.length>0&&e>0?on({measurements:n,outerSize:e,scrollOffset:o}):null,{key:!1,debug:()=>this.options.debug}),this.getIndexes=oe(()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count],(n,e,o,s)=>e===null?[]:n({startIndex:e.startIndex,endIndex:e.endIndex,overscan:o,count:s}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const e=this.options.indexAttribute,o=n.getAttribute(e);return o?parseInt(o,10):(console.warn(`Missing attribute name '${e}={index}' on measured element.`),-1)},this._measureElement=(n,e)=>{const o=this.indexFromElement(n),s=this.measurementsCache[o];if(!s)return;const a=s.key,r=this.elementsCache.get(a);r!==n&&(r&&this.observer.unobserve(r),this.observer.observe(n),this.elementsCache.set(a,n)),n.isConnected&&this.resizeItem(o,this.options.measureElement(n,e,this))},this.resizeItem=(n,e)=>{const o=this.measurementsCache[n];if(!o)return;const s=this.itemSizeCache.get(o.key)??o.size,a=e-s;a!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(o,a,this):o.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=a,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(o.index),this.itemSizeCache=new Map(this.itemSizeCache.set(o.key,e)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((e,o)=>{e.isConnected||(this.observer.unobserve(e),this.elementsCache.delete(o))});return}this._measureElement(n,void 0)},this.getVirtualItems=oe(()=>[this.getIndexes(),this.getMeasurements()],(n,e)=>{const o=[];for(let s=0,a=n.length;s<a;s++){const r=n[s],l=e[r];o.push(l)}return o},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const e=this.getMeasurements();if(e.length!==0)return xe(e[Qe(0,e.length-1,o=>xe(e[o]).start,n)])},this.getOffsetForAlignment=(n,e)=>{const o=this.getSize(),s=this.getScrollOffset();e==="auto"&&(n<=s?e="start":n>=s+o?e="end":e="start"),e==="start"?n=n:e==="end"?n=n-o:e==="center"&&(n=n-o/2);const a=this.options.horizontal?"scrollWidth":"scrollHeight",l=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[a]:this.scrollElement[a]:0)-o;return Math.max(Math.min(l,n),0)},this.getOffsetForIndex=(n,e="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const o=this.measurementsCache[n];if(!o)return;const s=this.getSize(),a=this.getScrollOffset();if(e==="auto")if(o.end>=a+s-this.options.scrollPaddingEnd)e="end";else if(o.start<=a+this.options.scrollPaddingStart)e="start";else return[a,e];const r=e==="end"?o.end+this.options.scrollPaddingEnd:o.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(r,e),e]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(n,{align:e="start",behavior:o}={})=>{this.cancelScrollToIndex(),o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,e),{adjustments:void 0,behavior:o})},this.scrollToIndex=(n,{align:e="auto",behavior:o}={})=>{n=Math.max(0,Math.min(n,this.options.count-1)),this.cancelScrollToIndex(),o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const s=this.getOffsetForIndex(n,e);if(!s)return;const[a,r]=s;this._scrollToOffset(a,{adjustments:void 0,behavior:o}),o!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(n))){const[c]=xe(this.getOffsetForIndex(n,r));Gt(c,this.getScrollOffset())||this.scrollToIndex(n,{align:r,behavior:o})}else this.scrollToIndex(n,{align:r,behavior:o})}))},this.scrollBy=(n,{behavior:e}={})=>{this.cancelScrollToIndex(),e==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:e})},this.getTotalSize=()=>{var n;const e=this.getMeasurements();let o;return e.length===0?o=this.options.paddingStart:o=this.options.lanes===1?((n=e[e.length-1])==null?void 0:n.end)??0:Math.max(...e.slice(-this.options.lanes).map(s=>s.end)),Math.max(o-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:e,behavior:o})=>{this.options.scrollToFn(n,{behavior:o,adjustments:e},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(i)}}const Qe=(t,i,n,e)=>{for(;t<=i;){const o=(t+i)/2|0,s=n(o);if(s<e)t=o+1;else if(s>e)i=o-1;else return o}return t>0?t-1:0};function on({measurements:t,outerSize:i,scrollOffset:n}){const e=t.length-1,s=Qe(0,e,r=>t[r].start,n);let a=s;for(;a<e&&t[a].end<n+i;)a++;return{startIndex:s,endIndex:a}}const rn=typeof document<"u"?f.useLayoutEffect:f.useEffect;function sn(t){const i=f.useReducer(()=>({}),{})[1],n={...t,onChange:(o,s)=>{var a;s?Z.flushSync(i):i(),(a=t.onChange)==null||a.call(t,o,s)}},[e]=f.useState(()=>new nn(n));return e.setOptions(n),f.useEffect(()=>e._didMount(),[]),rn(()=>e._willUpdate()),e}function an(t){return sn({observeElementRect:Qt,observeElementOffset:Zt,scrollToFn:tn,...t})}function ln(t,i){return t!==null&&i!==null&&typeof t=="object"&&typeof i=="object"&&"id"in t&&"id"in i?t.id===i.id:t===i}function un(t=ln){return f.useCallback((i,n)=>{if(typeof t=="string"){let e=t;return(i==null?void 0:i[e])===(n==null?void 0:n[e])}return t(i,n)},[t])}function Xe(t){let i=f.useRef({value:"",selectionStart:null,selectionEnd:null});return ct(t.current,"blur",n=>{let e=n.target;e instanceof HTMLInputElement&&(i.current={value:e.value,selectionStart:e.selectionStart,selectionEnd:e.selectionEnd})}),w(()=>{let n=t.current;if(document.activeElement!==n&&n instanceof HTMLInputElement&&n.isConnected){if(n.focus({preventScroll:!0}),n.value!==i.current.value)n.setSelectionRange(n.value.length,n.value.length);else{let{selectionStart:e,selectionEnd:o}=i.current;e!==null&&o!==null&&n.setSelectionRange(e,o)}i.current={value:"",selectionStart:null,selectionEnd:null}}})}function cn({children:t,freeze:i}){let n=Ie(i,t);return E.createElement(E.Fragment,null,n)}function Ie(t,i){let[n,e]=f.useState(i);return!t&&n!==i&&e(i),t?n:i}var Ee=(t=>(t[t.Left=0]="Left",t[t.Right=2]="Right",t))(Ee||{}),dn={},fn=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(fn||{}),pn=(t=>(t[t.Single=0]="Single",t[t.Multi=1]="Multi",t))(pn||{}),gn=(t=>(t[t.Pointer=0]="Pointer",t[t.Focus=1]="Focus",t[t.Other=2]="Other",t))(gn||{}),hn=(t=>(t[t.OpenCombobox=0]="OpenCombobox",t[t.CloseCombobox=1]="CloseCombobox",t[t.GoToOption=2]="GoToOption",t[t.SetTyping=3]="SetTyping",t[t.RegisterOption=4]="RegisterOption",t[t.UnregisterOption=5]="UnregisterOption",t[t.SetActivationTrigger=6]="SetActivationTrigger",t[t.UpdateVirtualConfiguration=7]="UpdateVirtualConfiguration",t))(hn||{});function ye(t,i=n=>n){let n=t.activeOptionIndex!==null?t.options[t.activeOptionIndex]:null,e=i(t.options.slice()),o=e.length>0&&e[0].dataRef.current.order!==null?e.sort((a,r)=>a.dataRef.current.order-r.dataRef.current.order):_t(e,a=>a.dataRef.current.domRef.current),s=n?o.indexOf(n):null;return s===-1&&(s=null),{options:o,activeOptionIndex:s}}let mn={1(t){var i;return(i=t.dataRef.current)!=null&&i.disabled||t.comboboxState===1?t:{...t,activeOptionIndex:null,comboboxState:1,isTyping:!1,activationTrigger:2,__demoMode:!1}},0(t){var i,n;if((i=t.dataRef.current)!=null&&i.disabled||t.comboboxState===0)return t;if((n=t.dataRef.current)!=null&&n.value){let e=t.dataRef.current.calculateIndex(t.dataRef.current.value);if(e!==-1)return{...t,activeOptionIndex:e,comboboxState:0,__demoMode:!1}}return{...t,comboboxState:0,__demoMode:!1}},3(t,i){return t.isTyping===i.isTyping?t:{...t,isTyping:i.isTyping}},2(t,i){var n,e,o,s,a;if((n=t.dataRef.current)!=null&&n.disabled||(e=t.dataRef.current)!=null&&e.optionsRef.current&&!((o=t.dataRef.current)!=null&&o.optionsPropsRef.current.static)&&t.comboboxState===1)return t;if(t.virtual){let{options:d,disabled:g}=t.virtual,b=i.focus===D.Specific?i.idx:Fe(i,{resolveItems:()=>d,resolveActiveIndex:()=>{var I,x;return(x=(I=t.activeOptionIndex)!=null?I:d.findIndex(p=>!g(p)))!=null?x:null},resolveDisabled:g,resolveId(){throw new Error("Function not implemented.")}}),u=(s=i.trigger)!=null?s:2;return t.activeOptionIndex===b&&t.activationTrigger===u?t:{...t,activeOptionIndex:b,activationTrigger:u,isTyping:!1,__demoMode:!1}}let r=ye(t);if(r.activeOptionIndex===null){let d=r.options.findIndex(g=>!g.dataRef.current.disabled);d!==-1&&(r.activeOptionIndex=d)}let l=i.focus===D.Specific?i.idx:Fe(i,{resolveItems:()=>r.options,resolveActiveIndex:()=>r.activeOptionIndex,resolveId:d=>d.id,resolveDisabled:d=>d.dataRef.current.disabled}),c=(a=i.trigger)!=null?a:2;return t.activeOptionIndex===l&&t.activationTrigger===c?t:{...t,...r,isTyping:!1,activeOptionIndex:l,activationTrigger:c,__demoMode:!1}},4:(t,i)=>{var n,e,o;if((n=t.dataRef.current)!=null&&n.virtual)return{...t,options:[...t.options,i.payload]};let s=i.payload,a=ye(t,l=>(l.push(s),l));t.activeOptionIndex===null&&(e=t.dataRef.current)!=null&&e.isSelected(i.payload.dataRef.current.value)&&(a.activeOptionIndex=a.options.indexOf(s));let r={...t,...a,activationTrigger:2};return(o=t.dataRef.current)!=null&&o.__demoMode&&t.dataRef.current.value===void 0&&(r.activeOptionIndex=0),r},5:(t,i)=>{var n;if((n=t.dataRef.current)!=null&&n.virtual)return{...t,options:t.options.filter(o=>o.id!==i.id)};let e=ye(t,o=>{let s=o.findIndex(a=>a.id===i.id);return s!==-1&&o.splice(s,1),o});return{...t,...e,activationTrigger:2}},6:(t,i)=>t.activationTrigger===i.trigger?t:{...t,activationTrigger:i.trigger},7:(t,i)=>{var n,e;if(t.virtual===null)return{...t,virtual:{options:i.options,disabled:(n=i.disabled)!=null?n:()=>!1}};if(t.virtual.options===i.options&&t.virtual.disabled===i.disabled)return t;let o=t.activeOptionIndex;if(t.activeOptionIndex!==null){let s=i.options.indexOf(t.virtual.options[t.activeOptionIndex]);s!==-1?o=s:o=null}return{...t,activeOptionIndex:o,virtual:{options:i.options,disabled:(e=i.disabled)!=null?e:()=>!1}}}},Re=f.createContext(null);Re.displayName="ComboboxActionsContext";function ce(t){let i=f.useContext(Re);if(i===null){let n=new Error(`<${t} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,ce),n}return i}let Ze=f.createContext(null);function vn(t){let i=se("VirtualProvider"),{options:n}=i.virtual,[e,o]=f.useMemo(()=>{let c=i.optionsRef.current;if(!c)return[0,0];let d=window.getComputedStyle(c);return[parseFloat(d.paddingBlockStart||d.paddingTop),parseFloat(d.paddingBlockEnd||d.paddingBottom)]},[i.optionsRef.current]),s=an({enabled:n.length!==0,scrollPaddingStart:e,scrollPaddingEnd:o,count:n.length,estimateSize(){return 40},getScrollElement(){var c;return(c=i.optionsRef.current)!=null?c:null},overscan:12}),[a,r]=f.useState(0);ee(()=>{r(c=>c+1)},[n]);let l=s.getVirtualItems();return l.length===0?null:E.createElement(Ze.Provider,{value:s},E.createElement("div",{style:{position:"relative",width:"100%",height:`${s.getTotalSize()}px`},ref:c=>{if(c){if(typeof process<"u"&&dn.JEST_WORKER_ID!==void 0||i.activationTrigger===0)return;i.activeOptionIndex!==null&&n.length>i.activeOptionIndex&&s.scrollToIndex(i.activeOptionIndex)}}},l.map(c=>{var d;return E.createElement(f.Fragment,{key:c.key},E.cloneElement((d=t.children)==null?void 0:d.call(t,{...t.slot,option:n[c.index]}),{key:`${a}-${c.key}`,"data-index":c.index,"aria-setsize":n.length,"aria-posinset":c.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${c.start}px)`,overflowAnchor:"none"}}))})))}let ae=f.createContext(null);ae.displayName="ComboboxDataContext";function se(t){let i=f.useContext(ae);if(i===null){let n=new Error(`<${t} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,se),n}return i}function bn(t,i){return re(i.type,mn,t,i)}let xn=f.Fragment;function yn(t,i){var n,e;let o=ft(),{value:s,defaultValue:a,onChange:r,form:l,name:c,by:d,disabled:g=o||!1,onClose:b,__demoMode:u=!1,multiple:I=!1,immediate:x=!1,virtual:p=null,nullable:O,...C}=t,T=Kt(a),[M=I?[]:void 0,P]=Nt(s,r,T),[h,v]=f.useReducer(bn,{dataRef:f.createRef(),comboboxState:u?0:1,isTyping:!1,options:[],virtual:p?{options:p.options,disabled:(n=p.disabled)!=null?n:()=>!1}:null,activeOptionIndex:null,activationTrigger:2,__demoMode:u}),$=f.useRef(!1),L=f.useRef({static:!1,hold:!1}),Y=f.useRef(null),W=f.useRef(null),Q=f.useRef(null),B=un(d),_=w(S=>p?d===null?p.options.indexOf(S):p.options.findIndex(R=>B(R,S)):h.options.findIndex(R=>B(R.dataRef.current.value,S))),N=f.useCallback(S=>re(y.mode,{1:()=>M.some(R=>B(R,S)),0:()=>B(M,S)}),[M]),X=w(S=>h.activeOptionIndex===_(S)),y=f.useMemo(()=>({...h,immediate:x,optionsPropsRef:L,inputRef:Y,buttonRef:W,optionsRef:Q,value:M,defaultValue:T,disabled:g,mode:I?1:0,virtual:p?h.virtual:null,get activeOptionIndex(){if($.current&&h.activeOptionIndex===null&&(p?p.options.length>0:h.options.length>0)){if(p){let R=p.options.findIndex(H=>{var fe,Ae;return!((Ae=(fe=p.disabled)==null?void 0:fe.call(p,H))!=null&&Ae)});if(R!==-1)return R}let S=h.options.findIndex(R=>!R.dataRef.current.disabled);if(S!==-1)return S}return h.activeOptionIndex},calculateIndex:_,compare:B,isSelected:N,isActive:X}),[M,T,g,I,u,h,p]);ee(()=>{var S;p&&v({type:7,options:p.options,disabled:(S=p.disabled)!=null?S:null})},[p,p==null?void 0:p.options,p==null?void 0:p.disabled]),ee(()=>{h.dataRef.current=y},[y]);let ne=y.comboboxState===0;pt(ne,[y.buttonRef,y.inputRef,y.optionsRef],()=>G.closeCombobox());let z=f.useMemo(()=>{var S,R,H;return{open:y.comboboxState===0,disabled:g,activeIndex:y.activeOptionIndex,activeOption:y.activeOptionIndex===null?null:y.virtual?y.virtual.options[(S=y.activeOptionIndex)!=null?S:0]:(H=(R=y.options[y.activeOptionIndex])==null?void 0:R.dataRef.current.value)!=null?H:null,value:M}},[y,g,M]),ve=w(()=>{if(y.activeOptionIndex!==null){if(G.setIsTyping(!1),y.virtual)A(y.virtual.options[y.activeOptionIndex]);else{let{dataRef:S}=y.options[y.activeOptionIndex];A(S.current.value)}G.goToOption(D.Specific,y.activeOptionIndex)}}),be=w(()=>{v({type:0}),$.current=!0}),m=w(()=>{v({type:1}),$.current=!1,b==null||b()}),U=w(S=>{v({type:3,isTyping:S})}),F=w((S,R,H)=>($.current=!1,S===D.Specific?v({type:2,focus:D.Specific,idx:R,trigger:H}):v({type:2,focus:S,trigger:H}))),q=w((S,R)=>(v({type:4,payload:{id:S,dataRef:R}}),()=>{y.isActive(R.current.value)&&($.current=!0),v({type:5,id:S})})),A=w(S=>re(y.mode,{0(){return P==null?void 0:P(S)},1(){let R=y.value.slice(),H=R.findIndex(fe=>B(fe,S));return H===-1?R.push(S):R.splice(H,1),P==null?void 0:P(R)}})),K=w(S=>{v({type:6,trigger:S})}),G=f.useMemo(()=>({onChange:A,registerOption:q,goToOption:F,setIsTyping:U,closeCombobox:m,openCombobox:be,setActivationTrigger:K,selectActiveOption:ve}),[]),[rt,st]=gt(),at=i===null?{}:{ref:i},lt=f.useCallback(()=>{if(T!==void 0)return P==null?void 0:P(T)},[P,T]);return E.createElement(st,{value:rt,props:{htmlFor:(e=y.inputRef.current)==null?void 0:e.id},slot:{open:y.comboboxState===0,disabled:g}},E.createElement(ht,null,E.createElement(Re.Provider,{value:G},E.createElement(ae.Provider,{value:y},E.createElement(Dt,{value:re(y.comboboxState,{0:ge.Open,1:ge.Closed})},c!=null&&E.createElement(Vt,{disabled:g,data:M!=null?{[c]:M}:{},form:l,onReset:lt}),ue({ourProps:at,theirProps:C,slot:z,defaultTag:xn,name:"Combobox"}))))))}let Sn="input";function In(t,i){var n,e,o,s,a;let r=se("Combobox.Input"),l=ce("Combobox.Input"),c=f.useId(),d=mt(),{id:g=d||`headlessui-combobox-input-${c}`,onChange:b,displayValue:u,disabled:I=r.disabled||!1,autoFocus:x=!1,type:p="text",...O}=t,C=he(r.inputRef,i,vt()),T=qe(r.inputRef),M=Ge(),P=w(()=>{l.onChange(null),r.optionsRef.current&&(r.optionsRef.current.scrollTop=0),l.goToOption(D.Nothing)}),h=f.useMemo(()=>{var m;return typeof u=="function"&&r.value!==void 0?(m=u(r.value))!=null?m:"":typeof r.value=="string"?r.value:""},[r.value,u]);ke(([m,U],[F,q])=>{if(r.isTyping)return;let A=r.inputRef.current;A&&((q===0&&U===1||m!==F)&&(A.value=m),requestAnimationFrame(()=>{if(r.isTyping||!A||(T==null?void 0:T.activeElement)!==A)return;let{selectionStart:K,selectionEnd:G}=A;Math.abs((G??0)-(K??0))===0&&K===0&&A.setSelectionRange(A.value.length,A.value.length)}))},[h,r.comboboxState,T,r.isTyping]),ke(([m],[U])=>{if(m===0&&U===1){if(r.isTyping)return;let F=r.inputRef.current;if(!F)return;let q=F.value,{selectionStart:A,selectionEnd:K,selectionDirection:G}=F;F.value="",F.value=q,G!==null?F.setSelectionRange(A,K,G):F.setSelectionRange(A,K)}},[r.comboboxState]);let v=f.useRef(!1),$=w(()=>{v.current=!0}),L=w(()=>{M.nextFrame(()=>{v.current=!1})}),Y=w(m=>{switch(l.setIsTyping(!0),m.key){case j.Enter:if(r.comboboxState!==0||v.current)return;if(m.preventDefault(),m.stopPropagation(),r.activeOptionIndex===null){l.closeCombobox();return}l.selectActiveOption(),r.mode===0&&l.closeCombobox();break;case j.ArrowDown:return m.preventDefault(),m.stopPropagation(),re(r.comboboxState,{0:()=>l.goToOption(D.Next),1:()=>l.openCombobox()});case j.ArrowUp:return m.preventDefault(),m.stopPropagation(),re(r.comboboxState,{0:()=>l.goToOption(D.Previous),1:()=>{Z.flushSync(()=>l.openCombobox()),r.value||l.goToOption(D.Last)}});case j.Home:if(m.shiftKey)break;return m.preventDefault(),m.stopPropagation(),l.goToOption(D.First);case j.PageUp:return m.preventDefault(),m.stopPropagation(),l.goToOption(D.First);case j.End:if(m.shiftKey)break;return m.preventDefault(),m.stopPropagation(),l.goToOption(D.Last);case j.PageDown:return m.preventDefault(),m.stopPropagation(),l.goToOption(D.Last);case j.Escape:return r.comboboxState!==0?void 0:(m.preventDefault(),r.optionsRef.current&&!r.optionsPropsRef.current.static&&m.stopPropagation(),r.mode===0&&r.value===null&&P(),l.closeCombobox());case j.Tab:if(r.comboboxState!==0)return;r.mode===0&&r.activationTrigger!==1&&l.selectActiveOption(),l.closeCombobox();break}}),W=w(m=>{b==null||b(m),r.mode===0&&m.target.value===""&&P(),l.openCombobox()}),Q=w(m=>{var U,F,q;let A=(U=m.relatedTarget)!=null?U:$e.find(K=>K!==m.currentTarget);if(!((F=r.optionsRef.current)!=null&&F.contains(A))&&!((q=r.buttonRef.current)!=null&&q.contains(A))&&r.comboboxState===0)return m.preventDefault(),r.mode===0&&r.value===null&&P(),l.closeCombobox()}),B=w(m=>{var U,F,q;let A=(U=m.relatedTarget)!=null?U:$e.find(K=>K!==m.currentTarget);(F=r.buttonRef.current)!=null&&F.contains(A)||(q=r.optionsRef.current)!=null&&q.contains(A)||r.disabled||r.immediate&&r.comboboxState!==0&&M.microTask(()=>{Z.flushSync(()=>l.openCombobox()),l.setActivationTrigger(1)})}),_=we(),N=bt(),{isFocused:X,focusProps:y}=Ve({autoFocus:x}),{isHovered:ne,hoverProps:z}=We({isDisabled:I}),ve=f.useMemo(()=>({open:r.comboboxState===0,disabled:I,hover:ne,focus:X,autofocus:x}),[r,ne,X,x,I]),be=Te({ref:C,id:g,role:"combobox",type:p,"aria-controls":(n=r.optionsRef.current)==null?void 0:n.id,"aria-expanded":r.comboboxState===0,"aria-activedescendant":r.activeOptionIndex===null?void 0:r.virtual?(e=r.options.find(m=>!m.dataRef.current.disabled&&r.compare(m.dataRef.current.value,r.virtual.options[r.activeOptionIndex])))==null?void 0:e.id:(o=r.options[r.activeOptionIndex])==null?void 0:o.id,"aria-labelledby":_,"aria-describedby":N,"aria-autocomplete":"list",defaultValue:(a=(s=t.defaultValue)!=null?s:r.defaultValue!==void 0?u==null?void 0:u(r.defaultValue):null)!=null?a:r.defaultValue,disabled:I||void 0,autoFocus:x,onCompositionStart:$,onCompositionEnd:L,onKeyDown:Y,onChange:W,onFocus:B,onBlur:Q},y,z);return ue({ourProps:be,theirProps:O,slot:ve,defaultTag:Sn,name:"Combobox.Input"})}let On="button";function wn(t,i){var n;let e=se("Combobox.Button"),o=ce("Combobox.Button"),s=he(e.buttonRef,i),a=f.useId(),{id:r=`headlessui-combobox-button-${a}`,disabled:l=e.disabled||!1,autoFocus:c=!1,...d}=t,g=Xe(e.inputRef),b=w(v=>{switch(v.key){case j.Space:case j.Enter:v.preventDefault(),v.stopPropagation(),e.comboboxState===1&&Z.flushSync(()=>o.openCombobox()),g();return;case j.ArrowDown:v.preventDefault(),v.stopPropagation(),e.comboboxState===1&&(Z.flushSync(()=>o.openCombobox()),e.value||o.goToOption(D.First)),g();return;case j.ArrowUp:v.preventDefault(),v.stopPropagation(),e.comboboxState===1&&(Z.flushSync(()=>o.openCombobox()),e.value||o.goToOption(D.Last)),g();return;case j.Escape:if(e.comboboxState!==0)return;v.preventDefault(),e.optionsRef.current&&!e.optionsPropsRef.current.static&&v.stopPropagation(),Z.flushSync(()=>o.closeCombobox()),g();return;default:return}}),u=w(v=>{v.preventDefault(),!Mt(v.currentTarget)&&(v.button===Ee.Left&&(e.comboboxState===0?o.closeCombobox():o.openCombobox()),g())}),I=we([r]),{isFocusVisible:x,focusProps:p}=Ve({autoFocus:c}),{isHovered:O,hoverProps:C}=We({isDisabled:l}),{pressed:T,pressProps:M}=xt({disabled:l}),P=f.useMemo(()=>({open:e.comboboxState===0,active:T||e.comboboxState===0,disabled:l,value:e.value,hover:O,focus:x}),[e,O,x,T,l]),h=Te({ref:s,id:r,type:yt(t,e.buttonRef),tabIndex:-1,"aria-haspopup":"listbox","aria-controls":(n=e.optionsRef.current)==null?void 0:n.id,"aria-expanded":e.comboboxState===0,"aria-labelledby":I,disabled:l||void 0,autoFocus:c,onMouseDown:u,onKeyDown:b},p,C,M);return ue({ourProps:h,theirProps:d,slot:P,defaultTag:On,name:"Combobox.Button"})}let Tn="div",En=ze.RenderStrategy|ze.Static;function Rn(t,i){var n,e,o;let s=f.useId(),{id:a=`headlessui-combobox-options-${s}`,hold:r=!1,anchor:l,portal:c=!1,modal:d=!0,transition:g=!1,...b}=t,u=se("Combobox.Options"),I=ce("Combobox.Options"),x=St(l);x&&(c=!0);let[p,O]=It(x),C=Ot(),T=he(u.optionsRef,i,x?p:null),M=qe(u.optionsRef),P=$t(),[h,v]=Ft(g,u.optionsRef,P!==null?(P&ge.Open)===ge.Open:u.comboboxState===0);zt(h,u.inputRef,I.closeCombobox);let $=u.__demoMode?!1:d&&u.comboboxState===0;wt($,M);let L=u.__demoMode?!1:d&&u.comboboxState===0;Tt(L,{allowed:w(()=>[u.inputRef.current,u.buttonRef.current,u.optionsRef.current])}),ee(()=>{var z;u.optionsPropsRef.current.static=(z=t.static)!=null?z:!1},[u.optionsPropsRef,t.static]),ee(()=>{u.optionsPropsRef.current.hold=r},[u.optionsPropsRef,r]),Et(u.comboboxState===0,{container:u.optionsRef.current,accept(z){return z.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:z.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(z){z.setAttribute("role","none")}});let Y=we([(n=u.buttonRef.current)==null?void 0:n.id]),W=f.useMemo(()=>({open:u.comboboxState===0,option:void 0}),[u.comboboxState]),Q=w(()=>{I.setActivationTrigger(0)}),B=w(z=>{z.preventDefault(),I.setActivationTrigger(0)}),_=Te(x?C():{},{"aria-labelledby":Y,role:"listbox","aria-multiselectable":u.mode===1?!0:void 0,id:a,ref:T,style:{...b.style,...O,"--input-width":De(u.inputRef,!0).width,"--button-width":De(u.buttonRef,!0).width},onWheel:u.activationTrigger===0?void 0:Q,onMouseDown:B,...jt(v)}),N=h&&u.comboboxState===1,X=Ie(N,(e=u.virtual)==null?void 0:e.options),y=Ie(N,u.value),ne=w(z=>u.compare(y,z));if(u.virtual){if(X===void 0)throw new Error("Missing `options` in virtual mode");Object.assign(b,{children:E.createElement(ae.Provider,{value:X!==u.virtual.options?{...u,virtual:{...u.virtual,options:X}}:u},E.createElement(vn,{slot:W},b.children))})}return E.createElement(Rt,{enabled:c?t.static||h:!1},E.createElement(ae.Provider,{value:u.mode===1?u:{...u,isSelected:ne}},ue({ourProps:_,theirProps:{...b,children:E.createElement(cn,{freeze:N},typeof b.children=="function"?(o=b.children)==null?void 0:o.call(b,W):b.children)},slot:W,defaultTag:Tn,features:En,visible:h,name:"Combobox.Options"})))}let Cn="div";function Mn(t,i){var n,e,o,s;let a=se("Combobox.Option"),r=ce("Combobox.Option"),l=f.useId(),{id:c=`headlessui-combobox-option-${l}`,value:d,disabled:g=(o=(e=(n=a.virtual)==null?void 0:n.disabled)==null?void 0:e.call(n,d))!=null?o:!1,order:b=null,...u}=t,I=Xe(a.inputRef),x=a.virtual?a.activeOptionIndex===a.calculateIndex(d):a.activeOptionIndex===null?!1:((s=a.options[a.activeOptionIndex])==null?void 0:s.id)===c,p=a.isSelected(d),O=f.useRef(null),C=Lt({disabled:g,value:d,domRef:O,order:b}),T=f.useContext(Ze),M=he(i,O,T?T.measureElement:null),P=w(()=>{r.setIsTyping(!1),r.onChange(d)});ee(()=>r.registerOption(c,C),[C,c]);let h=f.useRef(!(a.virtual||a.__demoMode));ee(()=>{if(!a.virtual&&!a.__demoMode)return je().requestAnimationFrame(()=>{h.current=!0})},[a.virtual,a.__demoMode]),ee(()=>{if(h.current&&a.comboboxState===0&&x&&a.activationTrigger!==0)return je().requestAnimationFrame(()=>{var _,N;(N=(_=O.current)==null?void 0:_.scrollIntoView)==null||N.call(_,{block:"nearest"})})},[O,x,a.comboboxState,a.activationTrigger,a.activeOptionIndex]);let v=w(_=>{_.preventDefault(),_.button===Ee.Left&&(g||(P(),Pt()||requestAnimationFrame(()=>I()),a.mode===0&&r.closeCombobox()))}),$=w(()=>{if(g)return r.goToOption(D.Nothing);let _=a.calculateIndex(d);r.goToOption(D.Specific,_)}),L=Ct(),Y=w(_=>L.update(_)),W=w(_=>{if(!L.wasMoved(_)||g||x)return;let N=a.calculateIndex(d);r.goToOption(D.Specific,N,0)}),Q=w(_=>{L.wasMoved(_)&&(g||x&&(a.optionsPropsRef.current.hold||r.goToOption(D.Nothing)))}),B=f.useMemo(()=>({active:x,focus:x,selected:p,disabled:g}),[x,p,g]);return ue({ourProps:{id:c,ref:M,role:"option",tabIndex:g===!0?void 0:-1,"aria-disabled":g===!0?!0:void 0,"aria-selected":p,disabled:void 0,onMouseDown:v,onFocus:$,onPointerEnter:Y,onMouseEnter:Y,onPointerMove:W,onMouseMove:W,onPointerLeave:Q,onMouseLeave:Q},theirProps:u,slot:B,defaultTag:Cn,name:"Combobox.Option"})}let Pn=le(yn),_n=le(wn),et=le(In),An=dt,tt=le(Rn),nt=le(Mn),kn=Object.assign(Pn,{Input:et,Button:_n,Label:An,Options:tt,Option:nt});var te={},Ce={},Dn="Expected a function",Be=NaN,$n="[object Symbol]",Fn=/^\s+|\s+$/g,zn=/^[-+]0x[0-9a-f]+$/i,jn=/^0b[01]+$/i,Ln=/^0o[0-7]+$/i,Bn=parseInt,Nn=typeof pe=="object"&&pe&&pe.Object===Object&&pe,Kn=typeof self=="object"&&self&&self.Object===Object&&self,Un=Nn||Kn||Function("return this")(),qn=Object.prototype,Vn=qn.toString,Wn=Math.max,Gn=Math.min,Se=function(){return Un.Date.now()};function Hn(t,i,n){var e,o,s,a,r,l,c=0,d=!1,g=!1,b=!0;if(typeof t!="function")throw new TypeError(Dn);i=Ne(i)||0,Oe(n)&&(d=!!n.leading,g="maxWait"in n,s=g?Wn(Ne(n.maxWait)||0,i):s,b="trailing"in n?!!n.trailing:b);function u(h){var v=e,$=o;return e=o=void 0,c=h,a=t.apply($,v),a}function I(h){return c=h,r=setTimeout(O,i),d?u(h):a}function x(h){var v=h-l,$=h-c,L=i-v;return g?Gn(L,s-$):L}function p(h){var v=h-l,$=h-c;return l===void 0||v>=i||v<0||g&&$>=s}function O(){var h=Se();if(p(h))return C(h);r=setTimeout(O,x(h))}function C(h){return r=void 0,b&&e?u(h):(e=o=void 0,a)}function T(){r!==void 0&&clearTimeout(r),c=0,e=l=o=r=void 0}function M(){return r===void 0?a:C(Se())}function P(){var h=Se(),v=p(h);if(e=arguments,o=this,l=h,v){if(r===void 0)return I(l);if(g)return r=setTimeout(O,i),u(l)}return r===void 0&&(r=setTimeout(O,i)),a}return P.cancel=T,P.flush=M,P}function Oe(t){var i=typeof t;return!!t&&(i=="object"||i=="function")}function Jn(t){return!!t&&typeof t=="object"}function Yn(t){return typeof t=="symbol"||Jn(t)&&Vn.call(t)==$n}function Ne(t){if(typeof t=="number")return t;if(Yn(t))return Be;if(Oe(t)){var i=typeof t.valueOf=="function"?t.valueOf():t;t=Oe(i)?i+"":i}if(typeof t!="string")return t===0?t:+t;t=t.replace(Fn,"");var n=jn.test(t);return n||Ln.test(t)?Bn(t.slice(2),n?2:8):zn.test(t)?Be:+t}var Qn=Hn,me={};Object.defineProperty(me,"__esModule",{value:!0});me.compose=function(){for(var i=arguments.length,n=Array(i),e=0;e<i;e++)n[e]=arguments[e];return function(){for(var o=arguments.length,s=Array(o),a=0;a<o;a++)s[a]=arguments[a];n.forEach(function(r){return r&&r.apply(void 0,s)})}};me.pick=function(i){for(var n=arguments.length,e=Array(n>1?n-1:0),o=1;o<n;o++)e[o-1]=arguments[o];return e.reduce(function(s,a){return i&&i.hasOwnProperty(a)&&(s[a]=i[a]),s},{})};Object.defineProperty(Ce,"__esModule",{value:!0});var ie=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}return t},Xn=function(){function t(i,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(i,o.key,o)}}return function(i,n,e){return n&&t(i.prototype,n),e&&t(i,e),i}}(),Zn=f,eo=Me(Zn),to=ut,k=Me(to),no=Qn,oo=Me(no),J=me;function Me(t){return t&&t.__esModule?t:{default:t}}function io(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function ro(t,i){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:t}function so(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(t,i):t.__proto__=i)}var ao=function(i){return{mainText:i.main_text,secondaryText:i.secondary_text}},Pe=function(t){so(i,t);function i(n){io(this,i);var e=ro(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,n));return e.init=function(){if(!window.google)throw new Error("[react-places-autocomplete]: Google Maps JavaScript API library must be loaded. See: https://github.com/kenny-hibino/react-places-autocomplete#load-google-library");if(!window.google.maps.places)throw new Error("[react-places-autocomplete]: Google Maps Places library must be loaded. Please add `libraries=places` to the src URL. See: https://github.com/kenny-hibino/react-places-autocomplete#load-google-library");e.autocompleteService=new window.google.maps.places.AutocompleteService,e.autocompleteOK=window.google.maps.places.PlacesServiceStatus.OK,e.setState(function(o){return o.ready?null:{ready:!0}})},e.autocompleteCallback=function(o,s){if(e.setState({loading:!1}),s!==e.autocompleteOK){e.props.onError(s,e.clearSuggestions);return}var a=e.props.highlightFirstSuggestion;e.setState({suggestions:o.map(function(r,l){return{id:r.id,description:r.description,placeId:r.place_id,active:!!(a&&l===0),index:l,formattedSuggestion:ao(r.structured_formatting),matchedSubstrings:r.matched_substrings,terms:r.terms,types:r.types}})})},e.fetchPredictions=function(){var o=e.props.value;o.length&&(e.setState({loading:!0}),e.autocompleteService.getPlacePredictions(ie({},e.props.searchOptions,{input:o}),e.autocompleteCallback))},e.clearSuggestions=function(){e.setState({suggestions:[]})},e.clearActive=function(){e.setState({suggestions:e.state.suggestions.map(function(o){return ie({},o,{active:!1})})})},e.handleSelect=function(o,s,a){e.clearSuggestions(),e.props.onSelect?e.props.onSelect(o,s,a):e.props.onChange(o)},e.getActiveSuggestion=function(){return e.state.suggestions.find(function(o){return o.active})},e.selectActiveAtIndex=function(o){var s=e.state.suggestions.find(function(a){return a.index===o}).description;e.setActiveAtIndex(o),e.props.onChange(s)},e.selectUserInputValue=function(){e.clearActive(),e.props.onChange(e.state.userInputValue)},e.handleEnterKey=function(){var o=e.getActiveSuggestion();o===void 0?e.handleSelect(e.props.value,null,null):e.handleSelect(o.description,o.placeId,o)},e.handleDownKey=function(){if(e.state.suggestions.length!==0){var o=e.getActiveSuggestion();o===void 0?e.selectActiveAtIndex(0):o.index===e.state.suggestions.length-1?e.selectUserInputValue():e.selectActiveAtIndex(o.index+1)}},e.handleUpKey=function(){if(e.state.suggestions.length!==0){var o=e.getActiveSuggestion();o===void 0?e.selectActiveAtIndex(e.state.suggestions.length-1):o.index===0?e.selectUserInputValue():e.selectActiveAtIndex(o.index-1)}},e.handleInputKeyDown=function(o){switch(o.key){case"Enter":o.preventDefault(),e.handleEnterKey();break;case"ArrowDown":o.preventDefault(),e.handleDownKey();break;case"ArrowUp":o.preventDefault(),e.handleUpKey();break;case"Escape":e.clearSuggestions();break}},e.setActiveAtIndex=function(o){e.setState({suggestions:e.state.suggestions.map(function(s,a){return a===o?ie({},s,{active:!0}):ie({},s,{active:!1})})})},e.handleInputChange=function(o){var s=o.target.value;if(e.props.onChange(s),e.setState({userInputValue:s}),!s){e.clearSuggestions();return}e.props.shouldFetchSuggestions&&e.debouncedFetchPredictions()},e.handleInputOnBlur=function(){e.mousedownOnSuggestion||e.clearSuggestions()},e.getActiveSuggestionId=function(){var o=e.getActiveSuggestion();return o?"PlacesAutocomplete__suggestion-"+o.placeId:void 0},e.getIsExpanded=function(){return e.state.suggestions.length>0},e.getInputProps=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(o.hasOwnProperty("value"))throw new Error("[react-places-autocomplete]: getInputProps does not accept `value`. Use `value` prop instead");if(o.hasOwnProperty("onChange"))throw new Error("[react-places-autocomplete]: getInputProps does not accept `onChange`. Use `onChange` prop instead");var s={type:"text",autoComplete:"off",role:"combobox","aria-autocomplete":"list","aria-expanded":e.getIsExpanded(),"aria-activedescendant":e.getActiveSuggestionId(),disabled:!e.state.ready};return ie({},s,o,{onKeyDown:(0,J.compose)(e.handleInputKeyDown,o.onKeyDown),onBlur:(0,J.compose)(e.handleInputOnBlur,o.onBlur),value:e.props.value,onChange:function(r){e.handleInputChange(r)}})},e.getSuggestionItemProps=function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=e.handleSuggestionMouseEnter.bind(e,o.index),r=e.handleSuggestionClick.bind(e,o);return ie({},s,{key:o.id,id:e.getActiveSuggestionId(),role:"option",onMouseEnter:(0,J.compose)(a,s.onMouseEnter),onMouseLeave:(0,J.compose)(e.handleSuggestionMouseLeave,s.onMouseLeave),onMouseDown:(0,J.compose)(e.handleSuggestionMouseDown,s.onMouseDown),onMouseUp:(0,J.compose)(e.handleSuggestionMouseUp,s.onMouseUp),onTouchStart:(0,J.compose)(e.handleSuggestionTouchStart,s.onTouchStart),onTouchEnd:(0,J.compose)(e.handleSuggestionMouseUp,s.onTouchEnd),onClick:(0,J.compose)(r,s.onClick)})},e.handleSuggestionMouseEnter=function(o){e.setActiveAtIndex(o)},e.handleSuggestionMouseLeave=function(){e.mousedownOnSuggestion=!1,e.clearActive()},e.handleSuggestionMouseDown=function(o){o.preventDefault(),e.mousedownOnSuggestion=!0},e.handleSuggestionTouchStart=function(){e.mousedownOnSuggestion=!0},e.handleSuggestionMouseUp=function(){e.mousedownOnSuggestion=!1},e.handleSuggestionClick=function(o,s){s&&s.preventDefault&&s.preventDefault();var a=o.description,r=o.placeId;e.handleSelect(a,r,o),setTimeout(function(){e.mousedownOnSuggestion=!1})},e.state={loading:!1,suggestions:[],userInputValue:n.value,ready:!n.googleCallbackName},e.debouncedFetchPredictions=(0,oo.default)(e.fetchPredictions,n.debounce),e}return Xn(i,[{key:"componentDidMount",value:function(){var e=this.props.googleCallbackName;if(e){var o=window.google&&window.google.maps&&window.google.maps.places;o?this.init():window[e]=this.init}else this.init()}},{key:"componentWillUnmount",value:function(){var e=this.props.googleCallbackName;e&&window[e]&&delete window[e]}},{key:"render",value:function(){return this.props.children({getInputProps:this.getInputProps,getSuggestionItemProps:this.getSuggestionItemProps,loading:this.state.loading,suggestions:this.state.suggestions})}}]),i}(eo.default.Component);Pe.propTypes={onChange:k.default.func.isRequired,value:k.default.string.isRequired,children:k.default.func.isRequired,onError:k.default.func,onSelect:k.default.func,searchOptions:k.default.shape({bounds:k.default.object,componentRestrictions:k.default.object,location:k.default.object,offset:k.default.oneOfType([k.default.number,k.default.string]),radius:k.default.oneOfType([k.default.number,k.default.string]),types:k.default.array}),debounce:k.default.number,highlightFirstSuggestion:k.default.bool,shouldFetchSuggestions:k.default.bool,googleCallbackName:k.default.string};Pe.defaultProps={onError:function(i,n){return console.error(`[react-places-autocomplete]: error happened when fetching data from Google Maps API.
Please check the docs here (https://developers.google.com/maps/documentation/javascript/places#place_details_responses)
Status: `,i)},searchOptions:{},debounce:200,highlightFirstSuggestion:!1,shouldFetchSuggestions:!0};Ce.default=Pe;var de={};Object.defineProperty(de,"__esModule",{value:!0});de.geocodeByAddress=function(i){var n=new window.google.maps.Geocoder,e=window.google.maps.GeocoderStatus.OK;return new Promise(function(o,s){n.geocode({address:i},function(a,r){r!==e&&s(r),o(a)})})};de.getLatLng=function(i){return new Promise(function(n,e){try{var o={lat:i.geometry.location.lat(),lng:i.geometry.location.lng()};n(o)}catch(s){e(s)}})};de.geocodeByPlaceId=function(i){var n=new window.google.maps.Geocoder,e=window.google.maps.GeocoderStatus.OK;return new Promise(function(o,s){n.geocode({placeId:i},function(a,r){r!==e&&s(r),o(a)})})};Object.defineProperty(te,"__esModule",{value:!0});var ot=te.getLatLng=te.geocodeByPlaceId=it=te.geocodeByAddress=void 0,lo=Ce,uo=co(lo),_e=de;function co(t){return t&&t.__esModule?t:{default:t}}var it=te.geocodeByAddress=_e.geocodeByAddress;te.geocodeByPlaceId=_e.geocodeByPlaceId;ot=te.getLatLng=_e.getLatLng;var fo=te.default=uo.default;const po=({posCallback:t,centerCallback:i,singleMarker:n,singleMarkerCallback:e,eventAddress:o,eventLatitude:s,eventLongitude:a})=>{const[r,l]=f.useState(o||""),[c,d]=f.useState({lat:45.3850225,lng:-75.6946679}),[g,b]=f.useState([]),[u,I]=f.useState({lat:s||45.3850225,lng:a||-75.6946679}),x=async p=>{const O=await it(p),C=await ot(O[0]),T=O[0].place_id;l(p),d({lat:C.lat,lng:C.lng}),b([...g,{name:p,id:T,position:C}]),I(C)};return f.useEffect(()=>{t&&t(g)},[g,t]),f.useEffect(()=>{i&&i(c)},[c,i]),f.useEffect(()=>{n&&e&&e({coordinates:u,address:r})},[u,e,n]),V.jsx("div",{className:"cu-locationpicker not-prose",children:V.jsx(fo,{value:r,onChange:l,onSelect:x,children:({getInputProps:p,suggestions:O,getSuggestionItemProps:C})=>V.jsxs(kn,{value:r,onChange:x,children:[V.jsxs("div",{className:"relative",children:[V.jsx(Bt,{className:"pointer-events-none absolute left-3.5 top-3.5 h-5 w-5 text-cu-black-400","aria-hidden":"true"}),V.jsx(et,{className:"w-full h-12 pl-10 pr-4 bg-white border rounded-lg border-cu-black-200 text-cu-black-800 placeholder-cu-black-400 focus:border-cu-black-400 focus:outline-none focus:ring-0 sm:text-sm",...p({placeholder:"Type address"})}),r&&V.jsx(At,{className:"absolute right-3.5 top-3.5 h-5 w-5 text-cu-black-400","aria-hidden":"true",onClick:()=>{l("")}})]}),V.jsx(tt,{className:"mt-3 max-h-80 divide-y divide-cu-black-100 overflow-y-auto bg-white px-1.5 text-sm text-cu-black-800",children:O.map(T=>V.jsx(nt,{value:T,children:({active:M})=>V.jsx("ul",{children:V.jsx("li",{...C(T),className:`p-4 text-cu-black-600 hover:cursor-pointer ${M?"bg-cu-black-50 text-cu-black-900":"bg-white"}`,children:T.description})})},T.index))})]})})})};po.__docgenInfo={description:"",methods:[],displayName:"LocationPicker",props:{posCallback:{required:!1,tsType:{name:"signature",type:"function",raw:"(pos: { name: string; id: string; position: object }[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ name: string; id: string; position: object }",signature:{properties:[{key:"name",value:{name:"string",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"position",value:{name:"object",required:!0}}]}}],raw:"{ name: string; id: string; position: object }[]"},name:"pos"}],return:{name:"void"}}},description:""},centerCallback:{required:!1,tsType:{name:"signature",type:"function",raw:"(center: { lat: number; lng: number }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ lat: number; lng: number }",signature:{properties:[{key:"lat",value:{name:"number",required:!0}},{key:"lng",value:{name:"number",required:!0}}]}},name:"center"}],return:{name:"void"}}},description:""},singleMarker:{required:!1,tsType:{name:"boolean"},description:""},singleMarkerCallback:{required:!1,tsType:{name:"signature",type:"function",raw:"(marker: { coordinates: { lat: number; lng: number }; address: string }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ coordinates: { lat: number; lng: number }; address: string }",signature:{properties:[{key:"coordinates",value:{name:"signature",type:"object",raw:"{ lat: number; lng: number }",signature:{properties:[{key:"lat",value:{name:"number",required:!0}},{key:"lng",value:{name:"number",required:!0}}]},required:!0}},{key:"address",value:{name:"string",required:!0}}]}},name:"marker"}],return:{name:"void"}}},description:""},eventLatitude:{required:!1,tsType:{name:"number"},description:""},eventLongitude:{required:!1,tsType:{name:"number"},description:""},eventAddress:{required:!1,tsType:{name:"string"},description:""}}};export{po as L};
